<!DOCTYPE html><html lang="zh-CN"><head>
  <script type="module" src="/@vite/client"></script>

  <meta charset="utf-8">
  <title>MeeWoo - SVGA、双通道MP4、Lottie动画在线预览工具</title>
  <meta name="google-site-verification" content="YNpktNFlNRdSuuYYoTSmqsP4FCYT-jwmf1lyAduMsfM">
  <meta name="description" content="MeeWoo  - 免费在线预览SVGA、Lottie、双通道MP4动画，支持素材管理、GIF导出、MP4转换、帧率调整、变速编辑，无需安装即用">
  <meta name="keywords" content="MeeWoo,SVGA预览,Lottie播放器,双通道MP4,动画预览工具,GIF导出,SVGA素材管理,在线动画编辑器,MP4转换">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- 控制颜色方案，拒绝浏览器自动暗黑模式 -->
  <meta name="color-scheme" content="light dark">
  <style>
    /* 确保背景色不受浏览器自动暗黑模式影响 */
    :root {
      color-scheme: light dark;
    }
    html {
      background-color: #fcfcfc;
      transition: background-color 0.3s;
    }
    body.dark-mode html {
      background-color: #1a1a1a;
    }
  </style>

  <!-- Open Graph / 社交分享优化 -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="MeeWoo - SVGA、Lottie、双通道MP4动画在线预览和转换工具">
  <meta property="og:description" content="MeeWoo - 免费在线预览和编辑SVGA、Lottie、双通道MP4动画，支持素材管理、GIF导出、变速编辑">
  <meta property="og:url" content="https://svga.io">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="MeeWoo - SVGA、Lottie、双通道MP4动画在线预览和转换工具">
  <meta name="twitter:description" content="MeeWoo - 免费在线预览和编辑SVGA、Lottie、双通道MP4动画，支持素材管理、GIF导出、变速编辑">

  <!-- 搜索引擎优化 -->
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://svga.io">

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="favicon.png">

  <!-- COI Service Worker for SharedArrayBuffer support on GitHub Pages -->
  <script src="coi-serviceworker.js?v=9"></script>

  <!-- 外部样式表（优先加载） -->
  <link rel="stylesheet" href="assets/css/sprite-generated.css">
  <link rel="stylesheet" href="assets/css/styles.css">
  <link rel="stylesheet" href="assets/css/drawer.css">
  <link rel="stylesheet" href="assets/css/panel.css">

  <!-- 库加载管理器（优先加载，独立模块） -->
  <script src="assets/js/service/library-loader.js"></script>
  <!-- 资源管理器（管理 ObjectURL 生命周期） -->
  <script src="assets/js/service/resource-manager.js"></script>
  <!-- 图片压缩服务 -->
  <script src="assets/js/service/image-compression-service.js"></script>
  <!-- 侧边弹窗拖拽服务 -->
  <script src="assets/js/service/panel-drag.js"></script>
  <!-- 登录状态管理工具 -->
  <script src="assets/js/utils/auth-utils.js"></script>
  <!-- 图片处理API调用工具 -->
  <script src="assets/js/utils/image-api.js"></script>
  <script>
    // 立即加载核心库（Vue 和 SVGA Player）
    (function () {
      // 按照项目规范，使用 MeeWoo 作为项目级命名空间
      var libraryLoader = window.MeeWoo && window.MeeWoo.Core && window.MeeWoo.Core.libraryLoader;
      if (libraryLoader) {
        // 高优先级加载核心库
        libraryLoader.load(['vue', 'svgaplayer'], true).catch(function (err) {
          console.error('核心库加载失败:', err);
        });
      }
    })();
  </script><script src="assets/js/lib/vue.min.js"></script><script src="assets/js/lib/svga.min.js"></script>

  <!-- 站点配置加载器（用于广告位控制等功能） -->
  <script src="assets/js/service/site-config-loader.js"></script>

  <!-- 广告位控制器 -->
  <script src="assets/js/controllers/ad-controller.js"></script>

  <!-- 用户类型控制器 -->
  <script src="assets/js/controllers/user-type-controller.js"></script>

  <!-- ===== 所有库统一由 library-loader.js 动态加载 ===== -->
  <!-- Vue.js - 核心框架，优先级最高 -->
  <!-- SVGA播放器 - 核心功能，优先级次之 -->
  <!-- Lottie、Howler - 后台加载 -->
  <!-- Marked - 帮助文档时加载 -->
  <!-- GIF.js - 导出GIF时加载 -->
  <!-- Protobuf、Pako - 导出SVGA时加载 -->
  <!-- FFmpeg - 转MP4时加载 -->
  
  
<script src="assets/js/lib/marked.min.js"></script><script src="assets/js/lib/lottie.min.js"></script><script src="assets/js/lib/howler.min.js"></script><script src="assets/js/lib/konva.min.js"></script><script src="assets/js/lib/gif.js"></script><script src="assets/js/lib/protobuf.min.js"></script><script src="assets/js/lib/pako.min.js"></script><script src="assets/js/lib/jszip.min.js"></script><script src="assets/js/lib/html2canvas.min.js"></script><script src="https://unpkg.com/@ffmpeg/ffmpeg@0.11.6/dist/ffmpeg.min.js"></script></head>

<body data-has-input-controller="true">
  <!-- 首屏骨架屏（Vue加载前显示） -->
  <div id="loading-skeleton" style="position: fixed; top: 0px; left: 0px; width: 100%; height: 100%; display: none; align-items: center; justify-content: center; background: var(--bg-color, #f5f5f5); z-index: 9999; font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, sans-serif;">
    <div style="text-align: center;">
      <div style="
          width: 48px;
          height: 48px;
          margin: 0 auto 16px;
          border: 4px solid #e0e0e0;
          border-top-color: #666;
          border-radius: 50%;
          animation: spin 1s linear infinite;
        "></div>
      <div id="loading-text" style="color: #666; font-size: 14px;">加载中...</div>
    </div>
  </div>

  <!-- 页面加载超时检测脚本（独立运行，防止业务脚本阻塞导致无法提示） -->
  <script>
    (function () {
      // 全局状态标记
      window.SvgaPreview = window.SvgaPreview || {};
      window.SvgaPreview.APP_LOADED = false;

      var checkCount = 0;
      var maxChecks = 300; // 30秒 (300 * 100ms)
      var retryCount = 0;  // 重试次数记录

      function checkAppLoaded() {
        if (window.APP_LOADED) return; // 加载成功，停止检测

        checkCount++;

        // 10秒提示 (100次)
        if (checkCount === 100) {
          var textNode = document.getElementById('loading-text');
          if (textNode) textNode.innerText = '网络较慢，正在加载核心组件，请稍候...';
        }

        // 30秒超时 (300次)
        if (checkCount >= maxChecks) {
          var skeleton = document.getElementById('loading-skeleton');
          if (skeleton) {
            // 根据重试次数显示不同提示
            var isLastRetry = retryCount >= 1; // 已经重试过一次了
            var tipText = isLastRetry
              ? '加载依然失败，点击屏幕刷新页面'
              : '加载失败，点击屏幕重试';

            skeleton.innerHTML = '<div style="text-align: center; color: red; cursor: pointer; padding: 20px;">' + tipText + '</div>';

            // 点击处理逻辑
            var onAction = function () {
              skeleton.removeEventListener('click', onAction);

              if (isLastRetry) {
                // 第二次超时，直接刷新页面
                location.reload();
              } else {
                // 第一次超时，尝试软重试
                retryCount++;
                // 恢复 Loading 状态
                skeleton.style.cursor = 'default';
                skeleton.innerHTML =
                  '<div style="text-align: center;">' +
                  '<div style="width: 48px; height: 48px; margin: 0 auto 16px; border: 4px solid #e0e0e0; border-top-color: #666; border-radius: 50%; animation: spin 1s linear infinite;"></div>' +
                  '<div id="loading-text" style="color: #666; font-size: 14px;">正在重新加载...</div>' +
                  '</div>';

                checkCount = 0;
                setTimeout(checkAppLoaded, 100);
              }
            };
            skeleton.addEventListener('click', onAction);
            return; // 停止当前轮询
          }
        }

        setTimeout(checkAppLoaded, 100);
      }

      // 启动检测
      setTimeout(checkAppLoaded, 100);
    })();
  </script>

  <div id="app"><div class="header-navbar"><div class="header-left-action"><img src="./assets/img/home_more.png" alt="More" class="header-more-icon" style="width: 24px; height: 24px;"></div> <!----> <div class="header-right-action"><div class="login-btn-container"><a href="#" class="login-btn"><span class="login-icon"></span></a> <div class="login-menu"><!----></div></div> <button class="theme-toggle tooltip"><span class="tooltip-text">切换到暗黑模式</span> <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="5"></circle> <line x1="12" y1="1" x2="12" y2="3" stroke="currentColor" stroke-width="2" stroke-linecap="round"></line> <line x1="12" y1="21" x2="12" y2="23" stroke="currentColor" stroke-width="2" stroke-linecap="round"></line> <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" stroke="currentColor" stroke-width="2" stroke-linecap="round"></line> <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" stroke="currentColor" stroke-width="2" stroke-linecap="round"></line> <line x1="1" y1="12" x2="3" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round"></line> <line x1="21" y1="12" x2="23" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round"></line> <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" stroke="currentColor" stroke-width="2" stroke-linecap="round"></line> <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" stroke="currentColor" stroke-width="2" stroke-linecap="round"></line></svg></button></div></div> <div class="help-button"><div class="help-popup"><h2>⌨️ 快捷操作</h2>
<ul>
<li><strong>空格</strong> = 暂停/恢复播放</li>
<li><strong>滚轮</strong> = 缩放画布</li>
<li><strong>Ctrl + 滚轮</strong> = 精确缩放</li>
<li><strong>中键拖动</strong> = 平移画布</li>
<li><strong>1:1 按钮</strong> = 恢复原始尺寸</li>
<li><strong>拖拽进度条</strong> = 跳转到任意帧<br>
<br></li>
</ul>
<h2>📥 支持的文件格式</h2>
<h3>SVGA 动画（.svga）</h3>
<ul>
<li>✅ 支持 SVGA 2.0 格式</li>
<li>✅ 支持素材替换、导出 GIF、转双通道 MP4</li>
<li>❌ 不支持 SVGA 1.0<br>
<br></li>
</ul>
<h3>双通道 MP4（.mp4）</h3>
<ul>
<li>✅ 自动识别左右/上下双通道布局</li>
<li>✅ 保留音轨、转 SVGA、导出 GIF</li>
<li>💡 适用于游戏/直播动画素材<br>
<br></li>
</ul>
<h3>普通 MP4（.mp4）</h3>
<ul>
<li>✅ 支持扣绿幕后转 SVGA / 双通道 MP4<br>
<br></li>
</ul>
<h3>Lottie 动画（.json）</h3>
<ul>
<li>✅ 支持预览</li>
<li>✅ 支持转 SVGA、转双通道 MP4、导出GIF<br>
<br></li>
</ul>
<h3>序列帧（多个 .png）（开发中）</h3>
<ul>
<li>✅ 拖入多张图片自动识别序列</li>
<li>✅ 需要文件名包含数字（如 <code>frame_001.png</code>）</li>
<li>✅ 可设置播放帧率（1-120 fps）</li>
<li>✅ 可导出为 SVGA / 双通道 MP4 / GIF<br>
<br></li>
</ul>
<h2>📤 导出功能</h2>
<h3>导出 GIF</h3>
<ul>
<li>支持自定义尺寸、帧率、质量</li>
<li>支持选择帧范围（避免文件过大）</li>
<li>💡 <strong>技巧</strong>：大视频建议降低帧率到 15fps<br>
<br></li>
</ul>
<h3>SVGA → 双通道 MP4</h3>
<ul>
<li>输出左彩色 + 右 Alpha 的双通道视频</li>
<li>可调节压缩质量（默认 70%）</li>
<li>保留原始帧率<br>
<br></li>
</ul>
<h3>双通道 MP4 → SVGA</h3>
<ul>
<li>提取序列帧重建 SVGA 文件</li>
<li>适合游戏客户端使用<br>
<br></li>
</ul>
<h3>素材替换 &amp; 导出新 SVGA</h3>
<ul>
<li>点击"素材图"按钮查看所有图片素材</li>
<li>支持搜索、复制素材名</li>
<li>替换后可直接导出新 SVGA<br>
<br></li>
</ul>
<h2>🎨 界面操作</h2>
<h3>背景切换</h3>
<ul>
<li>6 种纯色背景 + 透明网格</li>
<li>检查动画透明度必备</li>
<li>支持暗黑/白天主题切换<br>
<br></li>
</ul>
<h3>文件信息</h3>
<ul>
<li>自动显示尺寸、帧率、时长、文件大小</li>
<li>实时显示当前帧数<br>
<br></li>
</ul>
<h3>清空画布</h3>
<ul>
<li>点击"清空"重新开始</li>
<li>或直接拖入新文件覆盖<br>
<br></li>
</ul>
<h2>💡 使用技巧</h2>
<h3>1️⃣ AI 生成视频 → 客户端动画</h3>
<pre><code>AI 生成绿幕视频 → 拖入本工具 → 扣绿幕
                 ↓
        导出 SVGA / 双通道 MP4
                 ↓
          直接用于游戏/App
</code></pre>
<br>
<br>

<h3>2️⃣ 快速检查透明度</h3>
<ul>
<li>切换背景色查看边缘是否干净</li>
<li>透明网格模式最直观<br>
<br></li>
</ul>
<h3>3️⃣ 减小 GIF 文件体积</h3>
<ul>
<li>降低输出尺寸（如 750 → 375）</li>
<li>降低帧率（30fps → 15fps）</li>
<li>只导出关键帧范围<br>
<br></li>
</ul>
<h3>4️⃣ 素材替换批量操作</h3>
<ul>
<li>使用搜索框快速定位素材</li>
<li>复制素材名粘贴到设计工具<br>
<br></li>
</ul>
<h2>⚙️ 系统要求</h2>
<ul>
<li>现代浏览器（Chrome 90+ / Edge 90+ / Firefox 88+ / Safari 14+）</li>
<li>建议内存 ≥ 4GB（处理大文件时）</li>
<li>GIF 导出使用 Web Worker，不卡页面<br>
<br></li>
</ul>
</div></div> <div class="main-page"><div class="viewer-area"><!----> <!----> <div class="empty-state-overlay"><div class="empty-state-icon"><img src="assets/img/logo04.png" alt="Logo"></div> <div class="empty-state-slogan">动画格式预览与转换工具...</div> <div class="empty-state-text"><div class="empty-state-title">你可以转GIF；SVGA素材图替换；转双通道MP4；转SVGA；转MP4...</div> <div class="empty-state-subtitle">支持文件包括：SVGA、双通道MP4、普通MP4、Lottie格式、序列帧、webp（开发中...）</div></div></div> <input type="file" accept=".svga,.json,.lottie,.mp4,.png,.jpg,.jpeg" multiple="multiple" style="display: none;"></div> <div id="ad-container" data-ad-position="right-float" class="ad-position-right" style="display: none;"><ins data-ad-client="ca-pub-9291089781078791" data-ad-slot="6512306484" class="adsbygoogle" style="display: inline-block; width: 160px; height: 600px;"></ins></div> <div class="footer-bar is-empty"><div class="ad-slot"></div> <div class="footer-main-wrapper"><!----> <!----> <!----> <div class="footer-main footer-main-empty"><div class="footer-empty-tip"><div class="footer-empty-tip-sub">
                    拖入文件，或<br><span class="click-upload-text">点击上传</span></div></div></div> <!----></div> <div class="ad-slot"></div></div> <div class="drop-overlay"><div class="drop-hint"><div class="drop-hint-text">松开鼠标！</div></div></div></div> <div class="material-overlay"></div> <div class="side-panel side-panel--right material-panel draggable"><div class="side-panel-container"><div class="material-panel-stats"><div class="stats-header">素材图管理</div> <div class="stats-divider"></div> <div class="stats-content"><div class="stats-title">图像资源：0 个 内存占用：</div> <div class="stats-help">你可以替换、下载素材图片，然后导出新的SVGA。<br>替换后的图片将自动缩放填充至原图尺寸，保持比例居中显示。</div></div></div> <div class="material-search"><input type="text" placeholder="搜索素材名称..." class="material-search-input" style=""></div> <div class="material-panel-scroll"><div class="material-empty">
            未检测到素材图片
          </div></div> <div class="side-panel-footer"><button title="关闭" class="material-btn-back"><svg width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M12 16L6 10L12 4" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg> <span>取消</span></button> <button disabled="disabled" class="btn-large-secondary">
              压缩并导出新SVGA
              <!----></button></div></div></div> <!----> <!----> <div class="side-panel side-panel--right svga-panel gif-panel draggable"><div class="side-panel-container"><div class="side-panel-header"><h3 class="side-panel-title">转成GIF动图</h3> <div class="side-panel-divider"></div></div> <div class="svga-info-section"><div class="svga-info-row">当前尺寸：0 × 0 帧率：30FPS 时长：0.00s</div> <div class="svga-compress-hint">注意：GIF文件体积较大，建议控制尺寸和帧率。超过10M的GIF可能加载较慢。</div></div> <div class="svga-config-section"><div class="svga-config-item"><div class="svga-config-label">尺寸：</div> <div class="svga-size-container"><div class="input-wrapper input-wrapper--lg svga-size-input-wrapper"><input type="number" min="1" max="3000" class="base-input" style=""></div> <div class="svga-size-lock"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.66667 7.33333V5.33333C4.66667 3.86057 5.86057 2.66667 7.33333 2.66667H8.66667C10.1394 2.66667 11.3333 3.86057 11.3333 5.33333V7.33333M5.33333 7.33333H10.6667C11.403 7.33333 12 7.93029 12 8.66667V12C12 12.7364 11.403 13.3333 10.6667 13.3333H5.33333C4.59695 13.3333 4 12.7364 4 12V8.66667C4 7.93029 4.59695 7.33333 5.33333 7.33333Z" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"></path></svg></div> <div class="input-wrapper input-wrapper--lg svga-size-input-wrapper"><input type="number" min="1" max="3000" class="base-input" style=""></div></div></div> <div class="svga-config-item"><div class="svga-config-label">帧率：</div> <div class="svga-value-container"><div class="input-wrapper input-wrapper--lg svga-value-input-wrapper"><input type="number" min="1" max="60" class="base-input" style=""></div> <div class="input-unit">FPS</div></div></div> <div class="svga-config-item"><div class="svga-config-label">质量：</div> <div class="svga-value-container"><div class="input-wrapper input-wrapper--lg svga-value-input-wrapper"><input type="number" min="1" max="30" class="base-input" style=""></div> <div class="input-unit input-unit--hint">越小越好</div></div></div> <div class="svga-config-item"><div class="svga-config-label">透明底</div> <div class="svga-mute-toggle"><div class="svga-mute-toggle-handle"></div></div></div> <!----> <!----> <!----></div> <div class="side-panel-footer"><button title="返回" class="material-btn-back"><svg width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M12 16L6 10L12 4" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg> <span>取消</span></button> <button class="btn-large-secondary">
            开始转GIF
          </button></div></div></div> <div class="side-panel side-panel--right svga-panel frames-panel draggable"><div class="side-panel-container"><div class="side-panel-header"><h3 class="side-panel-title">转为序列帧</h3> <div class="side-panel-divider"></div></div> <div class="svga-info-section"><div class="svga-info-row">当前尺寸：0 × 0 帧率：24FPS 时长：0.00s</div> <div class="svga-compress-hint">注意：序列帧文件会打包为ZIP下载，建议控制尺寸和帧率以减少文件体积。</div></div> <div class="svga-config-section"><div class="svga-config-item"><div class="svga-config-label">尺寸：</div> <div class="svga-size-container"><div class="input-wrapper input-wrapper--lg svga-size-input-wrapper"><input type="number" min="1" max="3000" class="base-input" style=""></div> <div class="svga-size-lock"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.66667 7.33333V5.33333C4.66667 3.86057 5.86057 2.66667 7.33333 2.66667H8.66667C10.1394 2.66667 11.3333 3.86057 11.3333 5.33333V7.33333M5.33333 7.33333H10.6667C11.403 7.33333 12 7.93029 12 8.66667V12C12 12.7364 11.403 13.3333 10.6667 13.3333H5.33333C4.59695 13.3333 4 12.7364 4 12V8.66667C4 7.93029 4.59695 7.33333 5.33333 7.33333Z" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"></path></svg></div> <div class="input-wrapper input-wrapper--lg svga-size-input-wrapper"><input type="number" min="1" max="3000" class="base-input" style=""></div></div></div> <div class="svga-config-item"><div class="svga-config-label">帧率：</div> <div class="svga-value-container"><div class="input-wrapper input-wrapper--lg svga-value-input-wrapper"><input type="number" min="1" max="60" class="base-input" style=""></div> <div class="input-unit">FPS</div></div></div> <div class="svga-config-item"><div class="svga-config-label">PNG压缩质量：</div> <div class="svga-value-container"><div class="input-wrapper input-wrapper--lg svga-value-input-wrapper"><input type="number" min="10" max="100" class="base-input" style=""></div> <div class="input-unit input-unit--hint">10% - 100%</div></div></div></div> <!----> <div class="side-panel-footer"><button title="返回" class="material-btn-back"><svg width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M12 16L6 10L12 4" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg> <span>取消</span></button> <button class="btn-large-secondary">
              开始转换
            </button></div></div></div> <div class="side-panel side-panel--right svga-panel webp-panel draggable"><div class="side-panel-container"><div class="side-panel-header"><h3 class="side-panel-title">转为webp</h3> <div class="side-panel-divider"></div></div> <div class="svga-info-section"><div class="svga-info-row">当前尺寸：0 × 0 帧率：24FPS 时长：0.00s</div> <div class="svga-compress-hint">注意：webp格式支持动画，建议控制尺寸和帧率以减少文件体积。</div></div> <div class="svga-config-section"><div class="svga-config-item"><div class="svga-config-label">尺寸：</div> <div class="svga-size-container"><div class="input-wrapper input-wrapper--lg svga-size-input-wrapper"><input type="number" min="1" max="3000" class="base-input" style=""></div> <div class="svga-size-lock"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.66667 7.33333V5.33333C4.66667 3.86057 5.86057 2.66667 7.33333 2.66667H8.66667C10.1394 2.66667 11.3333 3.86057 11.3333 5.33333V7.33333M5.33333 7.33333H10.6667C11.403 7.33333 12 7.93029 12 8.66667V12C12 12.7364 11.403 13.3333 10.6667 13.3333H5.33333C4.59695 13.3333 4 12.7364 4 12V8.66667C4 7.93029 4.59695 7.33333 5.33333 7.33333Z" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"></path></svg></div> <div class="input-wrapper input-wrapper--lg svga-size-input-wrapper"><input type="number" min="1" max="3000" class="base-input" style=""></div></div></div> <div class="svga-config-item"><div class="svga-config-label">帧率：</div> <div class="svga-value-container"><div class="input-wrapper input-wrapper--lg svga-value-input-wrapper"><input type="number" min="1" max="60" class="base-input" style=""></div> <div class="input-unit">FPS</div></div></div></div> <!----> <div class="side-panel-footer"><button title="返回" class="material-btn-back"><svg width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M12 16L6 10L12 4" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg> <span>取消</span></button> <button class="btn-large-secondary">
              导出webp
            </button></div></div></div> <div class="center-modal-overlay"><div class="center-modal-dialog" style="width: 420px;"><div class="center-modal-header"><h3>设置素材图压缩参数</h3></div> <div class="center-modal-body"><div class="svga-config-item"><div class="svga-config-label">图片缩小比例：</div> <div class="svga-value-container"><div class="input-wrapper input-wrapper--lg svga-value-input-wrapper"><input type="number" min="10" max="100" class="base-input" style=""></div> <div class="input-unit">%</div></div></div> <div class="compress-hint">缩小图片尺寸来降低内存和文件大小。</div> <div class="svga-config-item svga-config-item--mt"><div class="svga-config-label">PNG压缩质量：</div> <div class="svga-value-container"><div class="input-wrapper input-wrapper--lg svga-value-input-wrapper"><input type="number" min="10" max="100" class="base-input" style=""></div> <div class="input-unit">%</div></div></div> <div class="compress-hint">PNG压缩质量，10%最低质量（文件最小），100%最高质量（文件最大），80%平衡。</div> <div class="svga-config-item svga-config-item--mt"><div class="svga-config-label">导出静音SVGA</div> <div class="svga-mute-toggle"><div class="svga-mute-toggle-handle"></div></div></div> <div class="compress-hint">开启后导出的SVGA文件将不包含任何音频数据。</div></div> <div class="center-modal-footer"><!----> <button class="btn-large-primary">取消</button> <button class="btn-large-secondary">压缩并导出</button></div></div></div> <div class="center-modal-overlay"><div class="center-modal-dialog" style="width: 400px;"><div class="center-modal-header"><h3>编辑K帧帧数</h3></div> <div class="center-modal-body"><div class="form-group"><label>帧数 (0-0)</label> <div class="input-wrapper input-wrapper--lg svga-size-input-wrapper"><input type="number" min="0" max="0" class="base-input" style=""></div></div></div> <div class="center-modal-footer"><button class="btn-large-primary">取消</button> <button class="btn-large-secondary">确定</button></div></div></div> <div class="center-modal-overlay"><div class="center-modal-dialog" style="width: 480px;"><div class="center-modal-header"><h3>视频播放异常</h3></div> <div class="center-modal-body"><div style="margin-bottom: 16px; line-height: 1.6; color: rgb(102, 102, 102);">
              检测到该MP4视频的编码格式可能不兼容，导致浏览器解码卡死。<br><br> <strong>原因：</strong>视频编码参数不符合浏览器解码器要求<br> <strong>建议：</strong>转换为兼容格式后再播放<br><br>
              是否立即转换为兼容格式？
            </div> <!----></div> <div class="center-modal-footer"><button class="btn-large-primary">否</button> <button class="btn-large-secondary">是</button></div></div></div> <div class="side-panel side-panel--left chromakey-panel draggable"><div class="side-panel-container"><div class="side-panel-header"><h3 class="side-panel-title">扣掉画面绿幕成透明</h3> <div class="side-panel-divider"></div></div> <div class="chromakey-info-section"><div class="chromakey-info-row">MP4尺寸： 时长：</div> <div class="chromakey-performance-hint">打开绿幕抠图，播放会比较卡，因为是实时渲染抠图效果</div></div> <div class="chromakey-config-section"><div class="chromakey-config-item"><div class="chromakey-config-label">打开绿幕抠图：</div> <div class="chromakey-switch-wrapper"><div class="chromakey-switch"><div class="chromakey-switch-handle"></div></div></div></div> <!----> <!----></div> <div class="side-panel-footer"><button class="btn-large-secondary">
            确定
          </button></div></div></div> <input type="file" accept=".svga" style="display: none;"> <input type="file" accept=".svga,.json,.lottie,.mp4,.png,.jpg,.jpeg" multiple="multiple" style="display: none;"> <div class="center-modal-overlay"><div class="center-modal-dialog" style="width: 400px;"><div class="center-modal-header"><h3>设置帧率</h3></div> <div class="center-modal-body"><div class="fps-hint">请输入序列帧的播放帧率（1-120 fps）</div> <div class="fps-input-row"><div class="input-wrapper input-wrapper--lg svga-size-input-wrapper"><input type="number" min="1" max="120" class="base-input" style=""></div> <span class="fps-unit">fps</span></div></div> <div class="center-modal-footer"><button class="btn-large-secondary">确定</button></div></div></div> <div class="side-panel side-panel--right to-svga-panel draggable"><div class="side-panel-container"><div class="side-panel-header"><h3 class="side-panel-title">转换为SVGA动画格式</h3> <div class="side-panel-divider"></div></div> <div class="svga-info-section"><div class="svga-info-row">尺寸： 帧率：30 时长：</div> <div class="svga-compress-hint">注意：帧率过高文件将巨大，内存占用将巨大。转SVGA是序列帧形式，内存占用会比普通SVGA高很多。</div></div> <div class="svga-config-section"><div class="svga-config-item"><div class="svga-config-label">尺寸：</div> <div class="svga-size-container"><div class="input-wrapper input-wrapper--lg svga-size-input-wrapper"><input type="number" min="1" max="3000" class="base-input" style=""></div> <div class="svga-size-lock"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.66667 7.33333V5.33333C4.66667 3.86057 5.86057 2.66667 7.33333 2.66667H8.66667C10.1394 2.66667 11.3333 3.86057 11.3333 5.33333V7.33333M5.33333 7.33333H10.6667C11.403 7.33333 12 7.93029 12 8.66667V12C12 12.7364 11.403 13.3333 10.6667 13.3333H5.33333C4.59695 13.3333 4 12.7364 4 12V8.66667C4 7.93029 4.59695 7.33333 5.33333 7.33333Z" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"></path></svg></div> <div class="input-wrapper input-wrapper--lg svga-size-input-wrapper"><input type="number" min="1" max="3000" class="base-input" style=""></div></div></div> <div class="svga-config-item"><div class="svga-config-label">压缩到质量：</div> <div class="svga-value-container"><div class="input-wrapper input-wrapper--lg svga-value-input-wrapper"><input type="number" min="10" max="100" class="base-input" style=""></div> <div class="input-unit">%</div></div></div> <div class="svga-config-item"><div class="svga-config-label">帧率修改：</div> <div class="svga-value-container"><div class="input-wrapper input-wrapper--lg svga-value-input-wrapper"><input type="number" min="1" max="60" class="base-input" style=""></div> <div class="input-unit">FPS</div></div></div> <div class="svga-config-item"><div class="svga-config-label">静音</div> <div class="svga-mute-toggle"><div class="svga-mute-toggle-handle"></div></div></div></div> <!----> <div class="side-panel-footer"><button title="返回" class="material-btn-back"><svg width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M12 16L6 10L12 4" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg> <span>取消</span></button> <button data-progress="0" class="btn-large-secondary">
              开始转换SVGA
            </button></div></div></div> <div class="center-modal-overlay"><div class="center-modal-dialog material-editor-modal" style="width: 1000px; max-width: 95vw; height: 80vh; max-height: 800px; display: flex; flex-direction: column;"><div class="center-modal-header"><h3>编辑素材图</h3></div> <div class="center-modal-body material-editor-body"><div class="editor-preview-area"><div class="editor-preview-wrapper" style="width: 0px; height: 0px; transform: translate(0px, 0px) scale(1);"><div class="editor-preview-content" style="width: 0px; height: 0px;"><!----> <!----></div></div> <div class="editor-bottom-actions"><div class="editor-bottom-left"><button title="1:1显示" class="editor-view-btn"></button> <div class="editor-scale-percentage">100%</div></div> <div class="editor-bottom-right"><input type="file" accept="image/png,image/jpeg" style="display: none;"> <button class="btn-large-primary">上传图片</button> <!----> <button class="btn-large-primary btn-ai-generate tooltip"><i class="sprite-icon sprite-AI-img btn-icon-ai"></i> <span class="tooltip-text">开发中...</span></button></div></div></div> <div class="editor-controls-area"><div class="editor-control-group"><div class="svga-config-item"><div class="svga-config-label">显示素材图</div> <div class="svga-mute-toggle active"><div class="svga-mute-toggle-handle"></div></div></div> <div class="svga-config-item"><div class="svga-config-label">显示文案</div> <div class="svga-mute-toggle"><div class="svga-mute-toggle-handle"></div></div></div></div> <!----></div></div> <div class="center-modal-footer"><button class="btn-large-primary">取消</button> <button class="btn-large-secondary">
            保存
          </button></div></div></div> <div class="more-drawer"><div class="drawer-header"><div class="drawer-header-left"><img src="assets/img/logo05.png" alt="Logo" class="drawer-logo"> <div class="drawer-slogan">动画格式预览与转换工具</div></div> <div class="drawer-close-btn"><img src="assets/img/home_more.png" alt="Close" style="width: 24px; height: 24px; transform: rotate(180deg);"></div></div> <div class="drawer-content"><a href="sth_auto.html" data-user-type="material-self-service" data-user-visible="true" class="drawer-btn" style="visibility: visible;"><span>素材自助</span> <img src="assets/img/go.png" alt="Go" class="drawer-btn-icon"></a> <a href="gadgets/png_compression.html" class="drawer-btn"><span>PNG压缩工具</span> <img src="assets/img/go.png" alt="Go" class="drawer-btn-icon"></a> <a href="gadgets/fix_garbled_text.html" class="drawer-btn"><span>修复中文乱码工具</span> <img src="assets/img/go.png" alt="Go" class="drawer-btn-icon"></a> <div data-user-type="celebrity-gift-video" data-user-visible="true" class="drawer-btn disabled" style="visibility: visible;"><span>名人礼物视频版</span> <img src="assets/img/go.png" alt="Go" class="drawer-btn-icon"></div> <div data-user-type="avatar-generator" data-user-visible="true" class="drawer-btn disabled" style="visibility: visible;"><span>Avatar小图标生成</span> <img src="assets/img/go.png" alt="Go" class="drawer-btn-icon"></div></div> <div class="drawer-links"><a href="https://saysth.design/2019/06/04/svga01-0/" class="drawer-link-item">SVGA动画文件是什么？</a> <a href="javascript:void(0)" class="drawer-link-item">动画相关链接2</a></div> <div class="drawer-footer"><a href="https://saysth.design/" target="_blank" class="drawer-avatar"><img src="./assets/img/toux.png" alt="Avatar"></a></div></div></div>

  <!-- FFmpeg音视频处理服务 -->
  <script src="assets/js/service/ffmpeg/ffmpeg-service.js"></script>

  <!-- 双通道图像合成器模块 -->
  <script src="assets/js/service/dual-channel/dual-channel-composer.js"></script>

  <!-- SVGA构建器模块 -->
  <script src="assets/js/service/svga/svga-builder.js"></script>

  <!-- GIF导出器模块 -->
  <script src="assets/js/service/gif/gif-exporter.js"></script>

  <!-- WebP导出器模块 -->
  <script src="assets/js/service/webp/webp-exporter.js"></script>

  <!-- 序列帧导出器模块 -->
  <script src="assets/js/service/frames/frames-exporter.js"></script>

  <!-- 文件验证器模块 -->
  <script src="assets/js/utils/file-validator.js"></script>

  <!-- 工具函数库模块 -->
  <script src="assets/js/utils/utils.js"></script>
  <script src="assets/js/controllers/input-controller.js"></script>

  <!-- 组件库 -->
  <script src="assets/js/components/index.js"></script>
  <script src="assets/js/components/standard-mp4-panel.js"></script>
  <script src="assets/js/components/dual-channel-panel.js"></script>
  <script src="assets/js/components/material-panel.js"></script>
  <script src="assets/js/components/gif-panel.js"></script>
  <script src="assets/js/components/frames-panel.js"></script>
  <script src="assets/js/components/webp-panel.js"></script>
  
  <script src="assets/js/components/to-svga-panel.js"></script>
  <script src="assets/js/components/chromakey-panel.js"></script>

  <!-- 定义组件模板 -->
  <script type="text/x-template" id="tpl-gif-panel">
    <div class="side-panel side-panel--right svga-panel gif-panel" :class="{'show': visible}">
      <div class="side-panel-container">
        <!-- 标题区 -->
        <div class="side-panel-header">
          <h3 class="side-panel-title">转成GIF动图</h3>
          <div class="side-panel-divider"></div>
        </div>

        <!-- 当前文件信息 -->
        <div class="svga-info-section">
          <div class="svga-info-row">当前尺寸：{{ sourceInfo.sizeWH }} 帧率：{{ sourceInfo.fps }}FPS 时长：{{
            (sourceInfo.duration || 0).toFixed(2) }}s</div>
          <div class="svga-compress-hint">注意：GIF文件体积较大，建议控制尺寸和帧率。超过10M的GIF可能加载较慢。</div>
        </div>

        <!-- 配置区域 -->
        <div class="svga-config-section" :class="{disabled: isExporting}">
          <!-- 尺寸 -->
          <div class="svga-config-item">
            <div class="svga-config-label">尺寸：</div>
            <div class="svga-size-container">
              <div class="input-wrapper input-wrapper--lg svga-size-input-wrapper">
                <input type="number" class="base-input" v-model.number="config.width" @input="onWidthChange"
                  :disabled="isExporting" min="1" max="3000" />
              </div>
              <div class="svga-size-lock">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M4.66667 7.33333V5.33333C4.66667 3.86057 5.86057 2.66667 7.33333 2.66667H8.66667C10.1394 2.66667 11.3333 3.86057 11.3333 5.33333V7.33333M5.33333 7.33333H10.6667C11.403 7.33333 12 7.93029 12 8.66667V12C12 12.7364 11.403 13.3333 10.6667 13.3333H5.33333C4.59695 13.3333 4 12.7364 4 12V8.66667C4 7.93029 4.59695 7.33333 5.33333 7.33333Z"
                    stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </div>
              <div class="input-wrapper input-wrapper--lg svga-size-input-wrapper">
                <input type="number" class="base-input" v-model.number="config.height" @input="onHeightChange"
                  :disabled="isExporting" min="1" max="3000" />
              </div>
            </div>
          </div>

          <!-- 帧率 -->
          <div class="svga-config-item">
            <div class="svga-config-label">帧率：</div>
            <div class="svga-value-container">
              <div class="input-wrapper input-wrapper--lg svga-value-input-wrapper">
                            <input type="number" class="base-input" v-model.number="config.fps"
                              :disabled="isExporting" min="1" max="60" />
                          </div>
              <div class="input-unit">FPS</div>
            </div>
          </div>

          <!-- 质量 -->
          <div class="svga-config-item">
            <div class="svga-config-label">质量：</div>
            <div class="svga-value-container">
              <div class="input-wrapper input-wrapper--lg svga-value-input-wrapper">
                <input type="number" class="base-input" v-model.number="config.quality" :disabled="isExporting"
                  min="1" max="30" />
              </div>
              <div class="input-unit input-unit--hint">越小越好</div>
            </div>
          </div>

          <!-- 透明底开关 -->
          <div class="svga-config-item">
            <div class="svga-config-label">透明底</div>
            <div class="svga-mute-toggle" :class="{active: config.transparent, disabled: isExporting}"
              @click="!isExporting && (config.transparent = !config.transparent)">
              <div class="svga-mute-toggle-handle"></div>
            </div>
          </div>

          <!-- 杂色边开关（仅在透明底打开时显示） -->
          <div class="svga-config-item" v-if="config.transparent">
            <div class="svga-config-label">杂色边</div>
            <div class="svga-mute-toggle" :class="{active: config.dither, disabled: isExporting}"
              @click="!isExporting && (config.dither = !config.dither)">
              <div class="svga-mute-toggle-handle"></div>
            </div>
          </div>

          <!-- 杂色边颜色选择器（仅在杂色边打开时显示） -->
          <div class="svga-config-item" v-if="config.transparent && config.dither">
            <div class="svga-config-label">杂色颜色：</div>
            <div class="gif-color-picker">
              <input type="color" v-model="config.ditherColor" :disabled="isExporting" class="gif-color-input" />
              <span class="gif-color-value">{{ config.ditherColor }}</span>
            </div>
          </div>
        

        <!-- 导出进度 -->
        <div class="export-progress" v-if="isExporting">
          <div class="progress-info">
            <span class="progress-status">
              <span class="spinner" v-if="exportStage !== 'done'"></span>
              {{ exportMessage }}
            </span>
            <span class="progress-percent">{{ Math.round(exportProgress * 100) }}%</span>
          </div>
          <div class="progress-bar-bg">
            <div class="progress-bar-fill" :style="{ width: (exportProgress * 100) + '%' }"></div>
          </div>
        </div>
      </div>

      <div class="side-panel-footer">
        <button v-if="!isExporting" class="material-btn-back" @click="close" title="返回">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
            <path d="M12 16L6 10L12 4" stroke="#333333" stroke-width="2" stroke-linecap="round"
              stroke-linejoin="round" />
          </svg>
          <span>取消</span>
        </button>
        <button v-else class="material-btn-back svga-btn-cancel" @click="$emit('cancel')" title="取消导出">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
            <path d="M5 5L15 15M15 5L5 15" stroke="#ff4444" stroke-width="2" stroke-linecap="round"
              stroke-linejoin="round" />
          </svg>
          <span>取消</span>
        </button>

        <button class="btn-large-secondary" :class="{'svga-btn-converting': isExporting}"
          :disabled="isExporting || disabled" @click="startExport">
          <template v-if="isExporting">
            <span class="svga-progress-text">{{ exportProgress }}%</span>
            <span class="svga-stage-text">{{ exportMessage }}</span>
          </template>
          <template v-else>
            开始转GIF
          </template>
        </button>
      </div>
    </div>
  </script>
  <script type="text/x-template" id="tpl-frames-panel">
    <div class="side-panel side-panel--right svga-panel frames-panel" :class="{'show': visible}">
      <div class="side-panel-container">
        <!-- 标题区 -->
        <div class="side-panel-header">
          <h3 class="side-panel-title">转为序列帧</h3>
          <div class="side-panel-divider"></div>
        </div>

        <!-- 当前文件信息 -->
        <div class="svga-info-section">
          <div class="svga-info-row">当前尺寸：{{ sourceInfo.sizeWH }} 帧率：{{ sourceInfo.fps }}FPS 时长：{{
            (sourceInfo.duration || 0).toFixed(2) }}s</div>
          <div class="svga-compress-hint">注意：序列帧文件会打包为ZIP下载，建议控制尺寸和帧率以减少文件体积。</div>
        </div>

        <!-- 配置区域 -->
        <div class="svga-config-section" :class="{disabled: isExporting}">
          <!-- 尺寸 -->
          <div class="svga-config-item">
            <div class="svga-config-label">尺寸：</div>
            <div class="svga-size-container">
              <div class="input-wrapper input-wrapper--lg svga-size-input-wrapper">
                <input type="number" class="base-input" v-model.number="config.width" @input="onWidthChange"
                  :disabled="isExporting" min="1" max="3000" />
              </div>
              <div class="svga-size-lock">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M4.66667 7.33333V5.33333C4.66667 3.86057 5.86057 2.66667 7.33333 2.66667H8.66667C10.1394 2.66667 11.3333 3.86057 11.3333 5.33333V7.33333M5.33333 7.33333H10.6667C11.403 7.33333 12 7.93029 12 8.66667V12C12 12.7364 11.403 13.3333 10.6667 13.3333H5.33333C4.59695 13.3333 4 12.7364 4 12V8.66667C4 7.93029 4.59695 7.33333 5.33333 7.33333Z"
                    stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </div>
              <div class="input-wrapper input-wrapper--lg svga-size-input-wrapper">
                <input type="number" class="base-input" v-model.number="config.height" @input="onHeightChange"
                  :disabled="isExporting" min="1" max="3000" />
              </div>
            </div>
          </div>

          <!-- 帧率 -->
          <div class="svga-config-item">
            <div class="svga-config-label">帧率：</div>
            <div class="svga-value-container">
              <div class="input-wrapper input-wrapper--lg svga-value-input-wrapper">
                <input type="number" class="base-input" v-model.number="config.fps" @input="onFpsChange"
                  :disabled="isExporting" min="1" max="60" />
              </div>
              <div class="input-unit">FPS</div>
            </div>
          </div>

          <!-- 质量 -->
          <div class="svga-config-item">
            <div class="svga-config-label">PNG压缩质量：</div>
            <div class="svga-value-container">
              <div class="input-wrapper input-wrapper--lg svga-value-input-wrapper">
                <input type="number" class="base-input" v-model.number="config.quality" @input="onQualityChange"
                  :disabled="isExporting" min="10" max="100" />
              </div>
              <div class="input-unit input-unit--hint">10% - 100%</div>
            </div>
          </div>
        </div>

        <!-- 导出进度 -->
        <div class="export-progress" v-if="isExporting">
          <div class="progress-info">
            <span class="progress-status">
              <span class="spinner" v-if="exportStage !== 'done'"></span>
              {{ exportMessage }}
            </span>
            <span class="progress-percent">{{ Math.round(exportProgress * 100) }}%</span>
          </div>
          <div class="progress-bar-bg">
            <div class="progress-bar-fill" :style="{ width: (exportProgress * 100) + '%' }"></div>
          </div>
        </div>

        <!-- 底部按钮 -->
        <div class="side-panel-footer">
          <button v-if="!isExporting" class="material-btn-back" @click="close" title="返回">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
              <path d="M12 16L6 10L12 4" stroke="#333333" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round" />
            </svg>
            <span>取消</span>
          </button>
          <button v-else class="material-btn-back svga-btn-cancel" @click="$emit('cancel')" title="取消导出">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
              <path d="M5 5L15 15M15 5L5 15" stroke="#ff4444" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round" />
            </svg>
            <span>取消</span>
          </button>

          <button class="btn-large-secondary" :class="{'svga-btn-converting': isExporting}"
            :disabled="isExporting || disabled" @click="startExport">
            <template v-if="isExporting">
              <span class="svga-progress-text">{{ exportProgress }}%</span>
              <span class="svga-stage-text">{{ exportMessage }}</span>
            </template>
            <template v-else>
              开始转换
            </template>
          </button>
        </div>
      </div>
    </div>
  </script>
  <script type="text/x-template" id="tpl-webp-panel">
    <div class="side-panel side-panel--right svga-panel webp-panel" :class="{'show': visible}">
      <div class="side-panel-container">
        <!-- 标题区 -->
        <div class="side-panel-header">
          <h3 class="side-panel-title">转为webp</h3>
          <div class="side-panel-divider"></div>
        </div>

        <!-- 当前文件信息 -->
        <div class="svga-info-section">
          <div class="svga-info-row">当前尺寸：{{ sourceInfo.sizeWH }} 帧率：{{ sourceInfo.fps }}FPS 时长：{{
            (sourceInfo.duration || 0).toFixed(2) }}s</div>
          <div class="svga-compress-hint">注意：webp格式支持动画，建议控制尺寸和帧率以减少文件体积。</div>
        </div>

        <!-- 配置区域 -->
        <div class="svga-config-section" :class="{disabled: isExporting}">
          <!-- 尺寸 -->
          <div class="svga-config-item">
            <div class="svga-config-label">尺寸：</div>
            <div class="svga-size-container">
              <div class="input-wrapper input-wrapper--lg svga-size-input-wrapper">
                <input type="number" class="base-input" v-model.number="config.width" @input="onWidthChange"
                  :disabled="isExporting" min="1" max="3000" />
              </div>
              <div class="svga-size-lock">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M4.66667 7.33333V5.33333C4.66667 3.86057 5.86057 2.66667 7.33333 2.66667H8.66667C10.1394 2.66667 11.3333 3.86057 11.3333 5.33333V7.33333M5.33333 7.33333H10.6667C11.403 7.33333 12 7.93029 12 8.66667V12C12 12.7364 11.403 13.3333 10.6667 13.3333H5.33333C4.59695 13.3333 4 12.7364 4 12V8.66667C4 7.93029 4.59695 7.33333 5.33333 7.33333Z"
                    stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </div>
              <div class="input-wrapper input-wrapper--lg svga-size-input-wrapper">
                <input type="number" class="base-input" v-model.number="config.height" @input="onHeightChange"
                  :disabled="isExporting" min="1" max="3000" />
              </div>
            </div>
          </div>

          <!-- 帧率 -->
          <div class="svga-config-item">
            <div class="svga-config-label">帧率：</div>
            <div class="svga-value-container">
              <div class="input-wrapper input-wrapper--lg svga-value-input-wrapper">
                <input type="number" class="base-input" v-model.number="config.fps" @input="onFpsChange"
                  :disabled="isExporting" min="1" max="60" />
              </div>
              <div class="input-unit">FPS</div>
            </div>
          </div>
        </div>

        <!-- 导出进度 -->
        <div class="export-progress" v-if="isExporting">
          <div class="progress-info">
            <span class="progress-status">
              <span class="spinner" v-if="exportStage !== 'done'"></span>
              {{ exportMessage }}
            </span>
            <span class="progress-percent">{{ Math.round(exportProgress * 100) }}%</span>
          </div>
          <div class="progress-bar-bg">
            <div class="progress-bar-fill" :style="{ width: (exportProgress * 100) + '%' }"></div>
          </div>
        </div>

        <!-- 底部按钮 -->
        <div class="side-panel-footer">
          <button v-if="!isExporting" class="material-btn-back" @click="close" title="返回">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
              <path d="M12 16L6 10L12 4" stroke="#333333" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round" />
            </svg>
            <span>取消</span>
          </button>
          <button v-else class="material-btn-back svga-btn-cancel" @click="$emit('cancel')" title="取消导出">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
              <path d="M5 5L15 15M15 5L5 15" stroke="#ff4444" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round" />
            </svg>
            <span>取消</span>
          </button>

          <button class="btn-large-secondary" :class="{'svga-btn-converting': isExporting}"
            :disabled="isExporting || disabled" @click="startExport">
            <template v-if="isExporting">
              <span class="svga-progress-text">{{ exportProgress }}%</span>
              <span class="svga-stage-text">{{ exportMessage }}</span>
            </template>
            <template v-else>
              导出webp
            </template>
          </button>
        </div>
      </div>
    </div>
  </script>

  <!-- 定义dual-channel-panel模板 -->
  <script type="text/x-template" id="tpl-dual-channel-panel">
    <div class="side-panel side-panel--right dual-channel-panel dual-channel-panel-root" :class="{'show': visible}"  style="transition: transform 0.3s ease;">
      <div class="side-panel-container">
        <!-- 标题区 -->
        <div class="side-panel-header">
          <h3 class="side-panel-title">转换为双通道MP4格式</h3>
          <div class="side-panel-divider"></div>
        </div>

        <!-- 信息区 -->
        <div class="mp4-info-section">
          <div class="mp4-info-row">{{ sourceInfo.typeLabel }}尺寸：{{ sourceInfo.sizeWH }} 时长：{{ sourceInfo.duration }}</div>
          <div class="mp4-compress-hint">注意：第一次转换需要加载FFmpeg（25M），请耐心等待<br>压缩质量调越低，文件就越小，画面越糊。</div>
        </div>

        <!-- 配置区域 -->
        <div class="mp4-config-section" :class="{disabled: isConverting}">
          <!-- 遮罩位置 -->
          <div class="mp4-config-item">
            <div class="mp4-config-label">遮罩位置：</div>
            <div class="mp4-select-wrapper" :class="{open: showChannelModeDropdown, disabled: isConverting}"
              @click="!isConverting && toggleChannelModeDropdown()">
              <div class="mp4-select-text">
                {{ config.channelMode === 'color-left-alpha-right' ? '左彩右灰' : '左灰右彩' }}
              </div>
              <div class="mp4-select-icon">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M4 6L8 10L12 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                    stroke-linejoin="round" />
                </svg>
              </div>
              <!-- 下拉菜单 -->
              <div class="mp4-select-dropdown">
                <div class="mp4-select-option" :class="{selected: config.channelMode === 'color-left-alpha-right'}"
                  @click.stop="selectChannelMode('color-left-alpha-right')">
                  左彩右灰（左侧彩色通道，右侧Alpha通道）
                </div>
                <div class="mp4-select-option" :class="{selected: config.channelMode === 'alpha-left-color-right'}"
                  @click.stop="selectChannelMode('alpha-left-color-right')">
                  左灰右彩（左侧Alpha通道，右侧彩色通道）
                </div>
              </div>
            </div>
          </div>

          <!-- 尺寸 -->
          <div class="mp4-config-item">
            <div class="mp4-config-label">尺寸：</div>
            <div class="mp4-size-container">
              <div class="input-wrapper input-wrapper--lg mp4-size-input-wrapper">
                <input type="number" class="base-input" v-model.number="config.width" @input="onWidthChange"
                  :disabled="isConverting" min="0" max="3000" />
              </div>
              <div class="mp4-size-lock">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M4.66667 7.33333V5.33333C4.66667 3.86057 5.86057 2.66667 7.33333 2.66667H8.66667C10.1394 2.66667 11.3333 3.86057 11.3333 5.33333V7.33333M5.33333 7.33333H10.6667C11.403 7.33333 12 7.93029 12 8.66667V12C12 12.7364 11.403 13.3333 10.6667 13.3333H5.33333C4.59695 13.3333 4 12.7364 4 12V8.66667C4 7.93029 4.59695 7.33333 5.33333 7.33333Z"
                    stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </div>
              <div class="input-wrapper input-wrapper--lg mp4-size-input-wrapper">
                <input type="number" class="base-input" v-model.number="config.height" @input="onHeightChange"
                  :disabled="isConverting" min="0" max="3000" />
              </div>
            </div>
          </div>

          <!-- 压缩到质量 -->
          <div class="mp4-config-item">
            <div class="mp4-config-label">压缩到质量：</div>
            <div class="mp4-value-container">
              <div class="input-wrapper input-wrapper--lg mp4-value-input-wrapper">
                <input type="number" class="base-input" v-model.number="config.quality" :disabled="isConverting"
                  min="1" max="100" />
              </div>
              <div class="input-unit">%</div>
            </div>
          </div>

          <!-- 帧率修改 -->
          <div class="mp4-config-item">
            <div class="mp4-config-label">帧率修改：</div>
            <div class="mp4-value-container">
              <div class="input-wrapper input-wrapper--lg mp4-value-input-wrapper">
                <input type="number" class="base-input" v-model.number="config.fps" :disabled="isConverting"
                  min="1" max="120" />
              </div>
              <div class="input-unit">FPS</div>
            </div>
          </div>

          <!-- 静音 -->
          <div class="mp4-config-item">
            <div class="mp4-config-label">静音</div>
            <div class="mp4-mute-toggle" :class="{active: config.muted, disabled: isConverting}"
              @click="!isConverting && (config.muted = !config.muted)">
              <div class="mp4-mute-toggle-handle"></div>
            </div>
          </div>
        </div>

        <!-- 底部按钮 -->
        <div class="side-panel-footer">
          <!-- 返回按钮（转换中变为取消按钮） -->
          <button v-if="!isConverting" class="material-btn-back" @click="close" title="返回">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
              <path d="M12 16L6 10L12 4" stroke="#333333" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round" />
            </svg>
            <span>取消</span>
          </button>
          <button v-else class="material-btn-back mp4-btn-cancel" @click="cancel" title="取消转换">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
              <path d="M5 5L15 15M15 5L5 15" stroke="#ff4444" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round" />
            </svg>
            <span>取消</span>
          </button>

          <!-- 转换按钮 -->
          <button class="btn-large-secondary" :class="{mp4-btn-converting: isConverting}"
            :data-progress="progress" :disabled="disabled" @click="start">
            <template v-if="isConverting">
              <span class="mp4-progress-text">{{ progress }}%</span>
              <span class="mp4-stage-text">{{ message }}</span>
            </template>
            <template v-else>
              开始转换双通道MP4
            </template>
          </button>
        </div>
      </div>
    </div>
  </script>

  <!-- 定义standard-mp4-panel模板 -->
  <script type="text/x-template" id="tpl-standard-mp4-panel">
    <div class="side-panel side-panel--right standard-mp4-panel" :class="{'show': visible}">
      <div class="side-panel-container">
        <div class="side-panel-header">
          <h3 class="side-panel-title">转换为普通MP4格式</h3>
          <div class="side-panel-divider"></div>
        </div>
        <div class="mp4-info-section">
          <div class="mp4-info-row">
            {{ sourceInfo.typeLabel }}尺寸：{{ sourceInfo.sizeWH }} 时长：{{ sourceInfo.duration }}
          </div>
          <div class="mp4-compress-hint">注意：第一次转换需要加载FFmpeg（25M），请耐心等待<br>压缩质量调越低，文件就越小，画面越糊。</div>
        </div>
        <div class="mp4-config-section" :class="{disabled: isConverting}">
          <div class="mp4-config-item">
            <div class="mp4-config-label">尺寸：</div>
            <div class="mp4-size-container">
              <div class="input-wrapper input-wrapper--lg mp4-size-input-wrapper">
                <input type="number" class="base-input" v-model.number="config.width"
                  @input="onWidthChange" :disabled="isConverting" min="1" max="3000" />
              </div>
              <div class="mp4-size-lock">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M4.66667 7.33333V5.33333C4.66667 3.86057 5.86057 2.66667 7.33333 2.66667H8.66667C10.1394 2.66667 11.3333 3.86057 11.3333 5.33333V7.33333M5.33333 7.33333H10.6667C11.403 7.33333 12 7.93029 12 8.66667V12C12 12.7364 11.403 13.3333 10.6667 13.3333H5.33333C4.59695 13.3333 4 12.7364 4 12V8.66667C4 7.93029 4.59695 7.33333 5.33333 7.33333Z"
                    stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </div>
              <div class="input-wrapper input-wrapper--lg mp4-size-input-wrapper">
                <input type="number" class="base-input" v-model.number="config.height"
                  @input="onHeightChange" :disabled="isConverting" min="1" max="3000" />
              </div>
            </div>
          </div>
          <div class="mp4-config-item">
            <div class="mp4-config-label">压缩到质量：</div>
            <div class="mp4-value-container">
              <div class="input-wrapper input-wrapper--lg mp4-value-input-wrapper">
                <input type="number" class="base-input" v-model.number="config.quality"
                  :disabled="isConverting" min="1" max="100" />
              </div>
              <div class="input-unit">%</div>
            </div>
          </div>
          <div class="mp4-config-item">
            <div class="mp4-config-label">帧率修改：</div>
            <div class="mp4-value-container">
              <div class="input-wrapper input-wrapper--lg mp4-value-input-wrapper">
                <input type="number" class="base-input" v-model.number="config.fps"
                  :disabled="isConverting" min="1" max="120" />
              </div>
              <div class="input-unit">FPS</div>
            </div>
          </div>
          <div class="mp4-config-item" v-if="currentModule !== 'lottie'">
            <div class="mp4-config-label">静音</div>
            <div class="mp4-mute-toggle" :class="{active: config.muted, disabled: isConverting}"
              @click="!isConverting && (config.muted = !config.muted)">
              <div class="mp4-mute-toggle-handle"></div>
            </div>
          </div>
        </div>
        <div class="side-panel-footer">
          <button v-if="!isConverting" class="material-btn-back" @click="close" title="返回">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
              <path d="M12 16L6 10L12 4" stroke="#333333" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round" />
            </svg>
            <span>取消</span>
          </button>
          <button v-else class="material-btn-back mp4-btn-cancel" @click="cancel" title="取消转换">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
              <path d="M5 5L15 15M15 5L5 15" stroke="#ff4444" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round" />
            </svg>
            <span>取消</span>
          </button>
          <button class="btn-large-secondary" :class="{mp4-btn-converting: isConverting}"
            :data-progress="progress" :disabled="disabled" @click="start">
            <template v-if="isConverting">
              <span class="mp4-progress-text">{{ progress }}%</span>
              <span class="mp4-stage-text">{{ message }}</span>
            </template>
            <template v-else>开始转换MP4</template>
          </button>
        </div>
      </div>
    </div>
  </script>

  <script type="text/x-template" id="tpl-material-panel">
    <div class="side-panel side-panel--right material-panel" :class="{'show': visible}">
      <div class="side-panel-container">
        <!-- 顶部统计信息 -->
        <div class="material-panel-stats">
          <div class="stats-header">素材图管理</div>
          <div class="stats-divider"></div>
          <div class="stats-content">
            <div class="stats-title">图像资源：{{ list.length }} 个 内存占用：{{ svgaFileInfo.memoryText }}</div>
            <div class="stats-help">你可以替换、下载素材图片，然后导出新的SVGA。<br>替换后的图片将自动缩放填充至原图尺寸，保持比例居中显示。</div>
          </div>
        </div>

        <!-- 搜索框 -->
        <div class="material-search">
          <input type="text" class="material-search-input" placeholder="搜索素材名称..." v-model="searchQuery" />
        </div>

        <!-- 素材列表 -->
        <div class="material-panel-scroll">
          <div v-if="filteredList.length === 0" class="material-empty">
            {{ searchQuery ? '未找到匹配的素材' : '未检测到素材图片' }}
          </div>
          <div v-else class="material-list">
            <div v-for="(item, index) in filteredList" :key="item.imageKey" class="material-item">
              <div class="material-thumb" :style="{ backgroundColor: thumbBgColor }">
                <img :src="replacedImages[item.imageKey] || item.previewUrl" v-if="item.previewUrl" />
              </div>
              <div class="material-info">
                <div class="material-name-row">
                  <div class="material-name" :title="item.imageKey">{{ item.imageKey }}</div>
                  <button class="material-btn-copy" @click="copyName(item.imageKey)" title="复制名称">
                    <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <rect x="4" y="4" width="8" height="8" rx="1" stroke="#666666" stroke-width="1.2" fill="none" />
                      <rect x="2" y="2" width="8" height="8" rx="1" stroke="#666666" stroke-width="1.2"
                        fill="#ffffff" />
                    </svg>
                  </button>
                </div>
                <div class="material-meta">内存占用：{{ item.fileSizeText }}</div>
                <div class="material-meta">尺寸：{{ item.sizeText }}</div>
              </div>
              <div class="material-actions">
                <button class="material-btn-replace" @click="triggerReplace(item)">
                  <span>替换此图</span>
                </button>
                <button class="material-btn-edit" @click="triggerEdit(item)" title="编辑素材图">
                  <div v-if="materialEditStates[item.imageKey]" class="edit-dot"></div>
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M11 4H4C3.44772 4 3 4.44772 3 5V20C3 20.5523 3.44772 21 4 21H19C19.5523 21 20 20.5523 20 20V13"
                      stroke="#333333" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                    <path
                      d="M18.5 2.50001C18.8978 2.10219 19.4374 1.87869 20 1.87869C20.5626 1.87869 21.1022 2.10219 21.5 2.50001C21.8978 2.89784 22.1213 3.4374 22.1213 4.00001C22.1213 4.56262 21.8978 5.10219 21.5 5.50001L12 15L8 16L9 12L18.5 2.50001Z"
                      stroke="#333333" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                  </svg>
                </button>
                <button v-if="item.isReplaced" class="material-btn-close" @click="triggerRestore(item)" title="恢复原图">
                </button>
                <button class="material-btn-new" @click="triggerDownload(item)" title="下载此图片">
                  <svg width="20" height="20" viewBox="0 0 25 25" fill="none">
                    <path d="M12 3V15M12 15L8 11M12 15L16 11" stroke="#333333" stroke-width="1.5" stroke-linecap="round"
                      stroke-linejoin="round" />
                    <path d="M4 17V19C4 20.1046 4.89543 21 6 21H18C19.1046 21 20 20.1046 20 19V17" stroke="#333333"
                      stroke-width="1.5" stroke-linecap="round" />
                  </svg>
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- 底部操作按钮 -->
        <div class="side-panel-footer">
          <button class="material-btn-back" @click="close" title="关闭">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
              <path d="M12 16L6 10L12 4" stroke="#333333" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round" />
            </svg>
            <span>取消</span>
          </button>
          <!-- 压缩并导出SVGA按钮 -->
          <button class="btn-large-secondary" @click="triggerCompress"
            :disabled="isCompressing || list.length === 0">
            <template v-if="isCompressing">压缩中 {{ compressProgress }}%</template>
            <template v-else>
              压缩并导出新SVGA
              <span v-if="hasCompressed" style="color: #4CAF50; margin-left: 4px;">✓</span>
            </template>
          </button>
        </div>
      </div>
    </div>
  </script>

  <!-- 播放控制器模块 -->
  <script src="assets/js/controllers/player-controller.js?v=14"></script>

  <!-- 视图控制器模块 -->
  <script src="assets/js/controllers/viewport-controller.js"></script>

  <!-- 面板管理 Mixin -->
  <script src="assets/js/mixins/panel-mixin.js"></script>

  <!-- 素材编辑器模块（拆分版） -->
  <script src="assets/js/core/material-state.js"></script>
  <script src="assets/js/core/material-operations.js"></script>
  <script src="assets/js/core/material-interactions.js"></script>
  <script src="assets/js/core/material-editor.js"></script>

  <!-- 用户配置管理器模块 -->
  <script src="assets/js/service/config-manager.js"></script>

  <!-- 任务管理器模块 -->
  <script src="assets/js/service/task-manager.js"></script>

  <!-- 应用主逻辑 -->
  <script src="assets/js/core/app.js?v=1.16"></script>


</body></html>