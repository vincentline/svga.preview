# SVGA Preview é¡¹ç›®ä»£ç è§„èŒƒæŒ‡å—

## ğŸ“‹ ä»£ç ç¼©è¿›è§„èŒƒ

### 1. **ç¼©è¿›è§„åˆ™**
- **ç¼©è¿›æ–¹å¼**ï¼šä½¿ç”¨ **2ä¸ªç©ºæ ¼** ç¼©è¿›ï¼ˆç¦æ­¢ä½¿ç”¨ Tabï¼‰
- **ç¼©è¿›ä¸€è‡´æ€§**ï¼šæ•´ä¸ªé¡¹ç›®ä¿æŒç»Ÿä¸€çš„ç¼©è¿›é£æ ¼
- **æ¢è¡Œç¼©è¿›**ï¼šå¤šè¡Œä»£ç æ—¶ï¼Œå»¶ç»­è¡Œç¼©è¿› 2 ä¸ªç©ºæ ¼

### 2. **ç¼©è¿›ç¤ºä¾‹**
```javascript
// âœ… æ­£ç¡®ç¤ºä¾‹
getOngoingTasks: function () {
  var tasks = [];

  // GIFå¯¼å‡ºï¼ˆSVGAå’ŒåŒé€šé“MP4æ¨¡å¼éƒ½æ”¯æŒï¼‰
  if (this.isExportingGIF) {
    tasks.push({
      name: 'GIFå¯¼å‡º',
      key: 'gif-export',
      mode: 'gif'
    });
  }

  // MP4è½¬æ¢
  if (this.isConvertingMP4) {
    tasks.push({
      name: 'MP4è½¬æ¢',
      key: 'mp4-convert',
      mode: 'mp4'
    });
  }

  return tasks;
},

// âŒ é”™è¯¯ç¤ºä¾‹
getOngoingTasks: function () {
    var tasks = [];  // 4ä¸ªç©ºæ ¼ç¼©è¿›
    
if (this.isExportingGIF) {  // æ— ç¼©è¿›
  tasks.push({  // 2ä¸ªç©ºæ ¼ï¼Œä¸ä¸€è‡´
        name: 'GIFå¯¼å‡º'  // 8ä¸ªç©ºæ ¼
  });
}
```

## ğŸ·ï¸ å‘½åè§„èŒƒ

### 1. **å˜é‡å‘½å**
- **é©¼å³°å‘½åæ³•**ï¼š`camelCase`
- **æœ‰æ„ä¹‰çš„åç§°**ï¼šé¿å…å•å­—æ¯å˜é‡ï¼Œé™¤éåœ¨å¾ªç¯ä¸­
- **å¸ƒå°”å€¼å˜é‡**ï¼šä½¿ç”¨ `is`ã€`has`ã€`can`ã€`should` å‰ç¼€

```javascript
// âœ… æ¨è
var currentModule = 'svga';
var isPlaying = false;
var hasFile = true;
var canExport = false;
var shouldContinue = true;

// âŒ é¿å…
var currentmodule = 'svga';  // ç¼ºå°‘å¤§å†™å­—æ¯
var playing = false;         // ä¸å¤Ÿæ˜ç¡®
var fileFlag = true;         // å‰ç¼€ä¸å¤Ÿè¯­ä¹‰åŒ–
```

### 2. **å‡½æ•°å‘½å**
- **åŠ¨è¯å¼€å¤´**ï¼šè¡¨ç¤ºå…·ä½“åŠ¨ä½œ
- **å‘½ä»¤å¼**ï¼š`openXxx`ã€`closeXxx`ã€`handleXxx`ã€`validateXxx`

```javascript
// âœ… æ¨è
openStandardMp4Panel() {}
startStandardMp4Conversion() {}
handleFile() {}
validateFile() {}
extractMaterialList() {}

// âŒ é¿å…
standardMp4Open() {}        // åŠ¨è¯ä½ç½®ä¸å½“
conversionStart() {}        // ç¼ºå°‘åŠ¨è¯å‰ç¼€
```

### 3. **å¸¸é‡å‘½å**
- **å…¨å¤§å†™ + ä¸‹åˆ’çº¿**ï¼šé€‚ç”¨äºé…ç½®é¡¹ã€å¸¸é‡å€¼

```javascript
// âœ… æ¨è
var MAX_FILE_SIZE = 10 * 1024 * 1024;  // 10MB
var DEFAULT_FPS = 30;
var QUALITY_LEVEL_HIGH = 10;
```

### 4. **ç»„ä»¶/æ¨¡å—å‘½å**
- **åè¯å½¢å¼**ï¼šè¡¨ç¤ºå®ä½“æˆ–æ¦‚å¿µ

```javascript
// âœ… æ¨è
var svgaPlayer = {};
var mp4Config = {};
var gifConfig = {};
var fileValidator = {};
```

## ğŸ“¦ æ¨¡å—åŒ–ä¸å‘½åç©ºé—´è§„èŒƒ

### 1. **å…¨å±€å‘½åç©ºé—´**
- **æ ¹å‘½åç©ºé—´**ï¼š`window.SvgaPreview`
- **é¿å…æ±¡æŸ“**ï¼šç¦æ­¢ç›´æ¥åœ¨ `window` ä¸‹æŒ‚è½½å…¨å±€å˜é‡ï¼ˆVueå®ä¾‹é™¤å¤–ï¼‰
- **å±‚çº§ç»“æ„**ï¼š
  - `SvgaPreview.Core` - æ ¸å¿ƒåŸºç¡€è®¾æ–½ï¼ˆåŠ è½½å™¨ã€é…ç½®ç®¡ç†ï¼‰
  - `SvgaPreview.Services` - æ— çŠ¶æ€æœåŠ¡ï¼ˆFFmpeg, SVGAæ„å»ºï¼‰
  - `SvgaPreview.Controllers` - è§†å›¾/é€»è¾‘æ§åˆ¶å™¨ï¼ˆæ’­æ”¾å™¨ã€è¾“å…¥æ§åˆ¶ï¼‰
  - `SvgaPreview.Mixins` - Vue Mixins
  - `SvgaPreview.Exporters` - å¯¼å‡ºå™¨
  - `SvgaPreview.Utils` - å·¥å…·å‡½æ•°

### 2. **IIFE æ¨¡å—å®šä¹‰æ¨¡æ¿**
æ‰€æœ‰ç‹¬ç«‹ JS æ–‡ä»¶å¿…é¡»ä½¿ç”¨ä»¥ä¸‹ IIFE æ¨¡å¼ï¼š

```javascript
(function (global) {
  'use strict';

  // 1. ç¡®ä¿å‘½åç©ºé—´å­˜åœ¨
  global.SvgaPreview = global.SvgaPreview || {};
  global.SvgaPreview.ModuleName = global.SvgaPreview.ModuleName || {};

  // 2. å®šä¹‰æ¨¡å—
  var MyModule = {
    init: function() { ... }
  };

  // 3. æš´éœ²åˆ°æŒ‡å®šå‘½åç©ºé—´
  global.SvgaPreview.ModuleName.MyModule = MyModule;

})(typeof window !== 'undefined' ? window : this);
```

### 3. **æ¨¡å—å¼•ç”¨è§„èŒƒ**
åœ¨ `app.js` æˆ–å…¶ä»–æ¶ˆè´¹ç«¯ï¼Œåº”åœ¨å¤´éƒ¨å»ºç«‹åˆ«åï¼š

```javascript
// âŒ é¿å…æ·±å±‚åµŒå¥—è°ƒç”¨
window.SvgaPreview.Services.FFmpegService.init();

// âœ… æ¨èï¼šå»ºç«‹åˆ«å
var Services = window.SvgaPreview.Services;
Services.FFmpegService.init();
```

## ğŸ“ ä»£ç ç»“æ„è§„èŒƒ

### 1. **å‡½æ•°ç»“æ„**
```javascript
/**
 * å‡½æ•°æè¿° - è¯´æ˜å‡½æ•°çš„ä½œç”¨
 * @param {Type} paramName - å‚æ•°è¯´æ˜
 * @returns {Type} è¿”å›å€¼è¯´æ˜
 */
function functionName(paramName) {
  // 1. å˜é‡å£°æ˜
  var _this = this;
  var localVar = '';
  
  // 2. å‚æ•°éªŒè¯
  if (!paramName) {
    return false;
  }
  
  // 3. ä¸»è¦é€»è¾‘
  try {
    // ä¸»è¦ä¸šåŠ¡é€»è¾‘
  } catch (error) {
    // é”™è¯¯å¤„ç†
  }
  
  // 4. è¿”å›ç»“æœ
  return result;
}
```

### 2. **Vue ç»„ä»¶ç»“æ„**
```javascript
{
  data: function() {
    return {
      // æ•°æ®å±æ€§
    };
  },
  
  computed: {
    // è®¡ç®—å±æ€§
  },
  
  methods: {
    // æ–¹æ³•å®šä¹‰
  },
  
  watch: {
    // ç›‘å¬å™¨
  },
  
  mounted: function() {
    // ç”Ÿå‘½å‘¨æœŸé’©å­
  }
}
```

## ğŸ“ æ³¨é‡Šè§„èŒƒ

### 1. **å‡½æ•°æ³¨é‡Š**
```javascript
/**
 * å¼€å§‹å¯¼å‡ºGIFï¼ˆç»Ÿä¸€å…¥å£ï¼‰
 * åŠŸèƒ½è¯´æ˜ï¼šæè¿°å‡½æ•°çš„ä¸»è¦åŠŸèƒ½
 * 
 * @param {Object} options - é…ç½®é€‰é¡¹
 * @param {Number} options.width - è¾“å‡ºå®½åº¦
 * @param {Number} options.height - è¾“å‡ºé«˜åº¦
 * @returns {Promise} è¿”å›å¯¼å‡ºç»“æœçš„Promise
 */
startGifExport: async function () {
  // å®ç°ä»£ç 
}
```

### 2. **ä»£ç å—æ³¨é‡Š**
```javascript
// ==================== èµ„æºæ¸…ç† ====================
// æ¸…ç©ºè¾“å…¥ï¼Œå…è®¸é‡å¤é€‰æ‹©åŒä¸€æ–‡ä»¶
event.target.value = '';

// ==================== ä¸šåŠ¡é€»è¾‘ ====================
// ä½¿ç”¨ç»Ÿä¸€çš„æ–‡ä»¶å¤„ç†æµç¨‹
this.handleFile(file);
```

### 3. **è¡Œå†…æ³¨é‡Š**
```javascript
var bgColor = _this.currentBgColor;
// ç”¨æˆ·è¦æ±‚ï¼šå¸¦é€æ˜ä¿¡æ¯ï¼Œç„¶ååº•è‰²ç”¨èƒŒæ™¯è‰²å»åˆæˆè§†é¢‘
if (!bgColor || bgColor === 'transparent') {
  bgColor = '#000000'; // é»˜è®¤é»‘è‰²
}
```

## ğŸ¯ ä»£ç ç»„ç»‡è§„èŒƒ

### 1. **æ–‡ä»¶å¤´éƒ¨æ³¨é‡Š**
```javascript
/*
 * ==================== SVGA Preview åº”ç”¨ä¸»æ–‡ä»¶ ====================
 * 
 * æ¨¡å—ç´¢å¼•ï¼ˆæŒ‰ä»£ç ä¸­é¡ºåºæ’åˆ—ï¼‰ï¼š
 * 
 * 1. ã€å…¨å±€çŠ¶æ€ç®¡ç†ã€‘ - data() - æ‰€æœ‰çŠ¶æ€å˜é‡å®šä¹‰
 * 2. ã€æ¨¡å¼åˆ‡æ¢ä¸ä»»åŠ¡ç®¡ç†ã€‘ - ä»»åŠ¡ç®¡ç†å’Œæ¨¡å¼åˆ‡æ¢é€»è¾‘
 * 3. ã€æ–‡ä»¶å¤„ç†ã€‘ - æ–‡ä»¶åŠ è½½å’ŒéªŒè¯ç›¸å…³
 */
```

### 2. **æ¨¡å—åˆ†ç»„**
```javascript
// ã€å…¨å±€çŠ¶æ€ç®¡ç†ã€‘
data: function() {
  return {
    // çŠ¶æ€å˜é‡
  };
},

// ã€æ¨¡å¼åˆ‡æ¢ä¸ä»»åŠ¡ç®¡ç†ã€‘
methods: {
  getOngoingTasks: function() {},
  switchMode: function() {},
  
  // ã€æ–‡ä»¶å¤„ç†ã€‘
  handleFile: function() {},
  validateFile: function() {},
}
```

## ğŸ”§ ç‰¹æ®Šæƒ…å†µå¤„ç†

### 1. **å¼‚æ­¥å‡½æ•°å‘½å**
- ä½¿ç”¨ `async` å…³é”®å­—æ ‡è¯†
- å‡½æ•°åå¯ä»¥åŒ…å« `Async` åç¼€ï¼ˆå¯é€‰ï¼‰

```javascript
startGifExport: async function () {
  // å¼‚æ­¥æ“ä½œ
}

// æˆ–è€…
exportLottieAsync: async function () {
  // å¼‚æ­¥æ“ä½œ
}
```

### 2. **ç§æœ‰æ–¹æ³•å‘½å**
- ä»¥ `_` å¼€å¤´è¡¨ç¤ºå†…éƒ¨ä½¿ç”¨çš„æ–¹æ³•

```javascript
_loadImage: function(src) {
  // å†…éƒ¨ä½¿ç”¨çš„åŠ è½½å›¾ç‰‡æ–¹æ³•
},

_recalculateTotalMemory: function() {
  // å†…éƒ¨ä½¿ç”¨çš„å†…å­˜è®¡ç®—æ–¹æ³•
}
```

## ğŸ“Š æ£€æŸ¥æ¸…å•

- [ ] æ‰€æœ‰ç¼©è¿›ä½¿ç”¨ 2 ä¸ªç©ºæ ¼
- [ ] å˜é‡ä½¿ç”¨é©¼å³°å‘½åæ³•
- [ ] å¸ƒå°”å€¼å˜é‡ä»¥ `is[/](file://f:\ç™¾åº¦äº‘åŒæ­¥ç›˜\BaiduSyncdisk\04ç”Ÿæ´»\å°å·¥å…·\svga.preview.git\svga.preview\AD-CONFIG-README.md)has[/](file://f:\ç™¾åº¦äº‘åŒæ­¥ç›˜\BaiduSyncdisk\04ç”Ÿæ´»\å°å·¥å…·\svga.preview.git\svga.preview\AD-CONFIG-README.md)can` å¼€å¤´
- [ ] å‡½æ•°ä»¥åŠ¨è¯å¼€å¤´
- [ ] é€‚å½“æ·»åŠ æ³¨é‡Šè¯´æ˜
- [ ] ä»£ç å—ä¹‹é—´æœ‰åˆç†ç©ºè¡Œ
- [ ] å‡½æ•°ç»“æ„æ¸…æ™°æœ‰åº
- [ ] Vue ç»„ä»¶ç»“æ„ç¬¦åˆçº¦å®š

éµå¾ªæ­¤è§„èŒƒå°†ä½¿ä»£ç æ›´åŠ æ¸…æ™°ã€æ˜“è¯»ã€æ˜“ç»´æŠ¤ï¼Œå¹¶æœ‰åŠ©äºå›¢é˜Ÿåä½œã€‚