!function(i){"use strict";i.MeeWoo=i.MeeWoo||{},i.MeeWoo.Components=i.MeeWoo.Components||{},i.MeeWoo.Components.DualChannelPanel={name:"DualChannelPanel",template:"#tpl-dual-channel-panel",props:{visible:{type:Boolean,default:!1},sourceInfo:{type:Object,default:function(){return{}}},initialConfig:{type:Object,default:function(){return null}},isConverting:{type:Boolean,default:!1},progress:{type:Number,default:0},message:{type:String,default:""},disabled:{type:Boolean,default:!1}},data:function(){return{config:{channelMode:"color-left-alpha-right",width:300,height:300,fps:30,quality:80,muted:!1},showChannelModeDropdown:!1}},watch:{visible:function(i){if(i){this.initParams();var t=this;this.$nextTick(function(){t.forceShowPanel()})}}},methods:{forceShowPanel:function(){var i=document.querySelector(".dual-channel-panel");i&&(i.style.display="flex",i.style.visibility="visible",i.style.opacity="1",i.style.right="0",i.classList.contains("show")||i.classList.add("show"))},initParams:function(){var i=this.sourceInfo;if(this.initialConfig&&this.initialConfig.width>0){if(this.config.width=this.initialConfig.width,this.initialConfig.height>0){var t=this.initialConfig.height/this.initialConfig.width;this.config.height=Math.floor(this.config.width*t)}else if(i.width&&i.height){t=i.height/i.width;this.config.height=Math.floor(this.config.width*t)}}else i.width&&i.height?(this.config.width=i.width,this.config.height=i.height):(this.config.width=300,this.config.height=300);this.initialConfig&&this.initialConfig.fps?this.config.fps=this.initialConfig.fps:i.fps?this.config.fps=Math.min(60,Math.max(1,i.fps)):this.config.fps=30,this.initialConfig&&(this.config.quality=this.initialConfig.quality||80,this.config.muted=this.initialConfig.muted||!1,this.config.channelMode=this.initialConfig.channelMode||"color-left-alpha-right")},close:function(){if(this.isConverting){if(!confirm("正在转换中，确定要取消吗？"))return;this.$emit("cancel")}this.$emit("close")},onWidthChange:function(){var i=this.sourceInfo;if(i.width&&i.height){var t=i.height/i.width,n=Math.max(1,Math.min(3e3,parseInt(this.config.width)||0)),h=Math.floor(n*t);this.config.width=n,this.config.height=h}},onHeightChange:function(){var i=this.sourceInfo;if(i.width&&i.height){var t=i.width/i.height,n=Math.max(1,Math.min(3e3,parseInt(this.config.height)||0)),h=Math.floor(n*t);this.config.width=h,this.config.height=n}},startConvert:function(){this.$emit("convert",this.config)},start:function(){this.startConvert()},cancel:function(){this.$emit("cancel")},toggleChannelModeDropdown:function(){this.showChannelModeDropdown=!this.showChannelModeDropdown},selectChannelMode:function(i){this.config.channelMode=i,this.showChannelModeDropdown=!1}}}}(window);