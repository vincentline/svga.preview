!function(i){"use strict";i.MeeWoo=i.MeeWoo||{},i.MeeWoo.Components=i.MeeWoo.Components||{},i.MeeWoo.Components.GifPanel={name:"GifPanel",template:"#tpl-gif-panel",props:{visible:{type:Boolean,default:!1},sourceInfo:{type:Object,default:function(){return{}}},initialConfig:{type:Object,default:function(){return null}},bgColorKey:{type:String,default:"transparent"},currentBgColor:{type:String,default:"#ffffff"},isExporting:{type:Boolean,default:!1},exportProgress:{type:Number,default:0},exportStage:{type:String,default:""},exportMessage:{type:String,default:""},disabled:{type:Boolean,default:!1}},data:function(){return{config:{width:300,height:300,fps:30,quality:10,transparent:!1,dither:!1,ditherColor:"#ffffff"}}},watch:{visible:function(i){i&&this.initParams()},config:{handler:function(i){this.$emit("config-change",i)},deep:!0}},methods:{initParams:function(){var i=this.sourceInfo;if(this.initialConfig&&this.initialConfig.width>0){if(this.config.width=this.initialConfig.width,i.width&&i.height){var t=i.height/i.width;this.config.height=Math.floor(this.config.width*t)}}else this.config.width=i.width||300,this.config.height=i.height||300;this.initialConfig&&this.initialConfig.fps?this.config.fps=this.initialConfig.fps:this.config.fps=Math.min(60,Math.max(1,i.fps||30)),this.initialConfig&&(this.initialConfig.quality&&(this.config.quality=this.initialConfig.quality),void 0!==this.initialConfig.transparent&&(this.config.transparent=this.initialConfig.transparent),void 0!==this.initialConfig.dither&&(this.config.dither=this.initialConfig.dither))},close:function(){if(this.isExporting){if(!confirm("正在导出中，确定要取消吗？"))return;this.$emit("cancel")}this.$emit("close")},onWidthChange:function(){var i=this.sourceInfo;if(i.width&&i.height){var t=i.height/i.width,n=Math.max(1,Math.min(1920,parseInt(this.config.width)||0)),e=Math.floor(n*t);this.config.width=n,this.config.height=e}},onHeightChange:function(){var i=this.sourceInfo;if(i.width&&i.height){var t=i.width/i.height,n=Math.max(1,Math.min(1920,parseInt(this.config.height)||0)),e=Math.floor(n*t);this.config.width=e,this.config.height=n}},startExport:function(){this.$emit("export",this.config)}}}}(window);