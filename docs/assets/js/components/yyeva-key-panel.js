window,window.MeeWoo=window.MeeWoo||{},window.MeeWoo.Components=window.MeeWoo.Components||{},window.MeeWoo.Components.YyevaKeyPanel={template:'\n    <div class="side-panel side-panel--right yyeva-key-panel" :class="{\'show\': visible}">\n      <div class="side-panel-container">\n        \x3c!-- 标题区 --\x3e\n        <div class="side-panel-header">\n          <h3 class="side-panel-title">key素材替换</h3>\n          <div class="side-panel-divider"></div>\n        </div>\n\n        \x3c!-- 信息区 --\x3e\n        <div class="yyeva-key-info-section">\n          <div class="yyeva-key-info-row">图片key数量：{{ imageKeyCount }}个</div>\n          <div class="yyeva-key-info-row">文本key数量：{{ textKeyCount }}个</div>\n          <div class="yyeva-key-hint">\n            您可以上传图片或填写文本，替换播放器中的key内容。\n            替换后点击确定按钮保存更改。\n          </div>\n        </div>\n\n        \x3c!-- 搜索区 --\x3e\n        <div class="yyeva-key-search">\n          <input type="text" class="material-search-input" placeholder="搜索key名称..." v-model="searchQuery" />\n        </div>\n\n        \x3c!-- 图片key区 --\x3e\n        <div class="yyeva-key-section" v-if="filteredImageKeys.length > 0">\n          <div class="yyeva-key-section-title">图片key</div>\n          <div class="yyeva-key-list">\n            <div v-for="key in filteredImageKeys" :key="key.effectTag" class="yyeva-key-item">\n              <div class="yyeva-key-thumb" :style="{ backgroundColor: \'#f0f0f0\' }">\n                <img v-if="localReplacedImages[key.effectTag]" :src="localReplacedImages[key.effectTag]" class="yyeva-key-thumb-img" />\n                <div v-else class="yyeva-key-thumb-placeholder">无预览</div>\n              </div>\n              <div class="yyeva-key-info">\n                <div class="yyeva-key-name" :title="key.effectTag">{{ key.effectTag }}</div>\n                <div class="yyeva-key-meta">尺寸：{{ key.effectWidth }} × {{ key.effectHeight }}</div>\n              </div>\n              <div class="yyeva-key-actions">\n                <button class="yyeva-key-btn-replace" @click="triggerImageUpload(key)">\n                  替换此图\n                </button>\n                <button v-if="localReplacedImages[key.effectTag]" class="material-btn-close" @click="restoreImage(key)" title="恢复原图"></button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        \x3c!-- 文本key区 --\x3e\n        <div class="yyeva-key-section" v-if="filteredTextKeys.length > 0">\n          <div class="yyeva-key-section-title">文本key</div>\n          <div class="yyeva-key-list">\n            <div v-for="key in filteredTextKeys" :key="key.effectTag" class="yyeva-key-item">\n              <div class="yyeva-key-info yyeva-key-info-full">\n                <div class="yyeva-key-name" :title="key.effectTag">{{ key.effectTag }}</div>\n                <div class="yyeva-key-text-input">\n                  <input type="text" class="base-input yyeva-key-text-field" \n                    v-model="localReplacedTexts[key.effectTag]" \n                    @input="handleTextInput(key)"\n                    placeholder="输入替换文本..." />\n                  <button v-if="localReplacedTexts[key.effectTag]" class="material-btn-close" @click="restoreText(key)" title="恢复默认"></button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        \x3c!-- 空状态 --\x3e\n        <div v-if="filteredImageKeys.length === 0 && filteredTextKeys.length === 0" class="yyeva-key-empty">\n          未找到key素材\n        </div>\n\n        \x3c!-- 底部按钮 --\x3e\n        <div class="side-panel-footer">\n          <button title="关闭" class="material-btn-back" @click="close">\n            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">\n              <path d="M12 16L6 10L12 4" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>\n            </svg>\n            <span>取消</span>\n          </button>\n          <button class="btn-large-secondary" @click="confirm" title="确定">\n            确定\n          </button>\n        </div>\n      </div>\n    </div>\n  ',props:{visible:{type:Boolean,default:!1},imageKeys:{type:Array,default:function(){return[]}},textKeys:{type:Array,default:function(){return[]}},replacedImages:{type:Object,default:function(){return{}}},replacedTexts:{type:Object,default:function(){return{}}}},data:function(){return{searchQuery:"",localReplacedImages:{},localReplacedTexts:{}}},computed:{imageKeyCount:function(){return this.imageKeys.length},textKeyCount:function(){return this.textKeys.length},filteredImageKeys:function(){if(!this.searchQuery)return this.imageKeys;var e=this.searchQuery.toLowerCase();return this.imageKeys.filter(function(t){return t.effectTag.toLowerCase().includes(e)})},filteredTextKeys:function(){if(!this.searchQuery)return this.textKeys;var e=this.searchQuery.toLowerCase();return this.textKeys.filter(function(t){return t.effectTag.toLowerCase().includes(e)})}},watch:{visible:function(e){e&&(this.searchQuery="",this.localReplacedImages=Object.assign({},this.replacedImages),this.localReplacedTexts=Object.assign({},this.replacedTexts))},replacedImages:function(e){this.localReplacedImages=Object.assign({},e)},replacedTexts:function(e){this.localReplacedTexts=Object.assign({},e)}},methods:{close:function(){this.$emit("close")},confirm:function(){this.$emit("confirm",{replacedImages:this.localReplacedImages,replacedTexts:this.localReplacedTexts})},triggerImageUpload:function(e){var t=document.createElement("input");t.type="file",t.accept="image/*",t.style.display="none",t.onchange=function(n){this.handleImageUpload(e,n),document.body.removeChild(t)}.bind(this),document.body.appendChild(t),t.click()},handleImageUpload:function(e,t){var n=t.target.files[0];if(n){var a=new FileReader;a.onload=function(t){this.localReplacedImages[e.effectTag]=t.target.result,this.$emit("image-replaced",{effectTag:e.effectTag,imageData:t.target.result})}.bind(this),a.readAsDataURL(n)}},restoreImage:function(e){delete this.localReplacedImages[e.effectTag],this.$emit("image-restored",e.effectTag)},restoreText:function(e){delete this.localReplacedTexts[e.effectTag],this.$emit("text-restored",e.effectTag)},handleTextInput:function(e){this.$emit("text-input",{effectTag:e.effectTag,text:this.localReplacedTexts[e.effectTag]})}}},function e(){window.Vue?Vue.component("yyeva-key-panel",window.MeeWoo.Components.YyevaKeyPanel):setTimeout(e,600)}();