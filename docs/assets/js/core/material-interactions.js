!function(e){"use strict";e.MeeWoo=e.MeeWoo||{},e.MeeWoo.Core=e.MeeWoo.Core||{};var t={toggleEditorViewMode:function(e){var t=document.querySelector(".editor-preview-area");if(t&&e.editor.baseImageHeight)if("fit-height"===e.editor.viewMode){if(e.editor.viewMode="one-to-one",e.editor.scale=1,e.stageInstance&&e.baseLayerInstance){var a=e.stageInstance.width(),i=e.stageInstance.height();e.stageInstance.position();e.stageInstance.position({x:0,y:0}),e.stageInstance.scale({x:1,y:1});var s=(a-(c=e.baseLayerInstance.getClientRect()).width)/2-c.x,n=(i-c.height)/2-c.y;e.stageInstance.position({x:s,y:n}),e.stageInstance.draw()}}else{e.editor.viewMode="fit-height";var o,r=t.clientHeight,g=t.clientWidth,d=.75*r/e.editor.baseImageHeight;if((o=e.editor.baseImageWidth*d>g?g/e.editor.baseImageWidth:d)>5&&(o=5),o<.1&&(o=.1),e.editor.scale=parseFloat(o.toFixed(2)),e.stageInstance&&e.baseLayerInstance){a=e.stageInstance.width(),i=e.stageInstance.height(),e.stageInstance.position();e.stageInstance.position({x:0,y:0}),e.stageInstance.scale({x:o,y:o});var c;s=(a-(c=e.baseLayerInstance.getClientRect()).width)/2-c.x,n=(i-c.height)/2-c.y;e.stageInstance.position({x:s,y:n}),e.stageInstance.draw()}}},onEditorFileChange:function(e,t){var a=t.target.files[0];if(a)if(a.type.match("image/jpeg|image/png")){var i=new FileReader;i.onload=function(t){var a=t.target.result;e.editor.baseImage=a;var i=e.materialEditStates[e.editor.targetKey]||{};i.customBaseImage=a,e.materialEditStates[e.editor.targetKey]=i,e.updateRestoreBtnState&&e.updateRestoreBtnState()},i.readAsDataURL(a),t.target.value=""}else e.showToast&&e.showToast("请上传JPG或PNG格式的图片")},triggerEditorUpload:function(e){e.$refs.editorFileInput&&e.$refs.editorFileInput.click()}};e.MeeWoo.Core.MaterialInteractions=t}(window);