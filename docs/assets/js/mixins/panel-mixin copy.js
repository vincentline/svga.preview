!function(e){e.MeeWoo=e.MeeWoo||{},e.MeeWoo.Mixins=e.MeeWoo.Mixins||{},e.MeeWoo.Mixins.PanelMixin={data:function(){return{activeRightPanel:null,dualChannelConfig:{channelMode:"color-left-alpha-right",width:0,height:0,quality:80,fps:30,muted:!1,aspectRatio:1},dualChannelSourceInfo:{name:"",sizeWH:"",duration:"",fileSize:"",fps:30,typeLabel:""},isConvertingToDualChannel:!1,dualChannelProgress:0,dualChannelMessage:"",dualChannelCancelled:!1,toSvgaConfig:{width:0,height:0,quality:80,fps:30,muted:!1,aspectRatio:1},toSvgaSourceInfo:{name:"",sizeWH:"",duration:"",fileSize:"",fps:30,typeLabel:""},isConvertingToSvga:!1,toSvgaProgress:0,toSvgaStage:"",toSvgaMessage:"",toSvgaCancelled:!1}},methods:{closeRightPanel:function(){if("to-svga"===this.activeRightPanel&&this.isConvertingToSvga){if(!confirm("正在转换中，确定要取消吗？"))return;this.cancelToSvgaConversion()}else if("dual-channel"===this.activeRightPanel&&this.isConvertingToDualChannel){if(!confirm("正在转换中，确定要取消吗？"))return;this.cancelDualChannelConversion()}else if("gif"===this.activeRightPanel&&this.isExportingGIF){if(!confirm("正在导出GIF中，确定要取消吗？"))return;this.cancelGifExport()}else if("frames"===this.activeRightPanel&&this.isExportingFrames){if(!confirm("正在导出序列帧中，确定要取消吗？"))return;this.cancelFramesExport()}else if("webp"===this.activeRightPanel&&this.isExportingWebp){if(!confirm("正在导出WebP中，确定要取消吗？"))return;this.cancelWebpExport()}else if(this.showStandardMp4Panel&&this.isConvertingStandardMp4){if(!confirm("正在转换中，确定要取消吗？"))return;this.cancelStandardMp4Conversion()}this.activeRightPanel=null,this.showStandardMp4Panel=!1},closeAllPanels:function(){this.closeRightPanel()},openRightPanel:function(e){console.log("openRightPanel方法被调用，panelName:",e);let i=null,t=!1;if("showStandardMp4Panel"===e)console.log("目标面板是标准MP4面板"),t=!0;else if("gif"===e)console.log("目标面板是GIF面板"),i="gif";else if("frames"===e)console.log("目标面板是Frames面板"),i="frames";else if("webp"===e)console.log("目标面板是WebP面板"),i="webp";else if("to-svga"===e)console.log("目标面板是To SVGA面板"),i="to-svga";else if("dual-channel"===e)console.log("目标面板是双通道MP4面板"),i="dual-channel";else if("material"===e)console.log("目标面板是素材面板"),i="material";else if("showMp4ToSvgaPanel"===e||"showLottieToSvgaPanel"===e||"showFramesToSvgaPanel"===e||"showImagesToSvgaPanel"===e||"showYyevaToSvgaPanel"===e)console.log("目标面板是转SVGA面板"),i="to-svga";else if("showMp4ToDualChannelPanel"===e||"showLottieToDualChannelPanel"===e||"showFramesToDualChannelPanel"===e||"showImagesToDualChannelPanel"===e||"showSvgaToDualChannelPanel"===e)console.log("目标面板是转双通道MP4面板"),i="dual-channel";else if("showGifPanel"===e)console.log("目标面板是GIF面板"),i="gif";else if("showFramesPanel"===e)console.log("目标面板是Frames面板"),i="frames";else{if("showWebpPanel"!==e)return void console.warn("Unknown panel name:",e);console.log("目标面板是WebP面板"),i="webp"}console.log("开始切换面板逻辑，isStandardMp4:",t,"targetPanel:",i),console.log("当前activeRightPanel:",this.activeRightPanel),console.log("当前showStandardMp4Panel:",this.showStandardMp4Panel),t?(console.log("处理标准MP4面板"),this.showStandardMp4Panel?(console.log("当前是标准MP4面板且处于显示状态，关闭它"),this.showStandardMp4Panel=!1,this.activeRightPanel=null):(console.log("当前不是标准MP4面板，关闭其他面板并打开它"),this.activeRightPanel=null,this.showStandardMp4Panel=!0)):(console.log("处理其他面板，目标面板:",i),this.activeRightPanel===i?(console.log("当前就是目标面板且处于显示状态，关闭所有面板"),this.activeRightPanel=null,this.showStandardMp4Panel=!1):(console.log("当前不是目标面板，关闭其他面板并打开它"),this.showStandardMp4Panel=!1,this.activeRightPanel=i)),console.log("切换后activeRightPanel:",this.activeRightPanel),console.log("切换后showStandardMp4Panel:",this.showStandardMp4Panel),console.log("openRightPanel方法执行完毕"),console.log("最终activeRightPanel:",this.activeRightPanel)},openToSvgaPanel:function(){var e={name:"",sizeWH:"",duration:"",fileSize:"",fps:30,typeLabel:""},i={width:0,height:0,quality:80,fps:30,muted:!1,aspectRatio:1};"mp4"===this.currentModule?(e.name=this.mp4.fileInfo.name,e.sizeWH=this.mp4.fileInfo.sizeWH,e.duration=this.mp4.fileInfo.duration,e.fileSize=this.utils.formatBytes(this.mp4.fileInfo.size),e.fps=30,e.typeLabel="MP4",i.width=this.mp4.originalWidth,i.height=this.mp4.originalHeight,i.aspectRatio=this.mp4.originalWidth/this.mp4.originalHeight):"lottie"===this.currentModule?(e.name=this.lottie.fileInfo.name,e.sizeWH=this.lottie.fileInfo.sizeWH,e.duration=this.lottie.fileInfo.duration,e.fileSize=this.utils.formatBytes(this.lottie.fileInfo.size),e.fps=this.lottie.fileInfo.fps||30,e.typeLabel="Lottie",i.width=this.lottie.originalWidth,i.height=this.lottie.originalHeight,i.fps=this.lottie.fileInfo.fps||30,i.aspectRatio=this.lottie.originalWidth/this.lottie.originalHeight):"frames"===this.currentModule?(e.name=this.frames.fileInfo.name,e.sizeWH=this.frames.fileInfo.sizeWH,e.duration=this.frames.fileInfo.duration,e.fileSize=this.utils.formatBytes(this.frames.fileInfo.size),e.fps=this.frames.fileInfo.fps||25,e.typeLabel="序列帧",i.width=this.frames.originalWidth,i.height=this.frames.originalHeight,i.fps=this.frames.fileInfo.fps||25,i.aspectRatio=this.frames.originalWidth/this.frames.originalHeight):"yyeva"===this.currentModule&&(e.name=this.yyeva.fileInfo.name,e.sizeWH=this.yyeva.fileInfo.sizeWH,e.duration=this.yyeva.fileInfo.duration,e.fileSize=this.utils.formatBytes(this.yyeva.fileInfo.size),e.fps=this.yyeva.fileInfo.fps||30,e.typeLabel="双通道MP4",i.width=this.yyeva.displayWidth,i.height=this.yyeva.displayHeight,i.fps=this.yyeva.fileInfo.fps||30,i.aspectRatio=this.yyeva.displayWidth/this.yyeva.displayHeight),this.toSvgaSourceInfo=e,this.toSvgaConfig=i,this.activeRightPanel="to-svga",this.loadLibrary&&this.loadLibrary(["ffmpeg"],!0).then(function(){}).catch(function(e){console.error("ffmpeg加载失败:",e)})},handleToSvgaConvert:function(e){this.toSvgaConfig=e,"mp4"===this.currentModule?this.startMp4ToSvgaConversion(e):"lottie"===this.currentModule?this.startLottieToSvgaConversion(e):"frames"===this.currentModule?this.startFramesToSvgaConversion(e):"yyeva"===this.currentModule&&(this.yyevaToSvgaConfig=Object.assign({},this.yyevaToSvgaConfig,e),this.startSVGAConversion(e))},cancelToSvgaConversion:function(){this.toSvgaCancelled=!0,this.toSvgaMessage="正在取消...",this.mp4ToSvgaCancelled=!0,this.lottieToSvgaCancelled=!0,this.framesToSvgaCancelled=!0,this.svgaConvertCancelled=!0},openDualChannelPanel:function(){console.log("openDualChannelPanel方法被调用");var e={name:"",sizeWH:"",duration:"",fileSize:"",fps:30,typeLabel:""},i={channelMode:"color-left-alpha-right",width:0,height:0,quality:80,fps:30,muted:!1,aspectRatio:1};"svga"===this.currentModule?(e.name=this.svga.fileInfo.name,e.sizeWH=this.svga.fileInfo.sizeWH,e.duration=this.svga.fileInfo.duration,e.fileSize=this.utils.formatBytes(this.svga.fileInfo.size),e.fps=this.svga.fileInfo.fps||30,e.typeLabel="SVGA",i.width=this.svga.originalWidth,i.height=this.svga.originalHeight,i.fps=this.svga.fileInfo.fps||30,i.aspectRatio=this.svga.originalWidth/this.svga.originalHeight):"mp4"===this.currentModule?(e.name=this.mp4.fileInfo.name,e.sizeWH=this.mp4.fileInfo.sizeWH,e.duration=this.mp4.fileInfo.duration,e.fileSize=this.utils.formatBytes(this.mp4.fileInfo.size),e.fps=30,e.typeLabel="MP4",i.width=this.mp4.originalWidth,i.height=this.mp4.originalHeight,i.aspectRatio=this.mp4.originalWidth/this.mp4.originalHeight):"lottie"===this.currentModule?(e.name=this.lottie.fileInfo.name,e.sizeWH=this.lottie.fileInfo.sizeWH,e.duration=this.lottie.fileInfo.duration,e.fileSize=this.utils.formatBytes(this.lottie.fileInfo.size),e.fps=this.lottie.fileInfo.fps||30,e.typeLabel="Lottie",i.width=this.lottie.originalWidth,i.height=this.lottie.originalHeight,i.fps=this.lottie.fileInfo.fps||30,i.aspectRatio=this.lottie.originalWidth/this.lottie.originalHeight,i.muted=!0):"frames"===this.currentModule&&(e.name=this.frames.fileInfo.name,e.sizeWH=this.frames.fileInfo.sizeWH,e.duration=this.frames.fileInfo.duration,e.fileSize=this.utils.formatBytes(this.frames.fileInfo.size),e.fps=this.frames.fileInfo.fps||25,e.typeLabel="序列帧",i.width=this.frames.originalWidth,i.height=this.frames.originalHeight,i.fps=this.frames.fileInfo.fps||25,i.aspectRatio=this.frames.originalWidth/this.frames.originalHeight,i.muted=!0),console.log("设置双通道MP4源信息和配置"),this.dualChannelSourceInfo=e,this.dualChannelConfig=i,console.log("关闭其他面板并打开双通道MP4面板"),this.showStandardMp4Panel=!1,this.activeRightPanel=null;var t=this;Vue.nextTick(function(){console.log("Vue.nextTick执行，设置activeRightPanel为dual-channel"),t.activeRightPanel="dual-channel",console.log("设置后activeRightPanel:",t.activeRightPanel),Vue.nextTick(function(){console.log("再次执行Vue.nextTick，尝试强制显示面板"),t.$forceUpdate&&(console.log("调用$forceUpdate强制更新组件"),t.$forceUpdate())})})},handleDualChannelConvert:function(e){this.dualChannelConfig=e,"svga"===this.currentModule?(this.svgaToDualChannelConfig=Object.assign({},this.svgaToDualChannelConfig,e),this.startMP4Conversion(e)):"mp4"===this.currentModule?(this.mp4ToDualChannelConfig=Object.assign({},this.mp4ToDualChannelConfig,e),this.startMp4ToDualChannelConversion(e)):"lottie"===this.currentModule?(this.lottieToDualChannelConfig=Object.assign({},this.lottieToDualChannelConfig,e),this.startLottieToDualChannelConversion(e)):"frames"===this.currentModule&&(this.imagesToDualChannelConfig=Object.assign({},this.imagesToDualChannelConfig,e),this.startFramesToDualChannelConversion(e))},cancelDualChannelConversion:function(){this.dualChannelCancelled=!0,this.dualChannelMessage="正在取消...",this.mp4ConvertCancelled=!0,this.framesToDualChannelCancelled=!0},openGifPanel:function(){this.activeRightPanel="gif"},openMp4ToSvgaPanel:function(){this.openToSvgaPanel()},openLottieToSvgaPanel:function(){this.openToSvgaPanel()},openFramesToSvgaPanel:function(){this.openToSvgaPanel()},openMp4ToDualChannelPanel:function(){this.openDualChannelPanel()},openLottieToDualChannelPanel:function(){this.openDualChannelPanel()},openFramesToDualChannelPanel:function(){this.openDualChannelPanel()},openSVGAPanel:function(){this.openToSvgaPanel()},openMP4Panel:function(){this.openDualChannelPanel()}}}}(window);