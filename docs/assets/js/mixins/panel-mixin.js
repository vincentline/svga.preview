!function(i){i.MeeWoo=i.MeeWoo||{},i.MeeWoo.Mixins=i.MeeWoo.Mixins||{},i.MeeWoo.Mixins.PanelMixin={data:function(){return{activeRightPanel:null,dualChannelConfig:{channelMode:"color-left-alpha-right",width:0,height:0,quality:80,fps:30,muted:!1,aspectRatio:1},dualChannelSourceInfo:{name:"",sizeWH:"",duration:"",fileSize:"",fps:30,typeLabel:""},isConvertingToDualChannel:!1,dualChannelProgress:0,dualChannelMessage:"",dualChannelCancelled:!1,toSvgaConfig:{width:0,height:0,quality:80,fps:30,muted:!1,aspectRatio:1},toSvgaSourceInfo:{name:"",sizeWH:"",duration:"",fileSize:"",fps:30,typeLabel:""},isConvertingToSvga:!1,toSvgaProgress:0,toSvgaStage:"",toSvgaMessage:"",toSvgaCancelled:!1,showStandardMp4Panel:!1,isExportingGIF:!1,isExportingFrames:!1,isExportingWebp:!1,isConvertingStandardMp4:!1}},methods:{closeRightPanel:function(){if("to-svga"===this.activeRightPanel&&this.isConvertingToSvga){if(!confirm("正在转换中，确定要取消吗？"))return;this.cancelToSvgaConversion()}else if("dual-channel"===this.activeRightPanel&&this.isConvertingToDualChannel){if(!confirm("正在转换中，确定要取消吗？"))return;this.cancelDualChannelConversion()}else if("gif"===this.activeRightPanel&&this.isExportingGIF){if(!confirm("正在导出GIF中，确定要取消吗？"))return;this.cancelGifExport()}else if("frames"===this.activeRightPanel&&this.isExportingFrames){if(!confirm("正在导出序列帧中，确定要取消吗？"))return;this.cancelFramesExport()}else if("webp"===this.activeRightPanel&&this.isExportingWebp){if(!confirm("正在导出WebP中，确定要取消吗？"))return;this.cancelWebpExport()}else if(this.showStandardMp4Panel&&this.isConvertingStandardMp4){if(!confirm("正在转换中，确定要取消吗？"))return;this.cancelStandardMp4Conversion()}this.activeRightPanel=null,this.showStandardMp4Panel=!1},closeAllPanels:function(){this.closeRightPanel()},openRightPanel:function(i){let e=null,t=!1;if("showStandardMp4Panel"===i)t=!0;else if("gif"===i)e="gif";else if("frames"===i)e="frames";else if("webp"===i)e="webp";else if("to-svga"===i)e="to-svga";else if("dual-channel"===i)e="dual-channel";else if("material"===i)e="material";else if("showMp4ToSvgaPanel"===i||"showLottieToSvgaPanel"===i||"showFramesToSvgaPanel"===i||"showImagesToSvgaPanel"===i||"showYyevaToSvgaPanel"===i)e="to-svga";else if("showMp4ToDualChannelPanel"===i||"showLottieToDualChannelPanel"===i||"showFramesToDualChannelPanel"===i||"showImagesToDualChannelPanel"===i||"showSvgaToDualChannelPanel"===i)e="dual-channel";else if("showGifPanel"===i)e="gif";else if("showFramesPanel"===i)e="frames";else{if("showWebpPanel"!==i)return void console.warn("Unknown panel name:",i);e="webp"}t?this.showStandardMp4Panel?(this.showStandardMp4Panel=!1,this.activeRightPanel=null):(this.activeRightPanel=null,this.showStandardMp4Panel=!0):this.activeRightPanel===e?(this.activeRightPanel=null,this.showStandardMp4Panel=!1):(this.showStandardMp4Panel=!1,this.activeRightPanel=e)},openToSvgaPanel:function(){var i={name:"",sizeWH:"",duration:"",fileSize:"",fps:30,typeLabel:""},e={width:0,height:0,quality:80,fps:30,muted:!1,aspectRatio:1};"mp4"===this.currentModule?(i.name=this.mp4.fileInfo.name||"",i.sizeWH=this.mp4.fileInfo.sizeWH||"",i.duration=this.mp4.fileInfo.duration||"",i.fileSize=this.utils?this.utils.formatBytes(this.mp4.fileInfo.size):"",i.fps=30,i.typeLabel="MP4",e.width=this.mp4.originalWidth||300,e.height=this.mp4.originalHeight||300,e.aspectRatio=this.mp4.originalWidth/this.mp4.originalHeight||1):"lottie"===this.currentModule?(i.name=this.lottie.fileInfo.name||"",i.sizeWH=this.lottie.fileInfo.sizeWH||"",i.duration=this.lottie.fileInfo.duration||"",i.fileSize=this.utils?this.utils.formatBytes(this.lottie.fileInfo.size):"",i.fps=this.lottie.fileInfo.fps||30,i.typeLabel="Lottie",e.width=this.lottie.originalWidth||300,e.height=this.lottie.originalHeight||300,e.fps=this.lottie.fileInfo.fps||30,e.aspectRatio=this.lottie.originalWidth/this.lottie.originalHeight||1):"frames"===this.currentModule?(i.name=this.frames.fileInfo.name||"",i.sizeWH=this.frames.fileInfo.sizeWH||"",i.duration=this.frames.fileInfo.duration||"",i.fileSize=this.utils?this.utils.formatBytes(this.frames.fileInfo.size):"",i.fps=this.frames.fileInfo.fps||25,i.typeLabel="序列帧",e.width=this.frames.originalWidth||300,e.height=this.frames.originalHeight||300,e.fps=this.frames.fileInfo.fps||25,e.aspectRatio=this.frames.originalWidth/this.frames.originalHeight||1):"yyeva"===this.currentModule&&(i.name=this.yyeva.fileInfo.name||"",i.sizeWH=this.yyeva.fileInfo.sizeWH||"",i.duration=this.yyeva.fileInfo.duration||"",i.fileSize=this.utils?this.utils.formatBytes(this.yyeva.fileInfo.size):"",i.fps=this.yyeva.fileInfo.fps||30,i.typeLabel="双通道MP4",e.width=this.yyeva.displayWidth||300,e.height=this.yyeva.displayHeight||300,e.fps=this.yyeva.fileInfo.fps||30,e.aspectRatio=this.yyeva.displayWidth/this.yyeva.displayHeight||1),this.toSvgaSourceInfo=i,this.toSvgaConfig=e,this.activeRightPanel="to-svga",this.loadLibrary&&this.loadLibrary(["ffmpeg"],!0).then(function(){}).catch(function(i){console.error("ffmpeg加载失败:",i)})},handleToSvgaConvert:function(i){this.toSvgaConfig=i,"mp4"===this.currentModule?this.startMp4ToSvgaConversion(i):"lottie"===this.currentModule?this.startLottieToSvgaConversion(i):"frames"===this.currentModule?this.startFramesToSvgaConversion(i):"yyeva"===this.currentModule&&(this.yyevaToSvgaConfig=Object.assign({},this.yyevaToSvgaConfig||{},i),this.startSVGAConversion(i))},cancelToSvgaConversion:function(){this.toSvgaCancelled=!0,this.toSvgaMessage="正在取消...",this.mp4ToSvgaCancelled=!0,this.lottieToSvgaCancelled=!0,this.framesToSvgaCancelled=!0,this.svgaConvertCancelled=!0},openDualChannelPanel:function(){if("dual-channel"===this.activeRightPanel){if(this.isConvertingToDualChannel){if(!confirm("正在转换中，确定要取消吗？"))return;this.cancelDualChannelConversion()}return this.activeRightPanel=null,void(this.showStandardMp4Panel=!1)}var i={name:"",sizeWH:"",duration:"",fileSize:"",fps:30,typeLabel:""},e={channelMode:"color-left-alpha-right",width:0,height:0,quality:80,fps:30,muted:!1,aspectRatio:1};if("svga"===this.currentModule){var t=this.svga||{},n=t.fileInfo||{};i.name=n.name||"",i.sizeWH=n.sizeWH||"",i.duration=n.duration||"",i.fileSize=this.utils&&n.size?this.utils.formatBytes(n.size):"",i.fps=n.fps||30,i.typeLabel="SVGA",e.width=t.originalWidth||300,e.height=t.originalHeight||300,e.fps=n.fps||30,e.aspectRatio=t.originalWidth&&t.originalHeight?t.originalWidth/t.originalHeight:1}else if("mp4"===this.currentModule){var a=this.mp4||{};n=a.fileInfo||{};i.name=n.name||"",i.sizeWH=n.sizeWH||"",i.duration=n.duration||"",i.fileSize=this.utils&&n.size?this.utils.formatBytes(n.size):"",i.fps=30,i.typeLabel="MP4",e.width=a.originalWidth||300,e.height=a.originalHeight||300,e.aspectRatio=a.originalWidth&&a.originalHeight?a.originalWidth/a.originalHeight:1}else if("lottie"===this.currentModule){var s=this.lottie||{};n=s.fileInfo||{};i.name=n.name||"",i.sizeWH=n.sizeWH||"",i.duration=n.duration||"",i.fileSize=this.utils&&n.size?this.utils.formatBytes(n.size):"",i.fps=n.fps||30,i.typeLabel="Lottie",e.width=s.originalWidth||300,e.height=s.originalHeight||300,e.fps=n.fps||30,e.aspectRatio=s.originalWidth&&s.originalHeight?s.originalWidth/s.originalHeight:1,e.muted=!0}else if("frames"===this.currentModule){var l=this.frames||{};n=l.fileInfo||{};i.name=n.name||"",i.sizeWH=n.sizeWH||"",i.duration=n.duration||"",i.fileSize=this.utils&&n.size?this.utils.formatBytes(n.size):"",i.fps=n.fps||25,i.typeLabel="序列帧",e.width=l.originalWidth||300,e.height=l.originalHeight||300,e.fps=n.fps||25,e.aspectRatio=l.originalWidth&&l.originalHeight?l.originalWidth/l.originalHeight:1,e.muted=!0}i.name=i.name||"",i.sizeWH=i.sizeWH||"",i.duration=i.duration||"",i.fileSize=i.fileSize||"",i.fps=i.fps||30,i.typeLabel=i.typeLabel||"未知",e.channelMode=e.channelMode||"color-left-alpha-right",e.width=e.width||300,e.height=e.height||300,e.quality=e.quality||80,e.fps=e.fps||30,e.muted=e.muted||!1,e.aspectRatio=e.aspectRatio||1,this.dualChannelSourceInfo=i,this.dualChannelConfig=e,this.showStandardMp4Panel=!1,this.activeRightPanel="dual-channel",this.loadLibrary&&this.loadLibrary(["ffmpeg"],!0).catch(function(i){console.error("ffmpeg加载失败:",i)});var o=this;this.$nextTick(function(){o.$forceUpdate&&o.$forceUpdate()})},handleDualChannelConvert:function(i){this.dualChannelConfig=i,this.isConvertingToDualChannel=!0,this.dualChannelProgress=0,this.dualChannelMessage="准备转换...",this.dualChannelCancelled=!1,"svga"===this.currentModule?(this.svgaToDualChannelConfig=Object.assign({},this.svgaToDualChannelConfig||{},i),this.startMP4Conversion(i)):"mp4"===this.currentModule?(this.mp4ToDualChannelConfig=Object.assign({},this.mp4ToDualChannelConfig||{},i),this.startMp4ToDualChannelConversion(i)):"lottie"===this.currentModule?(this.lottieToDualChannelConfig=Object.assign({},this.lottieToDualChannelConfig||{},i),this.startLottieToDualChannelConversion(i)):"frames"===this.currentModule&&(this.imagesToDualChannelConfig=Object.assign({},this.imagesToDualChannelConfig||{},i),this.startFramesToDualChannelConversion(i))},cancelDualChannelConversion:function(){this.dualChannelCancelled=!0,this.dualChannelMessage="正在取消...",this.isConvertingToDualChannel=!1,this.mp4ConvertCancelled=!0,this.framesToDualChannelCancelled=!0},openGifPanel:function(){this.activeRightPanel="gif"},openMp4ToSvgaPanel:function(){this.openToSvgaPanel()},openLottieToSvgaPanel:function(){this.openToSvgaPanel()},openFramesToSvgaPanel:function(){this.openToSvgaPanel()},openMp4ToDualChannelPanel:function(){this.openDualChannelPanel()},openLottieToDualChannelPanel:function(){this.openDualChannelPanel()},openFramesToDualChannelPanel:function(){this.openDualChannelPanel()},openSVGAPanel:function(){this.openToSvgaPanel()},openMP4Panel:function(){this.openDualChannelPanel()},openSvgaToDualChannelPanel:function(){this.openDualChannelPanel()},openYyevaToSvgaPanel:function(){this.openToSvgaPanel()},openLottieToDualChannelPanel:function(){this.openDualChannelPanel()},openFramesToDualChannelPanel:function(){this.openDualChannelPanel()},openStandardMp4Panel:function(){this.showStandardMp4Panel=!0,this.activeRightPanel=null},closeStandardMp4Panel:function(){this.showStandardMp4Panel=!1},openMaterialPanel:function(){this.activeRightPanel="material"},openFramesPanel:function(){this.activeRightPanel="frames"},openWebpPanel:function(){this.activeRightPanel="webp"},openChromaKeyPanel:function(){this.activeRightPanel="chromakey"}}}}(window);