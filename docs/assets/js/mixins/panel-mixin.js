!function(e){e.MeeWoo=e.MeeWoo||{},e.MeeWoo.Mixins=e.MeeWoo.Mixins||{},e.MeeWoo.Mixins.PanelMixin={data:function(){return{activeRightPanel:null,dualChannelConfig:{channelMode:"color-left-alpha-right",width:0,height:0,quality:80,fps:30,muted:!1,aspectRatio:1},dualChannelSourceInfo:{name:"",sizeWH:"",duration:"",fileSize:"",fps:30,typeLabel:""},isConvertingToDualChannel:!1,dualChannelProgress:0,dualChannelMessage:"",dualChannelCancelled:!1,toSvgaConfig:{width:0,height:0,quality:80,fps:30,muted:!1,aspectRatio:1},toSvgaSourceInfo:{name:"",sizeWH:"",duration:"",fileSize:"",fps:30,typeLabel:""},isConvertingToSvga:!1,toSvgaProgress:0,toSvgaStage:"",toSvgaMessage:"",toSvgaCancelled:!1,showStandardMp4Panel:!1,isExportingGIF:!1,isExportingFrames:!1,isExportingWebp:!1,isConvertingStandardMp4:!1}},methods:{closeRightPanel:function(){if("to-svga"===this.activeRightPanel&&this.isConvertingToSvga){if(!confirm("正在转换中，确定要取消吗？"))return;this.cancelToSvgaConversion()}else if("dual-channel"===this.activeRightPanel&&this.isConvertingToDualChannel){if(!confirm("正在转换中，确定要取消吗？"))return;this.cancelDualChannelConversion()}else if("gif"===this.activeRightPanel&&this.isExportingGIF){if(!confirm("正在导出GIF中，确定要取消吗？"))return;this.cancelGifExport()}else if("frames"===this.activeRightPanel&&this.isExportingFrames){if(!confirm("正在导出序列帧中，确定要取消吗？"))return;this.cancelFramesExport()}else if("webp"===this.activeRightPanel&&this.isExportingWebp){if(!confirm("正在导出WebP中，确定要取消吗？"))return;this.cancelWebpExport()}else if(this.showStandardMp4Panel&&this.isConvertingStandardMp4){if(!confirm("正在转换中，确定要取消吗？"))return;this.cancelStandardMp4Conversion()}this.activeRightPanel=null,this.showStandardMp4Panel=!1},closeAllPanels:function(){this.closeRightPanel()},openRightPanel:function(e){let i=null,t=!1;if("showStandardMp4Panel"===e)t=!0;else if("gif"===e)i="gif";else if("frames"===e)i="frames";else if("webp"===e)i="webp";else if("to-svga"===e)i="to-svga";else if("dual-channel"===e)i="dual-channel";else if("material"===e)i="material";else if("showMp4ToSvgaPanel"===e||"showLottieToSvgaPanel"===e||"showFramesToSvgaPanel"===e||"showImagesToSvgaPanel"===e||"showYyevaToSvgaPanel"===e)i="to-svga";else if("showMp4ToDualChannelPanel"===e||"showLottieToDualChannelPanel"===e||"showFramesToDualChannelPanel"===e||"showImagesToDualChannelPanel"===e||"showSvgaToDualChannelPanel"===e)i="dual-channel";else if("showGifPanel"===e)i="gif";else if("showFramesPanel"===e)i="frames";else{if("showWebpPanel"!==e)return void console.warn("Unknown panel name:",e);i="webp"}t?this.showStandardMp4Panel?(this.showStandardMp4Panel=!1,this.activeRightPanel=null):(this.activeRightPanel=null,this.showStandardMp4Panel=!0):this.activeRightPanel===i?(this.activeRightPanel=null,this.showStandardMp4Panel=!1):(this.showStandardMp4Panel=!1,this.activeRightPanel=i)},openToSvgaPanel:function(){var e={name:"",sizeWH:"",duration:"",fileSize:"",fps:30,typeLabel:""},i={width:0,height:0,quality:80,fps:30,muted:!1,aspectRatio:1};"mp4"===this.currentModule?(e.name=this.mp4.fileInfo.name||"",e.sizeWH=this.mp4.fileInfo.sizeWH||"",e.duration=this.mp4.fileInfo.duration||"",e.fileSize=this.utils?this.utils.formatBytes(this.mp4.fileInfo.size):"",e.fps=30,e.typeLabel="MP4",i.width=this.mp4.originalWidth||300,i.height=this.mp4.originalHeight||300,i.aspectRatio=this.mp4.originalWidth/this.mp4.originalHeight||1):"lottie"===this.currentModule?(e.name=this.lottie.fileInfo.name||"",e.sizeWH=this.lottie.fileInfo.sizeWH||"",e.duration=this.lottie.fileInfo.duration||"",e.fileSize=this.utils?this.utils.formatBytes(this.lottie.fileInfo.size):"",e.fps=this.lottie.fileInfo.fps||30,e.typeLabel="Lottie",i.width=this.lottie.originalWidth||300,i.height=this.lottie.originalHeight||300,i.fps=this.lottie.fileInfo.fps||30,i.aspectRatio=this.lottie.originalWidth/this.lottie.originalHeight||1):"frames"===this.currentModule?(e.name=this.frames.fileInfo.name||"",e.sizeWH=this.frames.fileInfo.sizeWH||"",e.duration=this.frames.fileInfo.duration||"",e.fileSize=this.utils?this.utils.formatBytes(this.frames.fileInfo.size):"",e.fps=this.frames.fileInfo.fps||25,e.typeLabel="序列帧",i.width=this.frames.originalWidth||300,i.height=this.frames.originalHeight||300,i.fps=this.frames.fileInfo.fps||25,i.aspectRatio=this.frames.originalWidth/this.frames.originalHeight||1):"yyeva"===this.currentModule&&(e.name=this.yyeva.fileInfo.name||"",e.sizeWH=this.yyeva.fileInfo.sizeWH||"",e.duration=this.yyeva.fileInfo.duration||"",e.fileSize=this.utils?this.utils.formatBytes(this.yyeva.fileInfo.size):"",e.fps=this.yyeva.fileInfo.fps||30,e.typeLabel="双通道MP4",i.width=this.yyeva.displayWidth||300,i.height=this.yyeva.displayHeight||300,i.fps=this.yyeva.fileInfo.fps||30,i.aspectRatio=this.yyeva.displayWidth/this.yyeva.displayHeight||1),this.toSvgaSourceInfo=e,this.toSvgaConfig=i,this.activeRightPanel="to-svga",this.loadLibrary&&this.loadLibrary(["ffmpeg"],!0).then(function(){}).catch(function(e){console.error("ffmpeg加载失败:",e)})},handleToSvgaConvert:function(e){this.toSvgaConfig=e,"mp4"===this.currentModule?this.startMp4ToSvgaConversion(e):"lottie"===this.currentModule?this.startLottieToSvgaConversion(e):"frames"===this.currentModule?this.startFramesToSvgaConversion(e):"yyeva"===this.currentModule&&(this.yyevaToSvgaConfig=Object.assign({},this.yyevaToSvgaConfig||{},e),this.startSVGAConversion(e))},cancelToSvgaConversion:function(){this.toSvgaCancelled=!0,this.toSvgaMessage="正在取消...",this.mp4ToSvgaCancelled=!0,this.lottieToSvgaCancelled=!0,this.framesToSvgaCancelled=!0,this.svgaConvertCancelled=!0},openDualChannelPanel:function(){console.log("=== 打开双通道MP4面板：开始 ===");var e={name:"",sizeWH:"",duration:"",fileSize:"",fps:30,typeLabel:""},i={channelMode:"color-left-alpha-right",width:0,height:0,quality:80,fps:30,muted:!1,aspectRatio:1};if("svga"===this.currentModule){var t=this.svga||{},n=t.fileInfo||{};e.name=n.name||"",e.sizeWH=n.sizeWH||"",e.duration=n.duration||"",e.fileSize=this.utils&&n.size?this.utils.formatBytes(n.size):"",e.fps=n.fps||30,e.typeLabel="SVGA",i.width=t.originalWidth||300,i.height=t.originalHeight||300,i.fps=n.fps||30,i.aspectRatio=t.originalWidth&&t.originalHeight?t.originalWidth/t.originalHeight:1}else if("mp4"===this.currentModule){var a=this.mp4||{};n=a.fileInfo||{};e.name=n.name||"",e.sizeWH=n.sizeWH||"",e.duration=n.duration||"",e.fileSize=this.utils&&n.size?this.utils.formatBytes(n.size):"",e.fps=30,e.typeLabel="MP4",i.width=a.originalWidth||300,i.height=a.originalHeight||300,i.aspectRatio=a.originalWidth&&a.originalHeight?a.originalWidth/a.originalHeight:1}else if("lottie"===this.currentModule){var l=this.lottie||{};n=l.fileInfo||{};e.name=n.name||"",e.sizeWH=n.sizeWH||"",e.duration=n.duration||"",e.fileSize=this.utils&&n.size?this.utils.formatBytes(n.size):"",e.fps=n.fps||30,e.typeLabel="Lottie",i.width=l.originalWidth||300,i.height=l.originalHeight||300,i.fps=n.fps||30,i.aspectRatio=l.originalWidth&&l.originalHeight?l.originalWidth/l.originalHeight:1,i.muted=!0}else if("frames"===this.currentModule){var o=this.frames||{};n=o.fileInfo||{};e.name=n.name||"",e.sizeWH=n.sizeWH||"",e.duration=n.duration||"",e.fileSize=this.utils&&n.size?this.utils.formatBytes(n.size):"",e.fps=n.fps||25,e.typeLabel="序列帧",i.width=o.originalWidth||300,i.height=o.originalHeight||300,i.fps=n.fps||25,i.aspectRatio=o.originalWidth&&o.originalHeight?o.originalWidth/o.originalHeight:1,i.muted=!0}e.name=e.name||"",e.sizeWH=e.sizeWH||"",e.duration=e.duration||"",e.fileSize=e.fileSize||"",e.fps=e.fps||30,e.typeLabel=e.typeLabel||"未知",i.channelMode=i.channelMode||"color-left-alpha-right",i.width=i.width||300,i.height=i.height||300,i.quality=i.quality||80,i.fps=i.fps||30,i.muted=i.muted||!1,i.aspectRatio=i.aspectRatio||1,console.log("设置双通道MP4源信息和配置:",e,i),this.dualChannelSourceInfo=e,this.dualChannelConfig=i,console.log("关闭其他面板并打开双通道MP4面板"),this.showStandardMp4Panel=!1,console.log("直接设置activeRightPanel为dual-channel，当前值:",this.activeRightPanel),this.activeRightPanel="dual-channel",console.log("设置后activeRightPanel:",this.activeRightPanel),console.log("加载ffmpeg库"),this.loadLibrary&&this.loadLibrary(["ffmpeg"],!0).catch(function(e){console.error("ffmpeg加载失败:",e)});var s=this;console.log("Vue.nextTick执行，强制更新组件"),this.$nextTick(function(){s.$forceUpdate&&(console.log("调用$forceUpdate强制更新组件"),s.$forceUpdate())}),console.log("=== 打开双通道MP4面板：完成 ===")},handleDualChannelConvert:function(e){this.dualChannelConfig=e,this.isConvertingToDualChannel=!0,this.dualChannelProgress=0,this.dualChannelMessage="准备转换...",this.dualChannelCancelled=!1,"svga"===this.currentModule?(this.svgaToDualChannelConfig=Object.assign({},this.svgaToDualChannelConfig||{},e),this.startMP4Conversion(e)):"mp4"===this.currentModule?(this.mp4ToDualChannelConfig=Object.assign({},this.mp4ToDualChannelConfig||{},e),this.startMp4ToDualChannelConversion(e)):"lottie"===this.currentModule?(this.lottieToDualChannelConfig=Object.assign({},this.lottieToDualChannelConfig||{},e),this.startLottieToDualChannelConversion(e)):"frames"===this.currentModule&&(this.imagesToDualChannelConfig=Object.assign({},this.imagesToDualChannelConfig||{},e),this.startFramesToDualChannelConversion(e))},cancelDualChannelConversion:function(){this.dualChannelCancelled=!0,this.dualChannelMessage="正在取消...",this.isConvertingToDualChannel=!1,this.mp4ConvertCancelled=!0,this.framesToDualChannelCancelled=!0},openGifPanel:function(){this.activeRightPanel="gif"},openMp4ToSvgaPanel:function(){this.openToSvgaPanel()},openLottieToSvgaPanel:function(){this.openToSvgaPanel()},openFramesToSvgaPanel:function(){this.openToSvgaPanel()},openMp4ToDualChannelPanel:function(){this.openDualChannelPanel()},openLottieToDualChannelPanel:function(){this.openDualChannelPanel()},openFramesToDualChannelPanel:function(){this.openDualChannelPanel()},openSVGAPanel:function(){this.openToSvgaPanel()},openMP4Panel:function(){this.openDualChannelPanel()},openSvgaToDualChannelPanel:function(){this.openDualChannelPanel()},openYyevaToSvgaPanel:function(){this.openToSvgaPanel()},openLottieToDualChannelPanel:function(){this.openDualChannelPanel()},openFramesToDualChannelPanel:function(){this.openDualChannelPanel()},openStandardMp4Panel:function(){this.showStandardMp4Panel=!0,this.activeRightPanel=null},closeStandardMp4Panel:function(){this.showStandardMp4Panel=!1},openMaterialPanel:function(){this.activeRightPanel="material"},openFramesPanel:function(){this.activeRightPanel="frames"},openWebpPanel:function(){this.activeRightPanel="webp"},openChromaKeyPanel:function(){this.activeRightPanel="chromakey"}}}}(window);