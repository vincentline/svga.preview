!function(i){i.MeeWoo=i.MeeWoo||{},i.MeeWoo.Mixins=i.MeeWoo.Mixins||{},i.MeeWoo.Mixins.PanelMixin={data:function(){return{activeRightPanel:null,dualChannelConfig:{channelMode:"color-left-alpha-right",width:0,height:0,quality:80,fps:30,muted:!1,aspectRatio:1},dualChannelSourceInfo:{name:"",sizeWH:"",duration:"",fileSize:"",fps:30,typeLabel:""},isConvertingToDualChannel:!1,dualChannelProgress:0,dualChannelMessage:"",dualChannelCancelled:!1,toSvgaConfig:{width:0,height:0,quality:80,fps:30,muted:!1,aspectRatio:1},toSvgaSourceInfo:{name:"",sizeWH:"",duration:"",fileSize:"",fps:30,typeLabel:""},isConvertingToSvga:!1,toSvgaProgress:0,toSvgaStage:"",toSvgaMessage:"",toSvgaCancelled:!1}},methods:{closeRightPanel:function(){if("to-svga"===this.activeRightPanel&&this.isConvertingToSvga){if(!confirm("正在转换中，确定要取消吗？"))return;this.cancelToSvgaConversion()}else if("dual-channel"===this.activeRightPanel&&this.isConvertingToDualChannel){if(!confirm("正在转换中，确定要取消吗？"))return;this.cancelDualChannelConversion()}else if("gif"===this.activeRightPanel&&this.isExportingGIF){if(!confirm("正在导出GIF中，确定要取消吗？"))return;this.cancelGifExport()}else if("frames"===this.activeRightPanel&&this.isExportingFrames){if(!confirm("正在导出序列帧中，确定要取消吗？"))return;this.cancelFramesExport()}else if("webp"===this.activeRightPanel&&this.isExportingWebp){if(!confirm("正在导出WebP中，确定要取消吗？"))return;this.cancelWebpExport()}else if(this.showStandardMp4Panel&&this.isConvertingStandardMp4){if(!confirm("正在转换中，确定要取消吗？"))return;this.cancelStandardMp4Conversion()}this.activeRightPanel=null,this.showStandardMp4Panel=!1},closeAllPanels:function(){this.closeRightPanel()},openRightPanel:function(i){let e=null,t=!1;if("showStandardMp4Panel"===i)t=!0;else if("gif"===i)e="gif";else if("frames"===i)e="frames";else if("webp"===i)e="webp";else if("to-svga"===i)e="to-svga";else if("dual-channel"===i)e="dual-channel";else if("material"===i)e="material";else if("showMp4ToSvgaPanel"===i||"showLottieToSvgaPanel"===i||"showFramesToSvgaPanel"===i||"showImagesToSvgaPanel"===i||"showYyevaToSvgaPanel"===i)e="to-svga";else if("showMp4ToDualChannelPanel"===i||"showLottieToDualChannelPanel"===i||"showFramesToDualChannelPanel"===i||"showImagesToDualChannelPanel"===i||"showSvgaToDualChannelPanel"===i)e="dual-channel";else if("showGifPanel"===i)e="gif";else if("showFramesPanel"===i)e="frames";else{if("showWebpPanel"!==i)return void console.warn("Unknown panel name:",i);e="webp"}t?this.showStandardMp4Panel?(this.showStandardMp4Panel=!1,this.activeRightPanel=null):(this.activeRightPanel=null,this.showStandardMp4Panel=!0):this.activeRightPanel===e?(this.activeRightPanel=null,this.showStandardMp4Panel=!1):(this.showStandardMp4Panel=!1,this.activeRightPanel=e)},openToSvgaPanel:function(){var i={name:"",sizeWH:"",duration:"",fileSize:"",fps:30,typeLabel:""},e={width:0,height:0,quality:80,fps:30,muted:!1,aspectRatio:1};"mp4"===this.currentModule?(i.name=this.mp4.fileInfo.name,i.sizeWH=this.mp4.fileInfo.sizeWH,i.duration=this.mp4.fileInfo.duration,i.fileSize=this.utils.formatBytes(this.mp4.fileInfo.size),i.fps=30,i.typeLabel="MP4",e.width=this.mp4.originalWidth,e.height=this.mp4.originalHeight,e.aspectRatio=this.mp4.originalWidth/this.mp4.originalHeight):"lottie"===this.currentModule?(i.name=this.lottie.fileInfo.name,i.sizeWH=this.lottie.fileInfo.sizeWH,i.duration=this.lottie.fileInfo.duration,i.fileSize=this.utils.formatBytes(this.lottie.fileInfo.size),i.fps=this.lottie.fileInfo.fps||30,i.typeLabel="Lottie",e.width=this.lottie.originalWidth,e.height=this.lottie.originalHeight,e.fps=this.lottie.fileInfo.fps||30,e.aspectRatio=this.lottie.originalWidth/this.lottie.originalHeight):"frames"===this.currentModule?(i.name=this.frames.fileInfo.name,i.sizeWH=this.frames.fileInfo.sizeWH,i.duration=this.frames.fileInfo.duration,i.fileSize=this.utils.formatBytes(this.frames.fileInfo.size),i.fps=this.frames.fileInfo.fps||25,i.typeLabel="序列帧",e.width=this.frames.originalWidth,e.height=this.frames.originalHeight,e.fps=this.frames.fileInfo.fps||25,e.aspectRatio=this.frames.originalWidth/this.frames.originalHeight):"yyeva"===this.currentModule&&(i.name=this.yyeva.fileInfo.name,i.sizeWH=this.yyeva.fileInfo.sizeWH,i.duration=this.yyeva.fileInfo.duration,i.fileSize=this.utils.formatBytes(this.yyeva.fileInfo.size),i.fps=this.yyeva.fileInfo.fps||30,i.typeLabel="双通道MP4",e.width=this.yyeva.displayWidth,e.height=this.yyeva.displayHeight,e.fps=this.yyeva.fileInfo.fps||30,e.aspectRatio=this.yyeva.displayWidth/this.yyeva.displayHeight),this.toSvgaSourceInfo=i,this.toSvgaConfig=e,this.activeRightPanel="to-svga",this.loadLibrary&&this.loadLibrary(["ffmpeg"],!0).then(function(){}).catch(function(i){console.error("ffmpeg加载失败:",i)})},handleToSvgaConvert:function(i){this.toSvgaConfig=i,"mp4"===this.currentModule?this.startMp4ToSvgaConversion(i):"lottie"===this.currentModule?this.startLottieToSvgaConversion(i):"frames"===this.currentModule?this.startFramesToSvgaConversion(i):"yyeva"===this.currentModule&&(this.yyevaToSvgaConfig=Object.assign({},this.yyevaToSvgaConfig,i),this.startSVGAConversion(i))},cancelToSvgaConversion:function(){this.toSvgaCancelled=!0,this.toSvgaMessage="正在取消...",this.mp4ToSvgaCancelled=!0,this.lottieToSvgaCancelled=!0,this.framesToSvgaCancelled=!0,this.svgaConvertCancelled=!0},openDualChannelPanel:function(){var i={name:"",sizeWH:"",duration:"",fileSize:"",fps:30,typeLabel:""},e={channelMode:"color-left-alpha-right",width:0,height:0,quality:80,fps:30,muted:!1,aspectRatio:1};"svga"===this.currentModule?(i.name=this.svga.fileInfo.name,i.sizeWH=this.svga.fileInfo.sizeWH,i.duration=this.svga.fileInfo.duration,i.fileSize=this.utils.formatBytes(this.svga.fileInfo.size),i.fps=this.svga.fileInfo.fps||30,i.typeLabel="SVGA",e.width=this.svga.originalWidth,e.height=this.svga.originalHeight,e.fps=this.svga.fileInfo.fps||30,e.aspectRatio=this.svga.originalWidth/this.svga.originalHeight):"mp4"===this.currentModule?(i.name=this.mp4.fileInfo.name,i.sizeWH=this.mp4.fileInfo.sizeWH,i.duration=this.mp4.fileInfo.duration,i.fileSize=this.utils.formatBytes(this.mp4.fileInfo.size),i.fps=30,i.typeLabel="MP4",e.width=this.mp4.originalWidth,e.height=this.mp4.originalHeight,e.aspectRatio=this.mp4.originalWidth/this.mp4.originalHeight):"lottie"===this.currentModule?(i.name=this.lottie.fileInfo.name,i.sizeWH=this.lottie.fileInfo.sizeWH,i.duration=this.lottie.fileInfo.duration,i.fileSize=this.utils.formatBytes(this.lottie.fileInfo.size),i.fps=this.lottie.fileInfo.fps||30,i.typeLabel="Lottie",e.width=this.lottie.originalWidth,e.height=this.lottie.originalHeight,e.fps=this.lottie.fileInfo.fps||30,e.aspectRatio=this.lottie.originalWidth/this.lottie.originalHeight,e.muted=!0):"frames"===this.currentModule&&(i.name=this.frames.fileInfo.name,i.sizeWH=this.frames.fileInfo.sizeWH,i.duration=this.frames.fileInfo.duration,i.fileSize=this.utils.formatBytes(this.frames.fileInfo.size),i.fps=this.frames.fileInfo.fps||25,i.typeLabel="序列帧",e.width=this.frames.originalWidth,e.height=this.frames.originalHeight,e.fps=this.frames.fileInfo.fps||25,e.aspectRatio=this.frames.originalWidth/this.frames.originalHeight,e.muted=!0),this.dualChannelSourceInfo=i,this.dualChannelConfig=e,this.activeRightPanel="dual-channel"},handleDualChannelConvert:function(i){this.dualChannelConfig=i,"svga"===this.currentModule?(this.svgaToDualChannelConfig=Object.assign({},this.svgaToDualChannelConfig,i),this.startMP4Conversion(i)):"mp4"===this.currentModule?(this.mp4ToDualChannelConfig=Object.assign({},this.mp4ToDualChannelConfig,i),this.startMp4ToDualChannelConversion(i)):"lottie"===this.currentModule?(this.lottieToDualChannelConfig=Object.assign({},this.lottieToDualChannelConfig,i),this.startLottieToDualChannelConversion(i)):"frames"===this.currentModule&&(this.imagesToDualChannelConfig=Object.assign({},this.imagesToDualChannelConfig,i),this.startFramesToDualChannelConversion(i))},cancelDualChannelConversion:function(){this.dualChannelCancelled=!0,this.dualChannelMessage="正在取消...",this.mp4ConvertCancelled=!0,this.framesToDualChannelCancelled=!0},openGifPanel:function(){this.activeRightPanel="gif"},openMp4ToSvgaPanel:function(){this.openToSvgaPanel()},openLottieToSvgaPanel:function(){this.openToSvgaPanel()},openFramesToSvgaPanel:function(){this.openToSvgaPanel()},openMp4ToDualChannelPanel:function(){this.openDualChannelPanel()},openLottieToDualChannelPanel:function(){this.openDualChannelPanel()},openFramesToDualChannelPanel:function(){this.openDualChannelPanel()},openSVGAPanel:function(){this.openToSvgaPanel()},openMP4Panel:function(){this.openDualChannelPanel()}}}}(window);