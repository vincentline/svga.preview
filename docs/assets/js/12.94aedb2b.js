(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{425:function(e,t,i){"use strict";var r=TypeError;e.exports=function(e,t){if(e<t)throw new r("Not enough arguments");return e}},439:function(e,t,i){"use strict";var r=i(69),s=i(3),n=i(119),a=i(425),o=URLSearchParams,l=o.prototype,h=s(l.append),c=s(l.delete),u=s(l.forEach),d=s([].push),f=new o("a=1&a=2&b=3");f.delete("a",1),f.delete("b",void 0),f+""!="a=2"&&r(l,"delete",(function(e){var t=arguments.length,i=t<2?void 0:arguments[1];if(t&&void 0===i)return c(this,e);var r=[];u(this,(function(e,t){d(r,{key:t,value:e})})),a(t,1);for(var s,o=n(e),l=n(i),f=0,v=0,p=!1,w=r.length;f<w;)s=r[f++],p||s.key===o?(p=!0,c(this,s.key)):v++;for(;v<w;)(s=r[v++]).key===o&&s.value===l||h(this,s.key,s.value)}),{enumerable:!0,unsafe:!0})},440:function(e,t,i){"use strict";var r=i(69),s=i(3),n=i(119),a=i(425),o=URLSearchParams,l=o.prototype,h=s(l.getAll),c=s(l.has),u=new o("a=1");!u.has("a",2)&&u.has("a",void 0)||r(l,"has",(function(e){var t=arguments.length,i=t<2?void 0:arguments[1];if(t&&void 0===i)return c(this,e);var r=h(this,e);a(t,1);for(var s=n(i),o=0;o<r.length;)if(r[o++]===s)return!0;return!1}),{enumerable:!0,unsafe:!0})},441:function(e,t,i){"use strict";var r=i(6),s=i(3),n=i(193),a=URLSearchParams.prototype,o=s(a.forEach);r&&!("size"in a)&&n(a,"size",{get:function(){var e=0;return o(this,(function(){e++})),e},configurable:!0,enumerable:!0})},452:function(e,t,i){},453:function(e,t,i){},464:function(e,t,i){"use strict";i(465)},465:function(e,t,i){"use strict";var r=i(12),s=i(6),n=i(4),a=i(37),o=i(3),l=i(7),h=i(2),c=i(9),u=i(120),d=i(10),f=i(119),v=i(45),p=i(194),w=i(1),y=i(195),g=i(70),m=n.JSON,b=n.Number,_=n.SyntaxError,k=m&&m.parse,x=a("Object","keys"),S=Object.getOwnPropertyDescriptor,C=o("".charAt),A=o("".slice),z=o(/./.exec),L=o([].push),U=/^\d$/,$=/^[1-9]$/,D=/^[\d-]$/,E=/^[\t\n\r ]$/,O=function(e,t,i,r){var s,n,a,o,h,f=e[t],p=r&&f===r.value,w=p&&"string"==typeof r.source?{source:r.source}:{};if(c(f)){var y=u(f),g=p?r.nodes:y?[]:{};if(y)for(s=g.length,a=v(f),o=0;o<a;o++)P(f,o,O(f,""+o,i,o<s?g[o]:void 0));else for(n=x(f),a=v(n),o=0;o<a;o++)h=n[o],P(f,h,O(f,h,i,d(g,h)?g[h]:void 0))}return l(i,e,t,f,w)},P=function(e,t,i){if(s){var r=S(e,t);if(r&&!r.configurable)return}void 0===i?delete e[t]:p(e,t,i)},R=function(e,t,i,r){this.value=e,this.end=t,this.source=i,this.nodes=r},j=function(e,t){this.source=e,this.index=t};j.prototype={fork:function(e){return new j(this.source,e)},parse:function(){var e=this.source,t=this.skip(E,this.index),i=this.fork(t),r=C(e,t);if(z(D,r))return i.number();switch(r){case"{":return i.object();case"[":return i.array();case'"':return i.string();case"t":return i.keyword(!0);case"f":return i.keyword(!1);case"n":return i.keyword(null)}throw new _('Unexpected character: "'+r+'" at: '+t)},node:function(e,t,i,r,s){return new R(t,r,e?null:A(this.source,i,r),s)},object:function(){for(var e=this.source,t=this.index+1,i=!1,r={},s={};t<e.length;){if(t=this.until(['"',"}"],t),"}"===C(e,t)&&!i){t++;break}var n=this.fork(t).string(),a=n.value;t=n.end,t=this.until([":"],t)+1,t=this.skip(E,t),n=this.fork(t).parse(),p(s,a,n),p(r,a,n.value),t=this.until([",","}"],n.end);var o=C(e,t);if(","===o)i=!0,t++;else if("}"===o){t++;break}}return this.node(1,r,this.index,t,s)},array:function(){for(var e=this.source,t=this.index+1,i=!1,r=[],s=[];t<e.length;){if(t=this.skip(E,t),"]"===C(e,t)&&!i){t++;break}var n=this.fork(t).parse();if(L(s,n),L(r,n.value),t=this.until([",","]"],n.end),","===C(e,t))i=!0,t++;else if("]"===C(e,t)){t++;break}}return this.node(1,r,this.index,t,s)},string:function(){var e=this.index,t=y(this.source,this.index+1);return this.node(0,t.value,e,t.end)},number:function(){var e=this.source,t=this.index,i=t;if("-"===C(e,i)&&i++,"0"===C(e,i))i++;else{if(!z($,C(e,i)))throw new _("Failed to parse number at: "+i);i=this.skip(U,i+1)}if(("."===C(e,i)&&(i=this.skip(U,i+1)),"e"===C(e,i)||"E"===C(e,i))&&(i++,"+"!==C(e,i)&&"-"!==C(e,i)||i++,i===(i=this.skip(U,i))))throw new _("Failed to parse number's exponent value at: "+i);return this.node(0,b(A(e,t,i)),t,i)},keyword:function(e){var t=""+e,i=this.index,r=i+t.length;if(A(this.source,i,r)!==t)throw new _("Failed to parse value at: "+i);return this.node(0,e,i,r)},skip:function(e,t){for(var i=this.source;t<i.length&&z(e,C(i,t));t++);return t},until:function(e,t){t=this.skip(E,t);for(var i=C(this.source,t),r=0;r<e.length;r++)if(e[r]===i)return t;throw new _('Unexpected character: "'+i+'" at: '+t)}};var M=w((function(){var e;return k("9007199254740993",(function(t,i,r){e=r.source})),"9007199254740993"!==e})),F=g&&!w((function(){return 1/k("-0 \t")!=-1/0}));r({target:"JSON",stat:!0,forced:M},{parse:function(e,t){return F&&!h(t)?k(e):function(e,t){e=f(e);var i=new j(e,0,""),r=i.parse(),s=r.value,n=i.skip(E,r.end);if(n<e.length)throw new _('Unexpected extra character: "'+C(e,n)+'" after the parsed data at: '+n);return h(t)?O({"":s},"",t,r):s}(e,t)}})},466:function(e,t,i){"use strict";i(452)},467:function(e,t,i){"use strict";i(453)},476:function(e,t,i){"use strict";i.r(t);i(20),i(118),i(464),i(439),i(440),i(441);function r(e,t,i){t&&i||(t=200,i=200);const r=Math.min(t,1500),s=Math.round(i*(r/t));e.style.width=r+"px",e.style.height=s+"px";const n=e.parentElement;n&&n.classList.contains("viewer-screen")&&(n.style.height=s+"px")}class s{constructor(e,t){this.data="",this.container=t,this.player=null}load(){}init(){}create(){}destroy(){}changeSize(){}}class n extends s{constructor(e,t,i){super(e,t),this.onMeta=i,this.url=null,this.init(e)}load(e){return new Promise(t=>{try{this.url=URL.createObjectURL(e)}catch(e){this.url=null}const i=new FileReader;i.onload=e=>{this.data=e.target.result,t(this.data)},i.readAsArrayBuffer(e)})}init(e){this.load(e).then(()=>{this.create()})}create(){this.player=new SVGA.Player(this.container);const e=new SVGA.Parser,t=this.url||this.data;e.load(t,e=>{this.player.setVideoItem(e);const t=e.videoSize||{},i=e.FPS||e.fps;r(this.container,t.width,t.height),"function"==typeof this.onMeta&&this.onMeta({type:"svga",fps:i,width:t.width,height:t.height}),this.player.startAnimation()})}destroy(){if(this.player&&(this.player.stopAnimation(),Array.from(this.container.children).forEach(e=>e.remove())),this.url){try{URL.revokeObjectURL(this.url)}catch(e){}this.url=null}}changeSize(){this.destroy(),this.create()}}class a extends s{constructor(e,t){super(e,t),this.data={},this.init(e)}load(e){return new Promise((t,i)=>{const r=new FileReader;r.onload=e=>{this.data=JSON.parse(e.target.result),t(this.data)},r.readAsText(e)})}init(e){this.load(e).then(()=>{this.create()})}create(){const e=this.data.w||this.data.width,t=this.data.h||this.data.height;r(this.container,e,t),this.player=lottie.loadAnimation({container:this.container,renderer:"canvas",loop:!0,autoplay:!0,animationData:this.data})}destroy(){this.player&&(this.player.stop(),this.player.destroy())}changeSize(){this.destroy(),this.create()}}var o={name:"Aview",data:()=>({color:"#ffffff",fromShow:!1,viewer:1,$player:null,animationShow:!1,file:{fps:null,width:null,height:null},colors:["#000000","#ffffff","#00ff00","#C0392B","#F1C40D","#00b4ff"]}),mounted(){const e=this.$el.querySelector(".viewer-screen");if(e){const t=e=>{e.preventDefault()},i=e=>{e.preventDefault();const t=e.dataTransfer&&e.dataTransfer.files&&e.dataTransfer.files[0];t&&this.handleBeforeUpload(t)};e.addEventListener("dragover",t),e.addEventListener("drop",i),this._cleanupDragDrop=()=>{e.removeEventListener("dragover",t),e.removeEventListener("drop",i)}}},computed:{fileSize(){return this.file.size?Math.ceil(this.file.size/1024)+"kb":""}},methods:{setColor(e){this.color=e},updateSvgaMeta(e){this.file.fps=e.fps||null,this.file.width=e.width||null,this.file.height=e.height||null},handleBeforeUpload(e){const t=e&&e.name?e.name:"",i=this.$refs.viewer;return console.log("[UPLOAD] receive file:",t,"size=",e&&e.size),this.file.name=e.name,this.$set(this.file,"size",e.size),this.$player&&(this.$player.destroy(),this.animationShow=!1),/\.svga$/i.test(t)&&(console.log("[SVGA] start load"),window.player=this.$player=new n(e,i,e=>{console.log("[SVGA] meta:",e),this.updateSvgaMeta(e)}),this.animationShow=!0),/\.json$/i.test(t)&&(console.log("[LOTTIE] start load"),window.player=this.$player=new a(e,i),this.file.fps=null,this.file.width=null,this.file.height=null,this.animationShow=!0),!1}},beforeDestroy(){this._cleanupDragDrop&&this._cleanupDragDrop()}},l=(i(466),i(467),i(44)),h=Object(l.a)(o,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"a-view"},[t("div",{staticClass:"from"},[t("div",{staticClass:"lable"},[t("span",[e._v("屏幕方向：")]),e._v(" "),t("el-radio",{attrs:{label:1},model:{value:e.viewer,callback:function(t){e.viewer=t},expression:"viewer"}},[e._v("横屏")]),e._v(" "),t("el-radio",{attrs:{label:2},model:{value:e.viewer,callback:function(t){e.viewer=t},expression:"viewer"}},[e._v("竖屏")])],1),e._v(" "),t("div",{staticClass:"lable"},[t("span",[e._v("背景颜色：")]),e._v(" "),t("div",{staticClass:"color-list"},e._l(e.colors,(function(i){return t("button",{key:i,staticClass:"color-btn",class:{active:i===e.color},style:{backgroundColor:i},attrs:{"aria-label":i},on:{click:function(t){return e.setColor(i)}}})})),0)])]),e._v(" "),t("div",{staticClass:"lable"},[t("span",[e._v("文件信息：")]),e._v(" "),t("span",[e._v(e._s(e.file.name))]),e._v("\n          \n        "),t("span",[e._v(e._s(e.fileSize))]),e._v(" "),e.file.fps?t("span",[e._v("  帧率："+e._s(e.file.fps))]):e._e(),e._v(" "),e.file.width&&e.file.height?t("span",[e._v("  尺寸："+e._s(e.file.width)+"*"+e._s(e.file.height))]):e._e()]),e._v(" "),t("div",{class:["viewer-box",{"is-mobile":2===e.viewer}]},[t("div",{staticClass:"viewer-screen",style:{backgroundColor:e.color}},[t("div",{ref:"viewer",staticClass:"viewer",attrs:{id:"demoCanvas"}})]),e._v(" "),!1===e.animationShow?t("el-upload",{staticClass:"viewer-upload",attrs:{drag:"",action:"",multiple:!1,"show-file-list":!1,"before-upload":e.handleBeforeUpload}},[t("i",{staticClass:"el-icon-upload"}),e._v(" "),t("div",{staticClass:"el-upload__text"},[e._v("\n                将文件拖到此处，或"),t("em",[e._v("点击上传")])])]):e._e()],1)])}),[],!1,null,"3dab5a08",null);t.default=h.exports}}]);