!function(e){"use strict";e.MeeWoo=e.MeeWoo||{},e.MeeWoo.Service=e.MeeWoo.Service||{},e.MeeWoo.Service.PanelDrag={init:function(){this.setupDragListeners(),this.setupCloseAnimation()},setupDragListeners:function(){document.querySelectorAll(".side-panel").forEach(e=>{this.setupPanel(e)})},setupCloseAnimation:function(){document.querySelectorAll(".side-panel").forEach(e=>{e.addEventListener("transitionend",t=>{"opacity"===t.propertyName&&e.classList.contains("closing")?(e.classList.add("fly-out"),e.classList.contains("side-panel--left")?e.style.left="-400px":e.style.right="-400px",e.style.top="",e.style.transform="",setTimeout(()=>{e.classList.remove("closing","fly-out"),this.resetPanelPosition(e)},100)):"opacity"===t.propertyName&&this.resetPanelPosition(e)}),e.addEventListener("animationend",t=>{this.resetPanelPosition(e)})})},closePanel:function(e){e&&(e.classList.remove("show"),e.classList.add("closing"))},resetPanelPosition:function(e){e&&(e.style.left="",e.style.right="",e.style.top="",e.style.transform="",e.classList.remove("dragging","closing","fly-out"))},setupPanel:function(e){if(!e)return;if(e._dragInitialized)return;e._dragInitialized=!0,this._setupPanelCloseAnimation(e);let t=e.querySelector(".side-panel-header");if(!t&&e.classList.contains("material-panel")&&(t=e.querySelector(".material-panel-stats")),!t)return;e.classList.add("draggable");let o=!1,n=0,s=0,i=0,a=0,r=null;t.addEventListener("mousedown",t=>{if(0!==t.button)return;t.preventDefault(),o=!0,e.classList.add("dragging"),e.style.opacity="0.9",n=t.clientX,s=t.clientY;const l=e.getBoundingClientRect();i=l.left,a=l.top,r={left:e.style.left,right:e.style.right,top:e.style.top,transition:e.style.transition,opacity:e.style.opacity},document.body&&(document.body.style.overflow="hidden")}),document.addEventListener("mousemove",t=>{if(!o)return;const r=t.clientX-n,l=t.clientY-s,c=i+r,d=a+l;e.style.right="",e.style.left=`${c}px`,e.style.top=`${d}px`,e.style.transition="none"}),document.addEventListener("mouseup",()=>{o&&(o=!1,e.classList.remove("dragging"),e.style.transition="none",e.style.opacity="",document.body&&(document.body.style.overflow=""),e.offsetHeight,e.style.transition="")}),document.addEventListener("mouseleave",()=>{o&&(o=!1,e.classList.remove("dragging"),e.style.transition="none",e.style.opacity="",document.body&&(document.body.style.overflow=""),e.offsetHeight,e.style.transition="")})},_setupPanelCloseAnimation:function(e){e&&(e.addEventListener("transitionend",t=>{"opacity"===t.propertyName&&e.classList.contains("closing")?(e.classList.add("fly-out"),e.classList.contains("side-panel--left")?e.style.left="-400px":e.style.right="-400px",e.style.top="",e.style.transform="",setTimeout(()=>{e.classList.remove("closing","fly-out"),this.resetPanelPosition(e)},100)):"opacity"===t.propertyName&&this.resetPanelPosition(e)}),e.addEventListener("animationend",t=>{this.resetPanelPosition(e)}))}},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{e.MeeWoo&&e.MeeWoo.Service&&e.MeeWoo.Service.PanelDrag&&e.MeeWoo.Service.PanelDrag.init()},100)}):setTimeout(()=>{e.MeeWoo&&e.MeeWoo.Service&&e.MeeWoo.Service.PanelDrag&&e.MeeWoo.Service.PanelDrag.init()},100);const t=new MutationObserver(t=>{try{t.forEach(t=>{t.addedNodes.length>0&&t.addedNodes.forEach(t=>{if(1===t.nodeType){t.classList&&t.classList.contains("side-panel")&&e.MeeWoo&&e.MeeWoo.Service&&e.MeeWoo.Service.PanelDrag&&e.MeeWoo.Service.PanelDrag.setupPanel(t);t.querySelectorAll(".side-panel").forEach(t=>{e.MeeWoo&&e.MeeWoo.Service&&e.MeeWoo.Service.PanelDrag&&e.MeeWoo.Service.PanelDrag.setupPanel(t)})}})})}catch(e){console.error("[PanelDrag] MutationObserver error:",e)}});!function e(){if(document&&document.body)try{t.observe(document.body,{childList:!0,subtree:!0})}catch(e){console.error("[PanelDrag] Observer error:",e)}else document&&document.addEventListener("DOMContentLoaded",e)}()}(window);