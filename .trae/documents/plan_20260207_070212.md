# 统一侧边弹窗模板定义方式实施方案

## 1. 影响分析

### 1.1 转双通道MP4功能影响评估

**结论**：修改模板定义方式不会影响转双通道MP4功能

**分析依据**：
- 模板定义方式仅影响UI渲染，不影响核心功能逻辑
- 转换逻辑在父组件的 `handleDualChannelConvert` 方法中实现
- 组件仅负责接收配置并触发事件
- 两种模板定义方式都是Vue支持的标准方式

### 1.2 可能的风险

**低风险**：
- 模板语法错误：迁移时可能出现HTML语法错误
- 事件绑定问题：确保所有事件处理器正确绑定
- 样式丢失：确保所有CSS类名保持一致

## 2. 实施步骤

### 步骤1：在HTML文件中添加模板

**为dual-channel-panel添加模板**：
- 在 `index.html` 的模板定义区域添加 `tpl-dual-channel-panel` 模板
- 复制现有字符串模板内容，保持结构不变
- 确保所有Vue指令和事件绑定正确

**为standard-mp4-panel添加模板**：
- 在 `index.html` 的模板定义区域添加 `tpl-standard-mp4-panel` 模板
- 复制现有字符串模板内容，保持结构不变
- 确保所有Vue指令和事件绑定正确

### 步骤2：修改组件文件

**修改dual-channel-panel.js**：
- 将 `template: template` 替换为 `template: '#tpl-dual-channel-panel'`
- 删除字符串模板变量 `var template = `...``
- 保持其他组件逻辑不变

**修改standard-mp4-panel.js**：
- 将 `template: template` 替换为 `template: '#tpl-standard-mp4-panel'`
- 删除字符串模板变量 `var template = `...``
- 保持其他组件逻辑不变

### 步骤3：更新文档规范

**更新侧边弹窗开发经验文档**：
- 在「3. 开发流程」中添加模板定义规范
- 在「5. 最佳实践」中添加模板定义最佳实践
- 在「7. 开发检查清单」中添加模板定义检查项

## 3. 技术规范

### 3.1 模板命名规范

- **模板ID**：`tpl-组件名-panel`
- **示例**：`tpl-dual-channel-panel`、`tpl-standard-mp4-panel`

### 3.2 模板结构规范

遵循现有模板结构：

```html
<div class="side-panel side-panel--right [组件名-panel]" :class="{'show': visible}">
  <div class="side-panel-container">
    <!-- 标题区 -->
    <div class="side-panel-header">
      <h3 class="side-panel-title">面板标题</h3>
      <div class="side-panel-divider"></div>
    </div>

    <!-- 信息区 -->
    <div class="[类型]-info-section">
      <div class="[类型]-info-row">信息内容</div>
      <div class="[类型]-compress-hint">提示信息</div>
    </div>

    <!-- 配置区域 -->
    <div class="[类型]-config-section">
      <!-- 配置项 -->
    </div>

    <!-- 底部按钮 -->
    <div class="side-panel-footer">
      <!-- 按钮 -->
    </div>
  </div>
</div>
```

### 3.3 组件引用规范

- **模板引用**：`template: '#tpl-组件名-panel'`
- **props传递**：保持与现有组件一致的props传递方式
- **事件绑定**：保持与现有组件一致的事件绑定方式

## 4. 验证计划

### 验证步骤

1. **功能验证**：
   - 测试转双通道MP4功能
   - 测试普通MP4转换功能
   - 测试所有配置项是否正常工作
   - 测试导出进度显示是否正常

2. **UI验证**：
   - 检查面板布局是否正确
   - 检查样式是否与其他面板一致
   - 检查响应式布局是否正常

3. **兼容性验证**：
   - 测试在不同浏览器中的表现
   - 测试在不同屏幕尺寸下的表现

## 5. 预期效果

1. **一致性**：所有侧边弹窗组件使用相同的模板定义方式
2. **可维护性**：模板结构清晰，易于编辑和调试
3. **规范性**：建立统一的模板定义规范，指导后续开发
4. **兼容性**：保持功能不变，仅修改模板定义方式

## 6. 执行顺序

1. **添加HTML模板** → 2. **修改组件文件** → 3. **更新文档规范** → 4. **验证功能**