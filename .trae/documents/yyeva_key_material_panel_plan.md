# MeeWoo - YYEVA Key素材管理面板实现计划

## [x] 任务1: 在双通道MP4底部浮层添加key素材管理按钮
- **优先级**: P0
- **依赖**: 无
- **描述**:
  - 在双通道MP4底部浮层的"下载文件..."按钮右侧添加"key素材管理"按钮
  - 按钮样式和图标与SVGA底部浮层的"素材图管理"按钮一致
  - 按钮点击事件绑定到打开key素材替换面板的方法
- **成功标准**:
  - 按钮正确显示在"下载文件..."按钮右侧
  - 按钮样式与SVGA的素材图管理按钮一致
  - 按钮点击能触发打开key素材替换面板的方法
- **测试要求**:
  - `programmatic` TR-1.1: 按钮元素存在且位置正确
  - `human-judgement` TR-1.2: 按钮样式与SVGA素材图管理按钮一致

## [x] 任务2: 创建key素材替换右侧弹窗组件
- **优先级**: P0
- **依赖**: 任务1
- **描述**:
  - 创建新的侧边弹窗组件，标题为"key素材替换"
  - 遵循侧边弹窗技术规范文档的结构和样式
  - 包含标题区、信息区、配置区和底部按钮
- **成功标准**:
  - 弹窗组件正确创建并注册
  - 弹窗符合侧边弹窗技术规范
  - 弹窗能正常显示和隐藏
- **测试要求**:
  - `programmatic` TR-2.1: 弹窗组件正确注册
  - `human-judgement` TR-2.2: 弹窗结构和样式符合技术规范

## [x] 任务3: 实现弹窗内容结构
- **优先级**: P0
- **依赖**: 任务2
- **描述**:
  - 标题下面显示图片key数量和文本key数量
  - 添加key的说明文字
  - 添加key名称搜索功能
  - 添加图片key列表，包含预览、名称、尺寸和替换按钮
  - 添加文本key列表，包含输入框和恢复按钮
  - 添加取消和确定按钮
- **成功标准**:
  - 弹窗内容结构完整
  - 各部分显示正确
  - 搜索功能正常工作
- **测试要求**:
  - `programmatic` TR-3.1: 各组件元素存在
  - `human-judgement` TR-3.2: 内容布局合理，样式一致

## [x] 任务4: 实现图片key替换功能
- **优先级**: P1
- **依赖**: 任务3
- **描述**:
  - 实现图片key的替换功能
  - 实现恢复原图功能
  - 处理图片上传和预览
- **成功标准**:
  - 图片key能成功替换
  - 恢复原图功能正常
  - 图片预览正确显示
- **测试要求**:
  - `programmatic` TR-4.1: 图片上传和替换功能正常
  - `human-judgement` TR-4.2: 操作流程流畅，反馈及时

## [x] 任务5: 实现文本key替换功能
- **优先级**: P1
- **依赖**: 任务3
- **描述**:
  - 实现文本key的输入和替换功能
  - 实现恢复默认文本功能
- **成功标准**:
  - 文本key能成功替换
  - 恢复默认文本功能正常
  - 输入后能实时更新
- **测试要求**:
  - `programmatic` TR-5.1: 文本输入和替换功能正常
  - `human-judgement` TR-5.2: 输入体验良好，反馈及时

## [/] 任务6: 集成到主应用
- **优先级**: P0
- **依赖**: 任务4, 任务5
- **描述**:
  - 在app.js中添加key素材管理相关的状态和方法
  - 在index.html中添加组件引用
  - 实现弹窗的显示和隐藏逻辑
- **成功标准**:
  - 弹窗能通过按钮点击打开
  - 弹窗状态与应用状态同步
  - 所有功能正常集成
- **测试要求**:
  - `programmatic` TR-6.1: 弹窗能正常打开和关闭
  - `human-judgement` TR-6.2: 整体集成流畅，无明显bug

## [ ] 任务7: 测试和优化
- **优先级**: P2
- **依赖**: 任务6
- **描述**:
  - 测试所有功能是否正常
  - 优化用户体验
  - 确保样式一致性
- **成功标准**:
  - 所有功能测试通过
  - 用户体验良好
  - 样式与整体应用一致
- **测试要求**:
  - `programmatic` TR-7.1: 所有功能正常工作
  - `human-judgement` TR-7.2: 整体体验流畅，样式一致

## 实现细节

### 技术规范参考
- 遵循 `.trae/documents/侧边弹窗技术规范文档.md`
- 参考 `.trae/documents/侧边弹窗开发经验文档.md`

### 文件结构
1. **组件文件**: `src/assets/js/components/yyeva-key-panel.js`
2. **样式文件**: 复用现有样式，必要时在 `src/assets/css/panel.css` 中添加
3. **集成**: 修改 `src/index.html` 和 `src/assets/js/core/app.js`

### 核心功能
- 显示key数量统计
- 图片key替换和恢复
- 文本key替换和恢复
- 搜索功能
- 与播放器的实时同步

### 预期效果
- 按钮样式与SVGA素材管理按钮一致
- 弹窗符合侧边弹窗技术规范
- 功能完整，用户体验良好
- 与整体应用风格一致