# 项目文件管理规范

## 1. 前言

### 1.1 文档目的

* 规范项目文件组织和命名，确保目录结构清晰合理

* 为AI生成文件和管理文件提供参考标准

* 提高代码可读性和可维护性

* 便于团队协作和后续开发

### 1.2 适用范围

* 本项目所有文件和目录的创建、修改、删除和管理

* AI辅助开发过程中的文件生成和组织

### 1.3 术语定义

* **核心目录**：项目中存放主要功能代码的目录

* **资源文件**：图片、样式、字体等静态资源

* **配置文件**：项目配置、环境配置等文件

* **工具脚本**：辅助开发、构建、部署的脚本文件

## 2. 目录结构规范

### 2.1 核心目录结构

| 目录                           | 职责           | 说明             |
| ---------------------------- | ------------ | -------------- |
| `src/`                       | 源代码目录        | 存放项目主要代码和资源    |
| `src/assets/`                | 静态资源目录       | 存放CSS、JS、图片等资源 |
| `src/assets/js/`             | JavaScript代码 | 存放所有JS文件       |
| `src/assets/js/components/`  | Vue组件        | 存放侧边栏弹窗等Vue组件  |
| `src/assets/js/controllers/` | 控制器          | 存放业务逻辑控制器      |
| `src/assets/js/core/`        | 核心功能         | 存放核心应用逻辑       |
| `src/assets/js/lib/`         | 第三方库         | 存放第三方库文件       |
| `src/assets/js/mixins/`      | Vue混合器       | 存放可复用的Vue混合器   |
| `src/assets/js/service/`     | 服务层          | 存放各种服务实现       |
| `src/assets/js/utils/`       | 工具函数         | 存放通用工具函数       |
| `src/assets/css/`            | 样式文件         | 存放CSS样式文件      |
| `src/assets/img/`            | 图片资源         | 存放图片文件         |
| `src/gadgets/`               | 小工具          | 存放独立的小工具       |
| `.trae/`                     | Trae配置       | 存放Trae相关配置和文档  |
| `ai_protocol_hub/`           | AI协议中心       | 存放AI相关配置和技能    |
| `docs/`                      | 文档目录         | 存放项目文档         |

### 2.2 目录组织原则

1. **功能模块化**：按业务功能划分目录，每个模块职责清晰
2. **层次分明**：目录层次不宜过深，一般不超过4层
3. **命名规范**：目录名使用小写字母，单词间用连字符(`-`)分隔
4. **结构稳定**：核心目录结构应保持稳定，避免频繁变更

## 3. 文件命名规范

### 3.1 通用命名规则

1. **文件名长度**：文件名应简洁明了，一般不超过30个字符
2. **字符使用**：使用小写字母、数字、连字符(`-`)和下划线(`_`)
3. **扩展名**：使用标准文件扩展名，如`.js`、`.css`、`.png`等
4. **避免使用**：避免使用特殊字符、空格和中文文件名

### 3.2 不同类型文件命名

| 文件类型         | 命名规则             | 示例                          |
| ------------ | ---------------- | --------------------------- |
| JavaScript文件 | kebab-case.js    | `panel-mixin.js`            |
| Vue组件        | kebab-case.js    | `to-svga-panel.js`          |
| CSS文件        | kebab-case.css   | `panel.css`                 |
| 配置文件         | snake\_case.json | `site-config.json`          |
| 工具脚本         | snake\_case.py   | `publish-gh-pages-final.py` |
| 图片文件         | kebab-case.png   | `btn-keyframe.png`          |
| 文档文件         | 中文或kebab-case.md | `项目文件管理规范.md`               |

### 3.3 特殊文件命名

* **入口文件**：使用`index.html`、`index.js`等标准命名

* **配置文件**：使用`config`、`settings`等关键词

* **测试文件**：使用`test-`前缀或`-test`后缀

* **文档文件**：使用描述性中文或英文命名

## 4. 代码组织规范

### 4.1 代码结构

1. **模块化**：按功能划分为不同模块，每个模块职责单一
2. **依赖管理**：明确模块间依赖关系，避免循环依赖
3. **代码风格**：遵循项目已有的代码风格，保持一致性

### 4.2 文件组织

1. **单一职责**：每个文件应只包含一个主要功能或组件
2. **文件大小**：单个文件代码量不宜过大，一般不超过1000行
3. **代码分层**：按业务逻辑分层，如控制器层、服务层、工具层等

### 4.3 第三方库管理

1. **库文件位置**：第三方库应存放在`src/assets/js/lib/`目录
2. **版本管理**：明确记录第三方库版本，避免版本冲突
3. **按需引入**：根据需要引入第三方库，避免不必要的依赖

## 5. 文件操作规范

### 5.1 文件新增

1. **目录选择**：根据文件类型和功能选择合适的目录
2. **命名检查**：确保文件名符合命名规范
3. **索引更新**：在`INDEX.md`中添加文件索引
4. **日志记录**：在`UPDATE_LOG.md`中记录文件创建信息

### 5.2 文件修改

1. **影响评估**：修改前评估对其他文件的影响
2. **代码审查**：确保修改符合代码规范和业务逻辑
3. **日志记录**：在`UPDATE_LOG.md`中记录修改内容和原因

### 5.3 文件删除

1. **依赖检查**：删除前确认无其他文件依赖
2. **索引更新**：从`INDEX.md`中移除文件索引
3. **日志记录**：在`UPDATE_LOG.md`中记录文件删除信息

### 5.4 文件移动/重命名

1. **影响评估**：评估移动/重命名对其他文件的影响
2. **路径更新**：更新所有引用该文件的路径
3. **索引更新**：更新`INDEX.md`中的文件索引
4. **日志记录**：在`UPDATE_LOG.md`中记录移动/重命名信息

## 6. 版本控制规范

### 6.1 分支管理

1. **分支命名**：使用`feature/功能名称`、`bugfix/问题描述`等格式
2. **分支用途**：不同分支对应不同开发阶段和任务
3. **分支合并**：合并前进行代码审查，确保代码质量

### 6.2 提交规范

1. **提交信息**：使用`[类型] 简短描述`格式，如`[FEATURE] 添加FFmpeg批量提取帧功能`
2. **提交频率**：频繁提交小的变更，避免一次性提交大量代码
3. **提交内容**：每个提交应只包含相关的变更，避免混合不同功能的修改

### 6.3 忽略文件

1. **配置文件**：在`.gitignore`中配置需要忽略的文件和目录
2. **忽略内容**：临时文件、构建产物、依赖目录等应被忽略

## 7. 文档管理规范

### 7.1 技术文档

1. **文档位置**：技术文档应存放在`.trae/documents/`目录
2. **文档命名**：使用描述性中文命名，如`双通道MP4转SVGA性能优化方案报告.md`
3. **文档更新**：技术方案变更时应及时更新相关文档

### 7.2 使用文档

1. **文档位置**：使用文档应存放在`docs/`目录
2. **文档格式**：使用Markdown格式，便于阅读和维护
3. **文档内容**：包含安装指南、使用说明、常见问题等

### 7.3 更新日志

1. **日志文件**：使用`UPDATE_LOG.md`记录所有文件变更
2. **日志格式**：按时间顺序记录变更内容，包含变更类型、文件路径和变更描述
3. **日志更新**：文件操作后应及时更新更新日志

## 8. 工具和脚本规范

### 8.1 构建工具

1. **脚本位置**：构建脚本应存放在项目根目录
2. **脚本命名**：使用`snake_case.py`格式，如`publish-gh-pages-final.py`
3. **脚本功能**：脚本应功能单一，注释清晰

### 8.2 开发工具

1. **配置文件**：IDE配置文件应合理管理，避免提交不必要的配置
2. **工具推荐**：推荐使用VS Code等现代IDE，提高开发效率

### 8.3 辅助脚本

1. **脚本位置**：辅助脚本可存放在`ai_protocol_hub/scripts/`目录
2. **脚本用途**：用于自动化任务、数据处理等辅助功能

## 9. 规范执行

### 9.1 执行原则

1. **一致性**：所有文件和目录应遵循本规范
2. **合理性**：在遵循规范的前提下，可根据实际情况进行合理调整
3. **可追溯性**：所有文件变更应可通过更新日志追溯

### 9.2 检查机制

1. **定期检查**：定期检查项目文件结构和命名是否符合规范
2. **代码审查**：代码审查时应检查文件组织和命名是否符合规范
3. **AI辅助**：AI生成文件时应参考本规范，确保符合要求

### 9.3 违规处理

1. **轻微违规**：提醒相关人员进行修正
2. **严重违规**：要求停止当前工作，修正后再继续
3. **重复违规**：建立违规记录，纳入绩效考核

## 10. 附则

### 10.1 规范更新

* 本规范应根据项目发展和技术进步及时更新

* 规范更新应经过团队讨论和审批

### 10.2 解释权

* 本规范的最终解释权归项目团队所有

### 10.3 生效日期

* 本规范自发布之日起生效

***

## 附录：项目目录结构示例

```
项目根目录/
├── .trae/             # Trae配置和文档
│   ├── documents/     # 技术文档
│   └── rules/         # 项目规则
├── ai_protocol_hub/   # AI协议中心
│   ├── core_rules/    # 核心规则
│   ├── scripts/       # 辅助脚本
│   └── skill_specs/   # 技能规范
├── src/               # 源代码目录
│   ├── assets/        # 静态资源
│   │   ├── css/       # 样式文件
│   │   ├── js/        # JavaScript代码
│   │   │   ├── components/    # Vue组件
│   │   │   ├── controllers/   # 控制器
│   │   │   ├── core/          # 核心功能
│   │   │   ├── lib/           # 第三方库
│   │   │   ├── mixins/        # Vue混合器
│   │   │   ├── service/       # 服务层
│   │   │   └── utils/         # 工具函数
│   │   └── img/       # 图片资源
│   └── gadgets/       # 小工具
├── docs/              # 文档目录
├── INDEX.md           # 文件索引
├── README.md          # 项目说明
├── UPDATE_LOG.md      # 更新日志
└── 其他配置和脚本文件
```

