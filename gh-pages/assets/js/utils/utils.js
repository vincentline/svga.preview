!function(e){"use strict";e.MeeWoo=e.MeeWoo||{};var t={formatBytes:function(e){if(!e&&0!==e)return"";var t=e/1024;return t<1024?t.toFixed(2)+" KB":(t/1024).toFixed(4)+" MB"},loadImageFromFile:function(e,t){return new Promise(function(r,n){var o=URL.createObjectURL(e);t&&Array.isArray(t)&&t.push(o);var a=new Image;a.onload=function(){r(a)},a.onerror=function(){URL.revokeObjectURL(o),n(new Error("图片加载失败"))},a.src=o})},revokeObjectURLs:function(e){if(e&&Array.isArray(e))for(var t=0;t<e.length;t++)e[t]&&URL.revokeObjectURL(e[t])},extractNumberFromString:function(e){if(!e)return null;var t=e.match(/\d+/);return t?parseInt(t[0],10):null},padZero:function(e,t){for(var r=e.toString();r.length<t;)r="0"+r;return r},copyToClipboard:function(e){return new Promise(function(t,r){if(navigator.clipboard&&navigator.clipboard.writeText)navigator.clipboard.writeText(e).then(t).catch(r);else{var n=document.createElement("textarea");n.value=e,n.style.position="fixed",n.style.opacity="0",document.body.appendChild(n),n.select();try{var o=document.execCommand("copy");document.body.removeChild(n),o?t():r(new Error("复制失败"))}catch(e){document.body.removeChild(n),r(e)}}})},deepClone:function(e){if(null===e||"object"!=typeof e)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array){for(var r=[],n=0;n<e.length;n++)r[n]=t.deepClone(e[n]);return r}if(e instanceof Object){var o={};for(var a in e)e.hasOwnProperty(a)&&(o[a]=t.deepClone(e[a]));return o}throw new Error("Unable to copy obj! Its type isn't supported.")},sortFilesByName:function(e){return e.slice().sort(function(e,r){var n=t.extractNumberFromString(e.name)||0,o=t.extractNumberFromString(r.name)||0;return n!==o?n-o:e.name.localeCompare(r.name)})},formatDuration:function(e,r){if(!e&&0!==e)return"00:00";var n=Math.floor(e/3600),o=Math.floor(e%3600/60),a=Math.floor(e%60);return r||n>0?t.padZero(n,2)+":"+t.padZero(o,2)+":"+t.padZero(a,2):t.padZero(o,2)+":"+t.padZero(a,2)},getCurrentTimestamp:function(){return Date.now()},rgbToHex:function(e,t,r){var n=function(e){var t=e.toString(16).toUpperCase();return 1===t.length?"0"+t:t};return"#"+n(e)+n(t)+n(r)},hexToRgb:function(e){return 3===(e=e.replace(/^#/,"")).length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),6!==e.length?null:{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16)}},downloadFile:function(e,t){var r=URL.createObjectURL(e),n=document.createElement("a");n.href=r,n.download=t,n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n),setTimeout(function(){URL.revokeObjectURL(r)},100)},downloadFromDataURL:function(e,t){var r=document.createElement("a");r.href=e,r.download=t,r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)},debounce:function(e,t){var r;return function(){var n=this,o=arguments;clearTimeout(r),r=setTimeout(function(){e.apply(n,o)},t)}},throttle:function(e,t){var r,n,o,a=null,i=0,c=function(){i=Date.now(),a=null,o=e.apply(r,n),a||(r=n=null)};return function(){var u=Date.now(),l=t-(u-i);return r=this,n=arguments,l<=0||l>t?(a&&(clearTimeout(a),a=null),i=u,o=e.apply(r,n),a||(r=n=null)):a||(a=setTimeout(c,l)),o}},isMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},generateId:function(e){e=e||8;for(var t="abcdefghijklmnopqrstuvwxyz0123456789",r="",n=0;n<e;n++)r+=t.charAt(Math.floor(36*Math.random()));return r},showToast:function(e,t){t=t||3e3;var r=document.querySelector(".toast-container");if(!r){(r=document.createElement("div")).className="toast-container";var n=document.createElement("div");n.className="toast-message",r.appendChild(n),document.body.appendChild(r)}var o=r.querySelector(".toast-message");o&&(o.textContent=e),r.hideTimer&&clearTimeout(r.hideTimer),requestAnimationFrame(function(){r.classList.add("visible")}),r.hideTimer=setTimeout(function(){r.classList.remove("visible")},t)}};e.MeeWoo.Utils=t}(window);