import{defaultOptions}from"./meta.js";async function initST(t){const{default:i,optimise:e,optimise_raw:a}=await import("./squoosh_oxipng.js");return await i(t),{optimise:e,optimise_raw:a}}let wasmReady;export async function init(t){return wasmReady||(wasmReady=initST(t)),wasmReady}export default async function optimise(t,i={}){const e={...defaultOptions,...i},{optimise:a,optimise_raw:n}=await init();return t instanceof ImageData?n(t.data,t.width,t.height,e.level,e.interlace,e.optimiseAlpha).buffer:a(new Uint8Array(t),e.level,e.interlace,e.optimiseAlpha).buffer}