!function(e){e.MeeWoo=e.MeeWoo||{},e.MeeWoo.Mixins=e.MeeWoo.Mixins||{},e.MeeWoo.Mixins.PanelMixin={data:function(){return{activeRightPanel:null,dualChannelConfig:{channelMode:"color-left-alpha-right",width:0,height:0,quality:80,fps:30,muted:!1,aspectRatio:1},dualChannelSourceInfo:{name:"",sizeWH:"",duration:"",fileSize:"",fps:30,typeLabel:""},isConvertingToDualChannel:!1,dualChannelProgress:0,dualChannelMessage:"",dualChannelCancelled:!1,toSvgaConfig:{width:0,height:0,quality:80,fps:30,muted:!1,aspectRatio:1},toSvgaSourceInfo:{name:"",sizeWH:"",duration:"",fileSize:"",fps:30,typeLabel:""},isConvertingToSvga:!1,toSvgaProgress:0,toSvgaStage:"",toSvgaMessage:"",toSvgaCancelled:!1}},methods:{closeRightPanel:function(){if("to-svga"===this.activeRightPanel&&this.isConvertingToSvga){if(!confirm("正在转换中，确定要取消吗？"))return;this.cancelToSvgaConversion()}else if("dual-channel"===this.activeRightPanel&&this.isConvertingToDualChannel){if(!confirm("正在转换中，确定要取消吗？"))return;this.cancelDualChannelConversion()}else if("gif"===this.activeRightPanel&&this.isExportingGIF){if(!confirm("正在导出GIF中，确定要取消吗？"))return;this.cancelGifExport()}else if("frames"===this.activeRightPanel&&this.isExportingFrames){if(!confirm("正在导出序列帧中，确定要取消吗？"))return;this.cancelFramesExport()}else if("webp"===this.activeRightPanel&&this.isExportingWebp){if(!confirm("正在导出WebP中，确定要取消吗？"))return;this.cancelWebpExport()}else if(this.showStandardMp4Panel&&this.isConvertingStandardMp4){if(!confirm("正在转换中，确定要取消吗？"))return;this.cancelStandardMp4Conversion()}this.activeRightPanel=null,this.showStandardMp4Panel=!1},closeAllPanels:function(){this.closeRightPanel()},openRightPanel:function(e){console.log("[调试] openRightPanel被调用，panelName:",e);let i=null,t=!1;if("showStandardMp4Panel"===e)t=!0;else if("gif"===e)i="gif";else if("frames"===e)i="frames";else if("webp"===e)i="webp";else if("to-svga"===e)i="to-svga";else if("dual-channel"===e)i="dual-channel";else if("material"===e)i="material";else if("showMp4ToSvgaPanel"===e||"showLottieToSvgaPanel"===e||"showFramesToSvgaPanel"===e||"showImagesToSvgaPanel"===e||"showYyevaToSvgaPanel"===e)i="to-svga";else if("showMp4ToDualChannelPanel"===e||"showLottieToDualChannelPanel"===e||"showFramesToDualChannelPanel"===e||"showImagesToDualChannelPanel"===e||"showSvgaToDualChannelPanel"===e)i="dual-channel";else if("showGifPanel"===e)i="gif";else if("showFramesPanel"===e)i="frames";else{if("showWebpPanel"!==e)return void console.warn("Unknown panel name:",e);i="webp"}console.log("[调试] 确定目标面板类型，targetPanel:",i,"isStandardMp4:",t),console.log("[调试] 当前activeRightPanel:",this.activeRightPanel),t?(console.log("[调试] 处理标准MP4面板，当前showStandardMp4Panel:",this.showStandardMp4Panel),this.showStandardMp4Panel?(console.log("[调试] 关闭标准MP4面板"),this.showStandardMp4Panel=!1,this.activeRightPanel=null):(console.log("[调试] 打开标准MP4面板"),this.activeRightPanel=null,this.showStandardMp4Panel=!0)):(console.log("[调试] 处理其他面板，当前activeRightPanel:",this.activeRightPanel,"targetPanel:",i),this.activeRightPanel===i?(console.log("[调试] 关闭所有面板"),this.activeRightPanel=null,this.showStandardMp4Panel=!1):(console.log("[调试] 打开目标面板:",i),this.showStandardMp4Panel=!1,this.activeRightPanel=i,console.log("[调试] 设置后activeRightPanel:",this.activeRightPanel))),console.log("[调试] openRightPanel方法执行完毕"),console.log("[调试] 最终activeRightPanel:",this.activeRightPanel)},openToSvgaPanel:function(){console.log("[调试] 打开转SVGA弹窗，当前模块:",this.currentModule);var e={name:"",sizeWH:"",duration:"",fileSize:"",fps:30,typeLabel:""},i={width:0,height:0,quality:80,fps:30,muted:!1,aspectRatio:1};"mp4"===this.currentModule?(e.name=this.mp4.fileInfo.name,e.sizeWH=this.mp4.fileInfo.width+"x"+this.mp4.fileInfo.height,e.duration=this.utils.formatTime(this.mp4.fileInfo.duration),e.fileSize=this.utils.formatSize(this.mp4.fileInfo.size),e.fps=30,e.typeLabel="MP4",i.width=this.mp4.fileInfo.width,i.height=this.mp4.fileInfo.height,i.aspectRatio=this.mp4.fileInfo.width/this.mp4.fileInfo.height):"lottie"===this.currentModule?(e.name=this.lottie.fileInfo.name,e.sizeWH=this.lottie.fileInfo.width+"x"+this.lottie.fileInfo.height,e.duration=this.utils.formatTime(this.lottie.fileInfo.duration),e.fileSize=this.utils.formatSize(this.lottie.fileInfo.size),e.fps=this.lottie.fileInfo.fps||30,e.typeLabel="Lottie",i.width=this.lottie.fileInfo.width,i.height=this.lottie.fileInfo.height,i.fps=this.lottie.fileInfo.fps||30,i.aspectRatio=this.lottie.fileInfo.width/this.lottie.fileInfo.height):"frames"===this.currentModule?(e.name=this.frames.fileInfo.name,e.sizeWH=this.frames.fileInfo.width+"x"+this.frames.fileInfo.height,e.duration=this.utils.formatTime(this.frames.fileInfo.duration),e.fileSize=this.utils.formatSize(this.frames.fileInfo.size),e.fps=this.frames.fileInfo.fps||25,e.typeLabel="序列帧",i.width=this.frames.fileInfo.width,i.height=this.frames.fileInfo.height,i.fps=this.frames.fileInfo.fps||25,i.aspectRatio=this.frames.fileInfo.width/this.frames.fileInfo.height):"yyeva"===this.currentModule&&(e.name=this.yyeva.fileInfo.name,e.sizeWH=this.yyeva.fileInfo.width+"x"+this.yyeva.fileInfo.height,e.duration=this.utils.formatTime(this.yyeva.fileInfo.duration),e.fileSize=this.utils.formatSize(this.yyeva.fileInfo.size),e.fps=this.yyeva.fileInfo.fps||30,e.typeLabel="双通道MP4",i.width=this.yyeva.fileInfo.width,i.height=this.yyeva.fileInfo.height,i.fps=this.yyeva.fileInfo.fps||30,i.aspectRatio=this.yyeva.fileInfo.width/this.yyeva.fileInfo.height),this.toSvgaSourceInfo=e,this.toSvgaConfig=i,this.activeRightPanel="to-svga",console.log("[调试] 插队加载ffmpeg库"),this.loadLibrary&&this.loadLibrary(["ffmpeg"],!0).then(function(){console.log("[调试] ffmpeg加载成功")}).catch(function(e){console.error("[调试] ffmpeg加载失败:",e)})},handleToSvgaConvert:function(e){this.toSvgaConfig=e,"mp4"===this.currentModule?this.startMp4ToSvgaConversion(e):"lottie"===this.currentModule?this.startLottieToSvgaConversion(e):"frames"===this.currentModule?this.startFramesToSvgaConversion(e):"yyeva"===this.currentModule&&(this.yyevaToSvgaConfig=Object.assign({},this.yyevaToSvgaConfig,e),this.startSVGAConversion(e))},cancelToSvgaConversion:function(){this.toSvgaCancelled=!0,this.toSvgaMessage="正在取消...",this.mp4ToSvgaCancelled=!0,this.lottieToSvgaCancelled=!0,this.framesToSvgaCancelled=!0,this.svgaConvertCancelled=!0},openDualChannelPanel:function(){var e={name:"",sizeWH:"",duration:"",fileSize:"",fps:30,typeLabel:""},i={channelMode:"color-left-alpha-right",width:0,height:0,quality:80,fps:30,muted:!1,aspectRatio:1};"svga"===this.currentModule?(e.name=this.svga.fileInfo.name,e.sizeWH=this.svga.fileInfo.width+"x"+this.svga.fileInfo.height,e.duration=this.utils.formatTime(this.svga.fileInfo.duration),e.fileSize=this.utils.formatSize(this.svga.fileInfo.size),e.fps=this.svga.fileInfo.fps||30,e.typeLabel="SVGA",i.width=this.svga.fileInfo.width,i.height=this.svga.fileInfo.height,i.fps=this.svga.fileInfo.fps||30,i.aspectRatio=this.svga.fileInfo.width/this.svga.fileInfo.height):"mp4"===this.currentModule?(e.name=this.mp4.fileInfo.name,e.sizeWH=this.mp4.fileInfo.width+"x"+this.mp4.fileInfo.height,e.duration=this.utils.formatTime(this.mp4.fileInfo.duration),e.fileSize=this.utils.formatSize(this.mp4.fileInfo.size),e.fps=30,e.typeLabel="MP4",i.width=this.mp4.fileInfo.width,i.height=this.mp4.fileInfo.height,i.aspectRatio=this.mp4.fileInfo.width/this.mp4.fileInfo.height):"lottie"===this.currentModule?(e.name=this.lottie.fileInfo.name,e.sizeWH=this.lottie.fileInfo.width+"x"+this.lottie.fileInfo.height,e.duration=this.utils.formatTime(this.lottie.fileInfo.duration),e.fileSize=this.utils.formatSize(this.lottie.fileInfo.size),e.fps=this.lottie.fileInfo.fps||30,e.typeLabel="Lottie",i.width=this.lottie.fileInfo.width,i.height=this.lottie.fileInfo.height,i.fps=this.lottie.fileInfo.fps||30,i.aspectRatio=this.lottie.fileInfo.width/this.lottie.fileInfo.height,i.muted=!0):"frames"===this.currentModule&&(e.name=this.frames.fileInfo.name,e.sizeWH=this.frames.fileInfo.width+"x"+this.frames.fileInfo.height,e.duration=this.utils.formatTime(this.frames.fileInfo.duration),e.fileSize=this.utils.formatSize(this.frames.fileInfo.size),e.fps=this.frames.fileInfo.fps||25,e.typeLabel="序列帧",i.width=this.frames.fileInfo.width,i.height=this.frames.fileInfo.height,i.fps=this.frames.fileInfo.fps||25,i.aspectRatio=this.frames.fileInfo.width/this.frames.fileInfo.height,i.muted=!0),this.dualChannelSourceInfo=e,this.dualChannelConfig=i,this.activeRightPanel="dual-channel"},handleDualChannelConvert:function(e){this.dualChannelConfig=e,"svga"===this.currentModule?(this.svgaToDualChannelConfig=Object.assign({},this.svgaToDualChannelConfig,e),this.startMP4Conversion(e)):"mp4"===this.currentModule?(this.mp4ToDualChannelConfig=Object.assign({},this.mp4ToDualChannelConfig,e),this.startMp4ToDualChannelConversion(e)):"lottie"===this.currentModule?(this.lottieToDualChannelConfig=Object.assign({},this.lottieToDualChannelConfig,e),this.startLottieToDualChannelConversion(e)):"frames"===this.currentModule&&(this.imagesToDualChannelConfig=Object.assign({},this.imagesToDualChannelConfig,e),this.startFramesToDualChannelConversion(e))},cancelDualChannelConversion:function(){this.dualChannelCancelled=!0,this.dualChannelMessage="正在取消...",this.mp4ConvertCancelled=!0,this.framesToDualChannelCancelled=!0},openGifPanel:function(){this.activeRightPanel="gif"},openMp4ToSvgaPanel:function(){this.openToSvgaPanel()},openLottieToSvgaPanel:function(){this.openToSvgaPanel()},openFramesToSvgaPanel:function(){this.openToSvgaPanel()},openMp4ToDualChannelPanel:function(){this.openDualChannelPanel()},openLottieToDualChannelPanel:function(){this.openDualChannelPanel()},openFramesToDualChannelPanel:function(){this.openDualChannelPanel()},openSVGAPanel:function(){this.openToSvgaPanel()},openMP4Panel:function(){this.openDualChannelPanel()}}}}(window);