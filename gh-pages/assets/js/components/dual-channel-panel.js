window.MeeWoo=window.MeeWoo||{},window.MeeWoo.Components=window.MeeWoo.Components||{},window.MeeWoo.Components.DualChannelPanel={template:'\n    <div class="side-panel side-panel--right dual-channel-panel" :class="{\'show\': visible}">\n      <div class="side-panel-container">\n        \x3c!-- 标题区 --\x3e\n        <div class="side-panel-header">\n          <h3 class="side-panel-title">转换为双通道MP4格式</h3>\n          <div class="side-panel-divider"></div>\n        </div>\n\n        \x3c!-- 信息区 --\x3e\n        <div class="mp4-info-section">\n          <div class="mp4-info-row">{{ sourceInfo.typeLabel }}尺寸：{{ sourceInfo.sizeWH }} 时长：{{ sourceInfo.duration }}</div>\n          <div class="mp4-compress-hint">注意：第一次转换需要加载FFmpeg（25M），请耐心等待<br>压缩质量调越低，文件就越小，画面越糊。</div>\n        </div>\n\n        \x3c!-- 配置区域 --\x3e\n        <div class="mp4-config-section" :class="{disabled: isConverting}">\n          \x3c!-- 遮罩位置 --\x3e\n          <div class="mp4-config-item">\n            <div class="mp4-config-label">遮罩位置：</div>\n            <div class="mp4-select-wrapper" :class="{open: showChannelModeDropdown, disabled: isConverting}"\n              @click="!isConverting && toggleChannelModeDropdown()">\n              <div class="mp4-select-text">\n                {{ config.channelMode === \'color-left-alpha-right\' ? \'左彩右灰\' : \'左灰右彩\' }}\n              </div>\n              <div class="mp4-select-icon">\n                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n                  <path d="M4 6L8 10L12 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"\n                    stroke-linejoin="round" />\n                </svg>\n              </div>\n              \x3c!-- 下拉菜单 --\x3e\n              <div class="mp4-select-dropdown">\n                <div class="mp4-select-option" :class="{selected: config.channelMode === \'color-left-alpha-right\'}"\n                  @click.stop="selectChannelMode(\'color-left-alpha-right\')">\n                  左彩右灰（左侧彩色通道，右侧Alpha通道）\n                </div>\n                <div class="mp4-select-option" :class="{selected: config.channelMode === \'alpha-left-color-right\'}"\n                  @click.stop="selectChannelMode(\'alpha-left-color-right\')">\n                  左灰右彩（左侧Alpha通道，右侧彩色通道）\n                </div>\n              </div>\n            </div>\n          </div>\n\n          \x3c!-- 尺寸 --\x3e\n          <div class="mp4-config-item">\n            <div class="mp4-config-label">尺寸：</div>\n            <div class="mp4-size-container">\n              <div class="input-wrapper input-wrapper--lg mp4-size-input-wrapper">\n                <input type="number" class="base-input" v-model.number="config.width" @input="onWidthChange"\n                  :disabled="isConverting" min="0" max="3000" />\n              </div>\n              <div class="mp4-size-lock">\n                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n                  <path\n                    d="M4.66667 7.33333V5.33333C4.66667 3.86057 5.86057 2.66667 7.33333 2.66667H8.66667C10.1394 2.66667 11.3333 3.86057 11.3333 5.33333V7.33333M5.33333 7.33333H10.6667C11.403 7.33333 12 7.93029 12 8.66667V12C12 12.7364 11.403 13.3333 10.6667 13.3333H5.33333C4.59695 13.3333 4 12.7364 4 12V8.66667C4 7.93029 4.59695 7.33333 5.33333 7.33333Z"\n                    stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" />\n                </svg>\n              </div>\n              <div class="input-wrapper input-wrapper--lg mp4-size-input-wrapper">\n                <input type="number" class="base-input" v-model.number="config.height" @input="onHeightChange"\n                  :disabled="isConverting" min="0" max="3000" />\n              </div>\n            </div>\n          </div>\n\n          \x3c!-- 压缩到质量 --\x3e\n          <div class="mp4-config-item">\n            <div class="mp4-config-label">压缩到质量：</div>\n            <div class="mp4-value-container">\n              <div class="input-wrapper input-wrapper--lg mp4-value-input-wrapper">\n                <input type="number" class="base-input" v-model.number="config.quality" :disabled="isConverting"\n                  min="1" max="100" />\n              </div>\n              <div class="input-unit">%</div>\n            </div>\n          </div>\n\n          \x3c!-- 帧率修改 --\x3e\n          <div class="mp4-config-item">\n            <div class="mp4-config-label">帧率修改：</div>\n            <div class="mp4-value-container">\n              <div class="input-wrapper input-wrapper--lg mp4-value-input-wrapper">\n                <input type="number" class="base-input" v-model.number="config.fps" :disabled="isConverting"\n                  min="1" max="120" />\n              </div>\n              <div class="input-unit">FPS</div>\n            </div>\n          </div>\n\n          \x3c!-- 静音 --\x3e\n          <div class="mp4-config-item">\n            <div class="mp4-config-label">静音</div>\n            <div class="mp4-mute-toggle" :class="{active: config.muted, disabled: isConverting}"\n              @click="!isConverting && (config.muted = !config.muted)">\n              <div class="mp4-mute-toggle-handle"></div>\n            </div>\n          </div>\n        </div>\n\n        \x3c!-- 底部按钮 --\x3e\n        <div class="side-panel-footer">\n          \x3c!-- 返回按钮（转换中变为取消按钮） --\x3e\n          <button v-if="!isConverting" class="material-btn-back" @click="close" title="返回">\n            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">\n              <path d="M12 16L6 10L12 4" stroke="#333333" stroke-width="2" stroke-linecap="round"\n                stroke-linejoin="round" />\n            </svg>\n            <span>取消</span>\n          </button>\n          <button v-else class="material-btn-back mp4-btn-cancel" @click="cancel" title="取消转换">\n            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">\n              <path d="M5 5L15 15M15 5L5 15" stroke="#ff4444" stroke-width="2" stroke-linecap="round"\n                stroke-linejoin="round" />\n            </svg>\n            <span>取消</span>\n          </button>\n\n          \x3c!-- 转换按钮 --\x3e\n          <button class="btn-large-secondary" :class="{\'mp4-btn-converting\': isConverting}"\n            :data-progress="progress" :disabled="disabled" @click="start">\n            <template v-if="isConverting">\n              <span class="mp4-progress-text">{{ progress }}%</span>\n              <span class="mp4-stage-text">{{ message }}</span>\n            </template>\n            <template v-else>\n              开始转换双通道MP4\n            </template>\n          </button>\n        </div>\n      </div>\n    </div>\n  ',props:{visible:{type:Boolean,default:!1},sourceInfo:{type:Object,default:function(){return{sizeWH:"",duration:"",typeLabel:""}}},initialConfig:{type:Object,default:null},isConverting:{type:Boolean,default:!1},progress:{type:Number,default:0},message:{type:String,default:""},disabled:{type:Boolean,default:!1}},data:function(){return{config:{channelMode:"color-left-alpha-right",width:0,height:0,quality:80,fps:30,muted:!1,aspectRatio:1},showChannelModeDropdown:!1}},watch:{visible:function(n){n&&this.initialConfig&&(this.config=JSON.parse(JSON.stringify(this.initialConfig)),this.config.width&&this.config.height&&(this.config.aspectRatio=this.config.width/this.config.height))}},methods:{close:function(){this.$emit("close")},cancel:function(){this.$emit("cancel")},start:function(){this.$emit("convert",this.config)},toggleChannelModeDropdown:function(){this.showChannelModeDropdown=!this.showChannelModeDropdown},selectChannelMode:function(n){this.config.channelMode=n,this.showChannelModeDropdown=!1},onWidthChange:function(){var n=this.config.width;n>0&&this.config.aspectRatio>0&&(this.config.height=Math.round(n/this.config.aspectRatio))},onHeightChange:function(){var n=this.config.height;n>0&&this.config.aspectRatio>0&&(this.config.width=Math.round(n*this.config.aspectRatio))}}};